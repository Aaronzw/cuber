<v-app>
  <div v-show="!menu" v-resize="resize" style="padding:0%;background-color:#C0C0C0;user-select: none;touch-action: none;">
    <v-btn
      fixed
      left
      top
      @click.native.stop.prevent
      @touchstart.native.stop.prevent
      text
      color="primary"
      style="margin:0%;padding:0%;"
      :style="{height:size+'px'}"
    >
      <div style="text-transform: none" :style="{'font-size':(size * 0.8)+'px'}">{{name}}</div>
    </v-btn>
    <div ref="cuber"></div>
    <div style="margin:0%;padding:0%;background-color:#FFFFFF;" :style="{width:width + 'px', height:(size * 4) + 'px'}">
      <v-container fluid grid-list-md text-xs-center>
        <v-layout row wrap>
          <v-flex xs12>
            <v-text-field
              dense
              single-line
              hide-details
              outlined
              :disabled="playing"
              :append-icon="exp==origin?'':'settings_backup_restore'"
              @click:append="exp=origin"
              v-model="exp"
            >
            </v-text-field>
          </v-flex>
          <v-flex xs12 style="padding-left: 5%; padding-right: 5%">
            <v-slider style="margin: 0%" readonly hide-details thumb-label="false" ticks="always" v-model="progress" :max="actions.length"></v-slider>
          </v-flex>
          <v-flex xs2.4>
            <v-btn block text large @click.native.stop.prevent="menu=!menu" @touchstart.native.stop.prevent="menu=!menu" style="margin: 0%; padding: 0%;">
              <v-icon large>menu</v-icon>
            </v-btn>
          </v-flex>
          <v-flex xs2.4>
            <v-btn
              block
              text
              large
              :disabled="progress==0"
              @click.native.stop.prevent="backward"
              @touchstart.native.stop.prevent="backward"
              style="margin: 0%; padding: 0%;"
            >
              <v-icon large>fast_rewind</v-icon>
            </v-btn>
          </v-flex>
          <v-flex xs2.4>
            <v-btn
              block
              text
              large
              :disabled="exp == ''"
              @click.native.stop.prevent="toggle"
              @touchstart.native.stop.prevent="toggle"
              style="margin: 0%; padding: 0%;"
            >
              <v-icon large>{{progress == actions.length?'replay':(playing?'pause':'play_arrow')}}</v-icon>
            </v-btn>
          </v-flex>
          <v-flex xs2.4>
            <v-btn
              block
              text
              large
              :disabled="progress == actions.length"
              @click.native.stop.prevent="forward"
              @touchstart.native.stop.prevent="forward"
              style="margin: 0%; padding: 0%;"
            >
              <v-icon large>fast_forward</v-icon>
            </v-btn>
          </v-flex>
          <v-flex xs2.4>
            <v-btn block text large @click.native.stop.prevent="tune=!tune" @touchstart.native.stop.prevent="tune=!tune" style="margin: 0%; padding: 0%;">
              <v-icon large>tune</v-icon>
            </v-btn>
          </v-flex>
        </v-layout>
      </v-container>
    </div>
  </div>
  <tune v-model="tune"></tune>
  <div v-show="menu" style="margin:0;display: flex;flex-flow: column;height: 100%;background-color: #C0C0C0;">
    <div>
      <v-tabs v-model="tab" grow color="cyan">
        <v-tab v-for="(group,i) in algs" :key="i" :href="`#tab-${i}`">
          {{ group.name}}
        </v-tab>
      </v-tabs>
    </div>
    <div style="flex: 1;overflow: auto;">
      <v-tabs-items v-model="tab">
        <v-tab-item v-for="(group,i) in pics" :key="i" :value="'tab-' + i" style="height: 100%;">
          <v-layout row wrap style="margin: 0%; padding:0%; min-width: 0%; min-height: 0%;align-items: stretch;">
            <v-flex d-flex style="padding:0%; min-width: 0%; min-height: 0%;" v-for="(pic, j) in group">
              <v-card outlined :style="{width:Math.min(width, height) / 4+'px'}" style="height: 100%;">
                <p class="title" style="text-align:center;margin: 0%;padding: 0%;color: indianred">{{algs[i].algs[j].name}}</p>
                <img :src="pic" style="width: 100%;" @click="index={group:i, index:j};menu=false;" />
                <p style="text-align:center;word-wrap:break-word;margin: 0%;padding: 0%;">{{algs[i].algs[j].exp}}</p>
              </v-card>
            </v-flex>
          </v-layout>
        </v-tab-item>
      </v-tabs-items>
    </div>
  </div>
</v-app>
