!function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/dist/",i(i.s=16)}([function(e,t,i){e.exports=i(3)(7)},function(e,t,i){e.exports=i(3)(11)},function(e,t,i){e.exports=i(3)(1)},function(e,t){e.exports=dll_library},function(e,t,i){e.exports=i(3)(12)},function(e,t){e.exports='<v-container fluid grid-list-md text-xs-center v-show="show" style="padding-top: 0%; background: #FAFAFA">\n  <v-layout row wrap>\n    <v-flex xs4>\n      <fast-button block @tap="twist(\'*\')" class="headline" style="height:2em; min-width: 0%; min-height: 0%; margin: 0%; padding: 0%;">\n        <v-icon large>casino</v-icon>\n      </fast-button>\n    </v-flex>\n    <v-flex xs4>\n      <fast-button block @tap="twist(\'#\')" class="headline" style="height:2em; min-width: 0%; min-height: 0%; margin: 0%; padding: 0%;">\n        <v-icon large>format_paint</v-icon>\n      </fast-button>\n    </v-flex>\n    <v-flex xs4>\n      <fast-button block @tap="option.keyboard = false" class="headline" style="height:2em; min-width: 0%; min-height: 0%; margin: 0%; padding: 0%;">\n        <v-icon large>keyboard_hide</v-icon>\n      </fast-button>\n    </v-flex>\n    <v-flex v-for="exp in exps" d-flex xs2>\n      <fast-button @tap="twist(exp)" class="headline" style="width:auto; height:2em; min-width: 0%; min-height: 0%; margin: 0%; text-transform:none">{{exp}}\n      </fast-button>\n    </v-flex>\n    <v-flex xs4>\n      <fast-button @tap="layers==1?layers=0:layers=1" :color="layers == 1?\'primary\':\'\'" :outline="layers == 1" block\n        class="headline" style="height:2em; min-width: 0%; min-height: 0%; margin: 0%;">\n        <v-icon large>view_carousel</v-icon>\n      </fast-button>\n    </v-flex>\n    <v-flex xs4>\n      <fast-button @tap="layers==2?layers=0:layers=2" :color="layers == 2?\'primary\':\'\'" :outline="layers == 2" block\n        class="headline" style="height:2em; min-width: 0%; min-height: 0%; margin: 0%;">\n        <v-icon large>looks_two</v-icon>\n      </fast-button>\n    </v-flex>\n    <v-flex xs4>\n      <fast-button @tap="layers==3?layers=0:layers=3" :color="layers == 3?\'primary\':\'\'" :outline="layers == 3" block\n        class="headline" style="height:2em; min-width: 0%; min-height: 0%; margin: 0%;">\n        <v-icon large>looks_3</v-icon>\n      </fast-button>\n    </v-flex>\n  </v-layout>\n</v-container>'},function(e){e.exports=[{name:"F2L",strips:[{indexes:[6,7,8,15,16,17,24,25,26],faces:[0,1,2,3,4,5]}],scripts:[{name:"F2L-01",exp:"URU'R'"},{name:"F2L-02",exp:"y'(U'R'UR)y"},{name:"F2L-03",exp:"y'(R'U'R)y"},{name:"F2L-04",exp:"(RUR')"},{name:"F2L-05",exp:"U'(RUR')U2(RU'R')"},{name:"F2L-06",exp:"d(R'U'R)U2(R'UR)y"},{name:"F2L-07",exp:"U'(RU'2)(R'U2)(RU'R')"},{name:"F2L-08",exp:"d(R'U2)(RU'2)(R'UR)y"},{name:"F2L-09",exp:"y'(UR'U'RU'R'U'R)y"},{name:"F2L-10",exp:"U'(RUR'URUR')"},{name:"F2L-11",exp:"y'(R'URU')(R'URU'2)(R'UR)y"},{name:"F2L-12",exp:"(RU'R'U)(RU'R'U2)(RU'R')"},{name:"F2L-13",exp:"d(R'URU')(R'U'R)y"},{name:"F2L-14",exp:"U'(RU'R'U)(RUR')"},{name:"F2L-15",exp:"(RUR')(U2RU'R'URU'R')"},{name:"F2L-16",exp:"(RU'R'U)(dR'U'R)y"},{name:"F2L-17",exp:"(RU'2)(R'U'RUR')"},{name:"F2L-18",exp:"y'(R'U2)(RUR'U'R)y"},{name:"F2L-19",exp:"U(RU'2)(R'URU')R'"},{name:"F2L-20",exp:"y'(U'R'U2RU')(R'UR)y"},{name:"F2L-21",exp:"(RU'R'U2)(RUR')"},{name:"F2L-22",exp:"y'U2(R'U'RU')(R'UR)y"},{name:"F2L-23",exp:"(RUR'U2)(RUR'U')(RUR')"},{name:"F2L-24",exp:"y'(R'U'RU2)(R'U'RU)(R'U'R)y"},{name:"F2L-25",exp:"yU'(L'ULU)y'(RU'R')"},{name:"F2L-26",exp:"(URU'R'U')y'(R'UR)y"},{name:"F2L-27",exp:"(RU'R'U)(RU'R')"},{name:"F2L-28",exp:"y'(R'U)(RU')(R'UR)y"},{name:"F2L-29",exp:"y'(R'U'RU)(R'U'R)y"},{name:"F2L-30",exp:"(RUR'U')(RUR')"},{name:"F2L-31",exp:"(RU'R')y'(R'U2R)y"},{name:"F2L-32",exp:"(RUR'U')2(RUR')"},{name:"F2L-33",exp:"(RUR'U')(RU'R'URU'R')"},{name:"F2L-34",exp:"U'(RU'2R'U)(RUR')"},{name:"F2L-35",exp:"U'(RUR')d(R'U'R)y"},{name:"F2L-36",exp:"d(R'U'R)d'(RUR')"},{name:"F2L-37",exp:"(RU'2R'U)2y'(R'U'R)y"},{name:"F2L-38",exp:"(RUR'U')(RU2R'U')(RUR')"},{name:"F2L-39",exp:"(RU'R'U)(RU'2R'U)(RU'R')"},{name:"F2L-40",exp:"(RU'R'U')(RU'R')d(R'U'R)y"},{name:"F2L-41",exp:"(RUR'U')(RU'R'U)d(R'U'R)y"}]},{name:"OLL",strips:[{indexes:[6,7,8,15,16,17,24,25,26],faces:[0,1,2,4,5]}],scripts:[{name:"OLL-01",exp:"(RU'2)(R2'FRF')U2(R'FRF')"},{name:"OLL-02",exp:"(FRUR'U'F')(fRUR'U'f')"},{name:"OLL-03",exp:"f(RUR'U')f'U'F(RUR'U')F'"},{name:"OLL-04",exp:"f(RUR'U')yx(R'F)(RUR'U')F'y'"},{name:"OLL-05",exp:"(r'U2)(RUR'U)r"},{name:"OLL-06",exp:"(rU'2)(R'U'RU'r')"},{name:"OLL-07",exp:"rUR'URU'2r'"},{name:"OLL-08",exp:"r'U'RU'R'U2r"},{name:"OLL-09",exp:"(R'U'R)y'x'(RU')(R'F)(RUR')xy"},{name:"OLL-10",exp:"(RUR'U)(R'FRF')(RU'2R')"},{name:"OLL-11",exp:"r'(R2UR'U)(RU'2R'U)(rR')"},{name:"OLL-12",exp:"L2lU'z(UR'U')(R2UR')z'rR'"},{name:"OLL-13",exp:"(rU'r'U')(rUr')(F'UF)"},{name:"OLL-14",exp:"R'FRUR'F'R(FU'F')"},{name:"OLL-15",exp:"(r'U'r)(R'U'RU)(r'Ur)"},{name:"OLL-16",exp:"RBR'LUL'U'RB'R'"},{name:"OLL-17",exp:"(RUR'U)(R'FRF'U2)R'FRF'"},{name:"OLL-18",exp:"F(RUR'd)(R'U2)(R'FRF')y"},{name:"OLL-19",exp:"R'U2FRUR'U'y'R2U'2RBy"},{name:"OLL-20",exp:"r'(RU)(RUR'U'r2)(R2'U)(RU')r'"},{name:"OLL-21",exp:"(RU'2)(R'U'RUR'U')(RU'R')"},{name:"OLL-22",exp:"RU'2(R'2U')(R2U')R'2U'2R"},{name:"OLL-23",exp:"(R2D')(RU2)(R'D)(RU2R)"},{name:"OLL-24",exp:"(rUR'U')(r'FRF')"},{name:"OLL-25",exp:"F'(rUR'U')(r'FR)"},{name:"OLL-26",exp:"RU'2R'U'RU'R'"},{name:"OLL-27",exp:"R'U2RUR'UR"},{name:"OLL-28",exp:"(rUR'U')(r'RU)(RU'R')"},{name:"OLL-29",exp:"(R2U'R)F(R'U)(R2U')(R'F'R)"},{name:"OLL-30",exp:"(R2UR'B')(RU')(R2'U)(lUl')"},{name:"OLL-31",exp:"(r'F'UF)(LF'L'U'r)"},{name:"OLL-32",exp:"(RU)(B'U')(R'URBR')"},{name:"OLL-33",exp:"(RUR'U')(R'FRF')"},{name:"OLL-34",exp:"(R'U'RU)x'z'(RU)(L'U')rR'y"},{name:"OLL-35",exp:"RU'2R2'FRF'(RU'2R')"},{name:"OLL-36",exp:"R'U'RU'R'URUlU'R'Ux"},{name:"OLL-37",exp:"F(RU'R'U'RU)(R'F')"},{name:"OLL-38",exp:"(RUR'U)(RU'R'U')(R'FRF')"},{name:"OLL-39",exp:"(LF'L'U'LU)(FU'L')"},{name:"OLL-40",exp:"(R'FRUR'U')(F'UR)"},{name:"OLL-41",exp:"RU'R'U2RUyRU'R'U'F'y'"},{name:"OLL-42",exp:"(R'URU'2R'U')(F'U)(FUR)"},{name:"OLL-43",exp:"(B'U')(R'URB)"},{name:"OLL-44",exp:"f(RUR'U')f'"},{name:"OLL-45",exp:"F(RUR'U')F'"},{name:"OLL-46",exp:"(R'U')R'FRF'(UR)"},{name:"OLL-47",exp:"B'(R'U'RU)2B"},{name:"OLL-48",exp:"F(RUR'U')2F'"},{name:"OLL-49",exp:"RB'(R2F)(R2B)R2F'R"},{name:"OLL-50",exp:"L'B(L2F')(L2B')L2FL'"},{name:"OLL-51",exp:"f(RUR'U')2f'"},{name:"OLL-52",exp:"R'U'RU'R'dR'UlUxy"},{name:"OLL-53",exp:"(r'U2)(RUR'U')(RUR'U)r"},{name:"OLL-54",exp:"(rU'2)(R'U'RUR'U')(RU'r')"},{name:"OLL-55",exp:"(RU'2)(R'2U')RU'R'U2(FRF')"},{name:"OLL-56",exp:"F(RUR'U')(RF')(rUR'U')r'"},{name:"OLL-57",exp:"(RUR'U'r)(R'U)(RU'r')"}]},{name:"PLL",strips:[],scripts:[{name:"PLL-Aa",exp:"x(R2U'2)(R'D')(RU'2)(R'DR')x'"},{name:"PLL-Ab",exp:"x(RD'R)U2R'DRU2R'2x'"},{name:"PLL-E",exp:"x'(RU'R'DRUR')u2'(R'URDR'U'R)x'y2"},{name:"PLL-F",exp:"(R'U'F')(RUR'U')(R'FR2U'R'U')(RUR'UR)"},{name:"PLL-Ga",exp:"(R2uR')(UR'U'Ru')(R'2F'UF)"},{name:"PLL-Gb",exp:"(R'd'F)(R2u)(R'URU'Ru'R'2)y'"},{name:"PLL-Gc",exp:"(R'2u'RU'R)(UR'u)(R2fR'f')"},{name:"PLL-Gd",exp:"(RUR')y'(R2u'RU'R'U)(R'uR2)y"},{name:"PLL-H",exp:"M2UM2U2M2UM2"},{name:"PLL-Ja",exp:"z(U'RD')(R2UR'U')(R2UDR')z'"},{name:"PLL-Jb",exp:"(RUR'F')(RUR'U')(R'F)(R2U'R')"},{name:"PLL-Na",exp:"z(R'UR')z'(RU2L'UR')z(UR')z'(RU2L'UR')"},{name:"PLL-Nb",exp:"z(U'RD')(R2UR'U')z'(RUR')z(R2UR')z'(RU')"},{name:"PLL-Ra",exp:"(RU'2)(R'U2)(RB'R'U')(RURBR2'U)"},{name:"PLL-Rb",exp:"(R'U2)(RU'2)(R'FRUR'U')(R'F'R2U')"},{name:"PLL-T",exp:"(RUR'U')(R'F)(R2U'R'U'RUR'F')"},{name:"PLL-Ua",exp:"(RU'R)(URUR)(U'R'U'R2)"},{name:"PLL-Ub",exp:"(R2U)(RUR'U')(R'U')(R'UR')"},{name:"PLL-V",exp:"(R'UR'U'yx2)(R'UR'U'yx)(U2R'U'RUR)x"},{name:"PLL-Y",exp:"F(RU'R'U')(RUR'F')(RUR'U')(R'FRF')"},{name:"PLL-Z",exp:"(R'U'RU'R)(URU'R'UR)(UR2U'R')U2"}]}]},function(e,t){e.exports='<v-container fluid grid-list-md text-xs-center v-show="show" style="padding-top: 0%; background: #FAFAFA">\n  <v-layout row wrap>\n    <v-flex xs12 style="margin: 0%; padding: 0%; display: flex">\n      <template v-for="(group, i) in scripts">\n        <fast-button class="headline" :color="type == i?\'primary\':\'\'" :outline="type == i" flat block style="text-transform:none; min-width: 0%; min-height: 0%; margin: 0%; padding: 0%; height: 2em; flex: 1" @tap="type = i;init();">\n          {{type==i?(progress != 0?\'\':script.name):group.name}}\n          <v-icon large v-show="type == i && (progress != 0)">replay</v-icon>\n        </fast-button>\n      </template>\n    </v-flex>\n    <v-flex xs12>\n      <v-text-field outline single-line hide-details class="headline" :append-icon="exp==script.exp?\'\':\'settings_backup_restore\'" @click:append="exp=script.exp" v-model="exp"></v-text-field>\n    </v-flex>\n    <v-flex xs12 style="padding-left: 5%; padding-right: 5%">\n      <v-slider style="margin: 0%" readonly hide-details thumb-label="false" ticks="always" v-model="progress" :max="actions.length"></v-slider>\n    </v-flex>\n    <v-flex xs2.4>\n      <v-btn icon large @mousedown="indexDown(-1)" @mouseup="indexUp(-1)" @mouseleave="indexUp(-1)" @touchstart.stop.prevent="indexDown(-1)" @touchend.stop.prevent="indexUp(-1)" style="margin: 0%; padding: 0%;">\n        <v-icon large>skip_previous</v-icon>\n      </v-btn>\n    </v-flex>\n    <v-flex xs2.4>\n      <fast-button icon large :disabled="progress==0" @tap="backward" style="margin: 0%; padding: 0%;">\n        <v-icon large>fast_rewind</v-icon>\n      </fast-button>\n    </v-flex>\n    <v-flex xs2.4>\n      <fast-button icon large :disabled="progress == actions.length" @tap="toggle" style="margin: 0%; padding: 0%;">\n        <v-icon large>{{playing?\'pause\':\'play_arrow\'}}</v-icon>\n      </fast-button>\n    </v-flex>\n    <v-flex xs2.4>\n      <fast-button icon large :disabled="progress == actions.length" @tap="forward" style="margin: 0%; padding: 0%;">\n        <v-icon large>fast_forward</v-icon>\n      </fast-button>\n    </v-flex>\n    <v-flex xs2.4>\n      <v-btn icon large @mousedown="indexDown(1)" @mouseup="indexUp(1)" @mouseleave="indexUp(1)" @touchstart.stop.prevent="indexDown(1)" @touchend.stop.prevent="indexUp(1)" style="margin: 0%; padding: 0%;">\n        <v-icon large>skip_next</v-icon>\n      </v-btn>\n    </v-flex>\n  </v-layout>\n</v-container>'},function(e,t){e.exports='<v-bottom-sheet v-model="value">\n  <v-card flat :width="game.width" style="margin: auto">\n    <v-container fluid grid-list-md text-xs-center>\n      <v-layout row wrap justify-center align-center>\n        <v-flex xs3>\n          <v-icon large color="black">av_timer</v-icon>\n        </v-flex>\n        <v-flex xs3>\n          <fast-button icon :disabled="option.speed <= -4" @tap="option.speed--;demo();" style="min-width: 0%; min-height: 0%; margin: 0%; padding: 0%;">\n            <v-icon large>remove</v-icon>\n          </fast-button>\n        </v-flex>\n        <v-flex xs3>\n          <fast-button class="headline" flat block outline @tap :ripple="false" style="min-width: 0%; min-height: 0%; margin: 0%; padding: 0%;">{{option.speed}}\n          </fast-button>\n        </v-flex>\n        <v-flex xs3>\n          <fast-button icon :disabled="option.speed >= 4" @tap="option.speed++;demo();" style="min-width: 0%; min-height: 0%; margin: 0%; padding: 0%;">\n            <v-icon large>add</v-icon>\n          </fast-button>\n        </v-flex>\n      </v-layout>\n      <v-divider></v-divider>\n      <v-layout row wrap justify-center align-center>\n        <v-flex xs3>\n          <v-icon large color="black">transform</v-icon>\n        </v-flex>\n        <v-flex xs3>\n          <fast-button flat block :disabled="option.size <= -4" @tap="option.size--" style="min-width: 0%; min-height: 0%; margin: 0%; padding: 0%;">\n            <v-icon large>remove</v-icon>\n          </fast-button>\n        </v-flex>\n        <v-flex xs3>\n          <fast-button class="headline" flat block outline @tap :ripple="false" style="min-width: 0%; min-height: 0%; margin: 0%; padding: 0%;">{{option.size}}\n          </fast-button>\n        </v-flex>\n        <v-flex xs3>\n          <fast-button flat block :disabled="option.size >= 4" @tap="option.size++" style="min-width: 0%; min-height: 0%; margin: 0%; padding: 0%;">\n            <v-icon large>add</v-icon>\n          </fast-button>\n        </v-flex>\n      </v-layout>\n    </v-container>\n  </v-card>\n</v-bottom-sheet>'},function(e,t){e.exports='<v-bottom-sheet v-model="value">\n  <v-card flat :width="game.width" style="margin: auto">\n    <v-container fluid grid-list-md text-xs-center>\n      <v-layout row wrap>\n        <v-flex xs4>\n          <fast-button class="headline" :color="option.mode == \'play\'?\'primary\':\'\'" flat block @tap="$emit(\'input\', false); mode(\'play\')"\n            outline style="height: 2em; min-width: 0%; min-height: 0%; margin: 0%; padding: 0%;">\n            <v-icon large>games</v-icon>\n          </fast-button>\n        </v-flex>\n        <v-flex xs4>\n          <fast-button class="headline" :color="option.mode == \'script\'?\'primary\':\'\'" flat block @tap="$emit(\'input\', false); mode(\'script\')"\n            outline style="height: 2em; min-width: 0%; min-height: 0%; margin: 0%; padding: 0%;">\n            <v-icon large>school</v-icon>\n          </fast-button>\n        </v-flex>\n        <v-flex xs4>\n          <fast-button class="headline" :color="option.mode == \'movie\'?\'primary\':\'\'" flat block @tap="$emit(\'input\', false); mode(\'movie\')"\n            outline style="height: 2em; min-width: 0%; min-height: 0%; margin: 0%; padding: 0%;">\n            <v-icon large>movie</v-icon>\n          </fast-button>\n        </v-flex>\n      </v-layout>\n      <v-divider></v-divider>\n      <v-layout row wrap>\n        <v-flex xs4>\n          <fast-button class="headline" flat block @tap="$emit(\'input\', false); tune=true" style="height: 2em; min-width: 0%; min-height: 0%; margin: 0%; padding: 0%;">\n            <v-icon large>palette</v-icon>\n          </fast-button>\n        </v-flex>\n        <v-flex xs4>\n          <fast-button class="headline" color="error" flat block @tap="$emit(\'input\', false); reset()" style="height: 2em; min-width: 0%; min-height: 0%; margin: 0%; padding: 0%;">\n            <v-icon large>delete</v-icon>\n          </fast-button>\n        </v-flex>\n      </v-layout>\n    </v-container>\n  </v-card>\n  <tune-menu v-model="tune"></tune-menu>\n</v-bottom-sheet>'},function(e,t){e.exports='<v-container fluid grid-list-md text-xs-center v-show="show" style="padding-top: 0%; background: #FAFAFA">\n  <v-layout row wrap>\n    <v-flex xs3>\n      <fast-button @tap="operate = 0" :color="operate == 0?\'primary\':\'\'" :outline="operate == 0" block class="headline" style="height:2em; min-width: 0%; min-height: 0%; margin: 0%;">\n        <v-icon large>colorize</v-icon>\n      </fast-button>\n    </v-flex>\n    <v-flex xs3>\n      <fast-button @tap="operate = 1" :color="operate == 1?\'primary\':\'\'" :outline="operate == 1" block class="headline" style="height:2em; min-width: 0%; min-height: 0%; margin: 0%;">\n        <v-icon large>highlight</v-icon>\n      </fast-button>\n    </v-flex>\n    <v-flex xs3>\n      <fast-button @tap="operate = 2" :color="operate == 2?\'primary\':\'\'" :outline="operate == 2" block class="headline" style="height:2em; min-width: 0%; min-height: 0%; margin: 0%;">\n        <v-icon large>visibility</v-icon>\n      </fast-button>\n    </v-flex>\n    <v-flex xs3>\n      <fast-button @tap="reset" block class="headline" style="height:2em; min-width: 0%; min-height: 0%; margin: 0%;">\n        <v-icon large>replay</v-icon>\n      </fast-button>\n    </v-flex>\n    <v-flex xs12>\n      <v-text-field outline single-line hide-details class="headline" :append-icon="scene == \'\'?\'\':\'clear\'" @click:append="scene = \'\'" v-model="scene">\n        <v-icon style="vertical-align: middle" slot="label">terrain</v-icon>\n      </v-text-field>\n    </v-flex>\n    <v-flex xs12>\n      <v-text-field outline single-line hide-details class="headline" :append-icon="action == \'\'?\'\':\'clear\'" @click:append="action = \'\'" v-model="action">\n        <v-icon style="vertical-align: middle" slot="label">theaters</v-icon>\n      </v-text-field>\n    </v-flex>\n    <v-flex xs3>\n      <fast-button icon large :disabled="action == \'\' || recording" @tap="toggle" style="margin: 0%; padding: 0%;">\n        <v-icon large>{{playing?\'stop\':\'play_arrow\'}}</v-icon>\n      </fast-button>\n    </v-flex>\n    <v-flex xs3>\n      <fast-button icon large @tap="snap" style="margin: 0%; padding: 0%;">\n        <v-icon large>camera_alt</v-icon>\n      </fast-button>\n    </v-flex>\n    <v-flex xs3>\n      <fast-button icon large :disabled="action == \'\' || recording" @tap="film" style="margin: 0%; padding: 0%;">\n        <v-icon large>videocam</v-icon>\n      </fast-button>\n    </v-flex>\n    <v-flex xs3>\n      <fast-button icon large :disabled="recording" @tap="share" style="margin: 0%; padding: 0%;">\n        <v-icon large>share</v-icon>\n      </fast-button>\n    </v-flex>\n  </v-layout>\n\n  <v-dialog v-model="dialog" :width="game.width">\n    <v-card flat>\n      <v-card-text class="title" style="word-break: break-all;">{{link}}</v-card-text>\n    </v-card>\n  </v-dialog>\n</v-container>'},function(e,t){e.exports='<v-app>\n  <div v-resize="resize">\n    <div ref=cuber></div>\n    <div ref=panel>\n      <keyboard-panel :show="option.mode == \'play\' && option.keyboard"></keyboard-panel>\n      <script-panel :show="option.mode == \'script\'"></script-panel>\n      <movie-panel :show="option.mode == \'movie\'"></movie-panel>\n    </div>\n    <fast-button icon large @tap="menu = !menu;" style="position:absolute;right:1em;top:1em">\n      <v-icon large>menu</v-icon>\n    </fast-button>\n    <fast-button v-show="option.mode == \'play\' && !option.keyboard" icon large @tap="option.keyboard = !option.keyboard;" style="position:absolute;right:1em;bottom:1em">\n      <v-icon large>keyboard</v-icon>\n    </fast-button>\n  </div>\n  <app-menu v-model="menu"></app-menu>\n</v-app>'},function(e,t,i){e.exports=i(3)(42)},function(e,t,i){e.exports=i(3)(13)},function(e,t,i){e.exports=i(3)(16)},function(e,t){e.exports='<v-btn @click.native.stop.prevent="$emit(\'tap\')" @touchstart.native.stop.prevent @touchend.native.stop.prevent="$emit(\'tap\')" :ripple="ripple" :flat="flat" :block="block" :icon="icon" :large="large" :outline="outline" :color="color" :fixed="fixed" :top="top" :bottom="bottom" :left="left" :right="right" :disabled="disabled">\n  <slot></slot>\n</v-btn>'},function(e,t,i){"use strict";i.r(t);var n,s=i(2),a=i(1),o=i(0);class r extends o.Geometry{constructor(e,t){super();let i=e/2,n=i-t,s=[[-n,+n,+i],[+n,+n,+i],[+n,-n,+i],[-n,-n,+i],[-n,+i,-n],[+n,+i,-n],[+n,+i,+n],[-n,+i,+n],[-i,-n,-n],[-i,+n,-n],[-i,+n,+n],[-i,-n,+n],[+n,+n,-i],[-n,+n,-i],[-n,-n,-i],[+n,-n,-i],[-n,-i,+n],[+n,-i,+n],[+n,-i,-n],[-n,-i,-n],[+i,+n,+n],[+i,+n,-n],[+i,-n,-n],[+i,-n,+n]];for(let e=0;e<s.length;e++){let t=s[e];this.vertices.push(new o.Vector3(t[0],t[1],t[2]))}for(let e=0;e<r._INDICES.length;e++){let t=r._INDICES[e],i=new o.Face3(t[0],t[1],t[2]);this.faces.push(i)}}}r._INDICES=[[1,6,7],[0,1,7],[3,0,10],[11,3,10],[17,2,3],[16,17,3],[23,20,1],[2,23,1],[5,12,13],[4,5,13],[9,13,14],[8,9,14],[22,15,12],[21,22,12],[19,14,15],[18,19,15],[7,4,9],[10,7,9],[11,8,19],[16,11,19],[23,17,18],[22,23,18],[20,21,5],[6,20,5],[20,6,1],[10,0,7],[21,12,5],[13,9,4],[23,2,17],[11,16,3],[22,18,15],[8,14,19]];!function(e){e[e.L=0]="L",e[e.R=1]="R",e[e.D=2]="D",e[e.U=3]="U",e[e.B=4]="B",e[e.F=5]="F"}(n||(n={}));class h extends o.Group{constructor(e){super(),this._vector=new o.Vector3,this._stickers=[],this._edges=[],this._quaternion=new o.Quaternion,this.initial=e;let t=e%3-1,i=Math.floor(e%9/3)-1,s=Math.floor(e/9)-1;this.vector=new o.Vector3(t,i,s),this._materials=[this._vector.x<0?h._MATERIALS.o:h._MATERIALS.i,this._vector.x>0?h._MATERIALS.r:h._MATERIALS.i,this._vector.y<0?h._MATERIALS.w:h._MATERIALS.i,this._vector.y>0?h._MATERIALS.y:h._MATERIALS.i,this._vector.z<0?h._MATERIALS.g:h._MATERIALS.i,this._vector.z>0?h._MATERIALS.b:h._MATERIALS.i],this._frame=new o.Mesh(h._FRAME,h._MATERIALS.p),this.add(this._frame);for(let e=0;e<6;e++){let t=new o.Mesh(h._EDGE,h._MATERIALS.p),i=new o.Mesh(h._STICKER,this._materials[e]);switch(e){case n.L:t.rotation.y=-Math.PI/2,t.position.x=-h.SIZE/2,i.rotation.y=-Math.PI/2,i.position.x=-h.SIZE/2,i.name="L";break;case n.R:t.rotation.y=Math.PI/2,t.position.x=h.SIZE/2,i.rotation.y=Math.PI/2,i.position.x=h.SIZE/2,i.name="R";break;case n.D:t.rotation.x=Math.PI/2,t.position.y=-h.SIZE/2,i.rotation.x=Math.PI/2,i.position.y=-h.SIZE/2,i.name="D";break;case n.U:t.rotation.x=-Math.PI/2,t.position.y=h.SIZE/2,i.rotation.x=-Math.PI/2,i.position.y=h.SIZE/2,i.name="U";break;case n.B:t.rotation.x=Math.PI,t.position.z=-h.SIZE/2,i.rotation.x=Math.PI,i.position.z=-h.SIZE/2,i.name="B";break;case n.F:t.rotation.z=0,t.position.z=h.SIZE/2,i.rotation.x=2*Math.PI,i.position.z=h.SIZE/2,i.name="F"}if(this.add(t),this._edges.push(t),this.add(i),this._stickers.push(i),13==this.initial){this.children=[];let e,t=new o.CylinderGeometry(h.SIZE/6,h.SIZE/6,h.SIZE,16),i=new o.MeshNormalMaterial;(e=new o.Mesh(t,i)).rotation.x=Math.PI/2,this.add(e),(e=new o.Mesh(t,i)).rotation.y=Math.PI/2,this.add(e),(e=new o.Mesh(t,i)).rotation.z=Math.PI/2,this.add(e),e=new o.Mesh(new o.SphereGeometry(h.SIZE/3.2,16,16),i),this.add(e)}this.matrixAutoUpdate=!1,this.updateMatrix()}}set vector(e){this._vector.set(Math.round(e.x),Math.round(e.y),Math.round(e.z)),this._index=9*(this.vector.z+1)+3*(this.vector.y+1)+(this.vector.x+1),this.position.x=h.SIZE*this._vector.x,this.position.y=h.SIZE*this._vector.y,this.position.z=h.SIZE*this._vector.z}get vector(){return this._vector}set index(e){let t=e%3-1,i=Math.floor(e%9/3)-1,n=Math.floor(e/9)-1;this.vector=new o.Vector3(t,i,n)}get index(){return this._index}getColor(e){let t=new o.Vector3(0,0,0);switch(e){case n.L:t.x=-1;break;case n.R:t.x=1;break;case n.D:t.y=-1;break;case n.U:t.y=1;break;case n.B:t.z=-1;break;case n.F:t.z=1}this._quaternion.copy(this.quaternion),t.applyQuaternion(this._quaternion.inverse());let i=Math.round(t.x),s=Math.round(t.y),a=Math.round(t.z),r=0;return i<0?r=n.L:i>0?r=n.R:s<0?r=n.D:s>0?r=n.U:a<0?r=n.B:a>0&&(r=n.F),r}stick(e){this._stickers[e].material=this._materials[e]}strip(e){this._stickers[e].material=h._MATERIALS.i}highlight(e){this._stickers[e].material=h._MATERIALS.h}show(){this.visible=!0}hide(){this.visible=!1}}h.SIZE=64,h._BORDER_WIDTH=3,h._EDGE_WIDTH=2,h._FRAME=new r(h.SIZE,h._BORDER_WIDTH),h._EDGE=new class extends o.ShapeGeometry{constructor(e,t){let i=new o.Shape;e/=2,i.moveTo(-e,-e),i.lineTo(-e,e),i.lineTo(e,e),i.lineTo(e,-e),i.closePath();let n=-(e-=t),s=e,a=-e,r=e,h=e/4,l=new o.Shape;l.moveTo(n,a+h),l.quadraticCurveTo(n,a,n+h,a),l.lineTo(r-h,a),l.quadraticCurveTo(r,a,r,a+h),l.lineTo(r,s-h),l.quadraticCurveTo(r,s,r-h,s),l.lineTo(n+h,s),l.quadraticCurveTo(n,s,n,s-h),l.lineTo(n,a+h),l.closePath(),i.holes.push(l),super(i)}}(h.SIZE-2*h._BORDER_WIDTH,h._EDGE_WIDTH),h._STICKER=new class extends o.ShapeGeometry{constructor(e,t){e/=2;let i=-(e-=t),n=e,s=-e,a=e,r=e/4,h=new o.Shape;h.moveTo(i,s+r),h.lineTo(i,n-r),h.quadraticCurveTo(i,n,i+r,n),h.lineTo(a-r,n),h.quadraticCurveTo(a,n,a,n-r),h.lineTo(a,s+r),h.quadraticCurveTo(a,s,a-r,s),h.lineTo(i+r,s),h.quadraticCurveTo(i,s,i,s+r),h.closePath(),super(h)}}(h.SIZE-2*h._BORDER_WIDTH,h._EDGE_WIDTH),h._MATERIALS={h:new o.MeshBasicMaterial({color:"#EA80FC"}),p:new o.MeshBasicMaterial({color:"#202020"}),i:new o.MeshBasicMaterial({color:"#808080"}),g:new o.MeshBasicMaterial({color:"#009D54"}),o:new o.MeshBasicMaterial({color:"#FF6C00"}),b:new o.MeshBasicMaterial({color:"#3D81F6"}),y:new o.MeshBasicMaterial({color:"#FDCC09"}),w:new o.MeshBasicMaterial({color:"#FFFFFF"}),r:new o.MeshBasicMaterial({color:"#DC422F"})};class l{constructor(e){this.queue=[],this._game=e}get length(){return this.queue.length}finish(){for(const e of this.queue)e.fast=!0;this._game.tweener.finish(),this.update()}twist(e,t=!1,i=1,n=null,s=!1){this.finish();let a=new c(e,t,i).parse();a.length>0&&(a[a.length-1].callback=n);for(let e of a)e.fast=s,this.queue.push(e);this.update()}update(){if(0===this.queue.length||this._game.lock)return!1;let e=this.queue.shift();return void 0!=e&&(this.start(e),!0)}start(e){if("-"==e.exp)return void this._game.tweener.tween(0,1,this._game.duration/2,e=>{},()=>{e.callback&&e.callback(),this.update()});if("#"==e.exp)return this._game.cube.reset(),this._game.dirty=!0,e.callback&&e.callback(),void this.update();if("*"==e.exp){this._game.cube.reset(),this._game.dirty=!0;let t=this._game.random(),i=new c(t).parse();i[i.length-1].callback=e.callback;for(let e of i)e.fast=!0,this.queue.unshift(e);return void this.update()}let t=-Math.PI/2;e.reverse&&(t=-t),e.times&&(t*=e.times);let i=d.GROUPS[e.exp];if(void 0!==i){if(i.hold(this._game),e.fast)return i.angle=t,i.adjust(this._game),e.callback&&e.callback(),void this.update();{let n=this._game.duration*Math.min(1,Math.abs(t)/Math.PI);this._game.tweener.tween(i.angle,i.angle+t,n,e=>{i.angle=e,this._game.dirty=!0},()=>{i.adjust(this._game),e.callback&&e.callback(),this.update()})}}else this.update()}}class p{constructor(){this.exp="",this.reverse=!1,this.times=1,this.fast=!1,this.callback=null}get format(){return this.fast?"":0==this.times?"":(this.exp.length>1?"(":"")+this.exp+(this.exp.length>1?")":"")+(this.reverse?"'":"")+(1==this.times?"":String(this.times))}}class c{constructor(e,t=!1,i=1){this._children=[],this._twist=new p;let n=e.replace(/[^\*#\-xyzbsfdeulmr\(\)'0123456789]/gi,"").match(/\([\*#\-xyzbsfdeulmr'\(\)\d]+\)('\d*|\d*'|\d*)|[\*#\-xyzbsfdeulmr]('\d*|\d*'|\d*)/gi);if(null!==n)if(1==n.length){var s=n[0].match(/^\((\S+)\)('?)(\d*)('?)$/i);if(null===s){if(null===(s=n[0].match(/(\([\*#\-xyzbsfdeulmr'\(\)\d]+\)|[\*#\-xyzbsfdeulmr])('?)(\d*)('?)/i)))return;this._twist.exp=s[1],/[XYZ]/.test(this._twist.exp)&&(this._twist.exp=this._twist.exp.toLowerCase()),/[mes]/.test(this._twist.exp)&&(this._twist.exp=this._twist.exp.toUpperCase())}else this._children.push(new c(s[1]));this._twist.reverse=1==(s[2]+s[4]).length,this._twist.times=0==s[3].length?1:parseInt(s[3]),this._twist.reverse=this._twist.reverse!==t,this._twist.times=this._twist.times*i}else{this._twist.exp=e,this._twist.reverse=t,this._twist.times=i;for(let e of n){var a=new c(e);this._children.push(a)}}}parse(e=!1){e=this._twist.reverse!==e;let t=[];if(0!==this._children.length)for(var i=0;i<this._twist.times;i++)for(var n=0;n<this._children.length;n++){var s=(e?this._children[this._children.length-n-1]:this._children[n]).parse(e);for(let e of s)t.push(e)}else if(""!=this._twist.exp){let i=new p;i.exp=this._twist.exp,i.reverse=e,i.times=this._twist.times,t.push(i)}return t}}class d extends o.Group{constructor(e,t,i){super(),this._cubelets=[],this.name=e,this.indices=t,this.axis=i,this.matrixAutoUpdate=!1,this.updateMatrix()}set angle(e){this.setRotationFromAxisAngle(this.axis,e),this._angle=e,this.updateMatrix()}get angle(){return this._angle}get exp(){let e=this._angle>0,t=Math.round(Math.abs(this._angle)/(Math.PI/2)),i=new p;return i.exp=this.name,i.times=t,i.reverse=e,i.format}hold(e){this._angle=0;for(let t of this.indices){let i=e.cube.cubelets[t];this._cubelets.push(i),e.cube.remove(i),this.add(i)}e.lock=!0}revert(e){let t=-this._angle;if(0===t){for(;;){let t=this._cubelets.pop();if(void 0===t)break;this.remove(t),e.cube.add(t),e.cube.cubelets[t.index]=t}this._angle=0,e.lock=!1,e.dirty=!0}else{var i=e.duration*Math.min(1,Math.abs(t)/Math.PI);i/=2,e.tweener.tween(this.angle,this.angle+t,i,t=>{this.angle=t,e.dirty=!0},()=>{this.revert(e)})}}adjust(e,t=this._angle){let i=(t=Math.round(t/(Math.PI/2))*(Math.PI/2))-this._angle;if(0===i){for(;;){let t=this._cubelets.pop();if(void 0===t)break;this.rotate(t),this.remove(t),e.cube.add(t),e.cube.cubelets[t.index]=t}e.lock=!1,e.dirty=!0,this._angle=0}else{var n=e.duration*Math.min(1,Math.abs(i)/Math.PI);e.tweener.tween(this.angle,this.angle+i,n,t=>{this.angle=t,e.dirty=!0},()=>{this.adjust(e,this.angle)})}}rotate(e){e.rotateOnWorldAxis(this.axis,this._angle),e.vector=e.vector.applyAxisAngle(this.axis,this._angle),e.updateMatrix()}}d.GROUPS={L:new d("L",[6,15,24,3,12,21,0,9,18],new o.Vector3(-1,0,0)),D:new d("D",[18,19,20,9,10,11,0,1,2],new o.Vector3(0,-1,0)),B:new d("B",[8,7,6,5,4,3,2,1,0],new o.Vector3(0,0,-1)),R:new d("R",[26,17,8,23,14,5,20,11,2],new o.Vector3(1,0,0)),U:new d("U",[6,7,8,15,16,17,24,25,26],new o.Vector3(0,1,0)),F:new d("F",[24,25,26,21,22,23,18,19,20],new o.Vector3(0,0,1)),l:new d("l",[0,3,6,9,12,15,18,21,24,1,4,7,10,13,16,19,22,25],new o.Vector3(-1,0,0)),d:new d("d",[0,1,2,9,10,11,18,19,20,3,4,5,12,13,14,21,22,23],new o.Vector3(0,-1,0)),b:new d("b",[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17],new o.Vector3(0,0,-1)),r:new d("r",[2,5,8,11,14,17,20,23,26,1,4,7,10,13,16,19,22,25],new o.Vector3(1,0,0)),u:new d("u",[6,7,8,15,16,17,24,25,26,3,4,5,12,13,14,21,22,23],new o.Vector3(0,1,0)),f:new d("f",[18,19,20,21,22,23,24,25,26,9,10,11,12,13,14,15,16,17],new o.Vector3(0,0,1)),M:new d("M",[1,4,7,10,13,16,19,22,25],new o.Vector3(-1,0,0)),E:new d("E",[3,4,5,12,13,14,21,22,23],new o.Vector3(0,-1,0)),S:new d("S",[9,10,11,12,13,14,15,16,17],new o.Vector3(0,0,1)),x:new d("x",[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26],new o.Vector3(1,0,0)),y:new d("y",[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26],new o.Vector3(0,1,0)),z:new d("z",[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26],new o.Vector3(0,0,1))};class g extends o.Group{constructor(){super(),this.cubelets=[],this._initial=[];for(var e=0;e<27;e++){let t=new h(e);this.cubelets.push(t),this._initial.push(t),this.add(t)}this.matrixAutoUpdate=!1,this.updateMatrix()}compare(e,t){return e.index-t.index}index(e){return this._initial[e].index}reset(){for(let e of this.cubelets)e.setRotationFromEuler(new o.Euler(0,0,0)),e.index=e.initial,e.updateMatrix();this.cubelets.sort(this.compare)}stick(e,t){this._initial[e].stick(t)}strip(e,t){this._initial[e].strip(t)}highlight(e,t){this._initial[e].highlight(t)}show(e){this._initial[e].show()}hide(e){this._initial[e].hide()}get state(){let e=[];for(let t of d.GROUPS.U.indices)e.push(this.cubelets[t].getColor(n.U));for(let t of d.GROUPS.R.indices)e.push(this.cubelets[t].getColor(n.R));for(let t of d.GROUPS.F.indices)e.push(this.cubelets[t].getColor(n.F));for(let t of d.GROUPS.D.indices)e.push(this.cubelets[t].getColor(n.D));for(let t of d.GROUPS.L.indices)e.push(this.cubelets[t].getColor(n.L));for(let t of d.GROUPS.B.indices)e.push(this.cubelets[t].getColor(n.B));return e.join("")}}class u{constructor(){this._tweens=[],this.loop()}loop(){requestAnimationFrame(this.loop.bind(this)),this.update()}tween(e,t,i,n,s){this._tweens.push(new m(e,t,i,n,s))}update(){if(0===this._tweens.length)return!1;for(var e=0;e<this._tweens.length;)if(this._tweens[e].update())e++;else{let t=this._tweens.splice(e,1);for(const e of t)e.finish()}return!0}finish(){let e=this._tweens.splice(0,this._tweens.length);for(const t of e)t.finish()}}class m{constructor(e,t,i,n,s){this._value=0,this._finished=!1,this._begin=e,this._end=t,this._duration=i,this._update=n,this._finish=s}finish(){this._finished||this._update(this._end),this._finish()}update(){this._value++;let e=this._value/this._duration;e=e>1?1:e;let t=1- --e*e;return this._update(this._begin+(this._end-this._begin)*t),1!=t||(this._finished=!0,!1)}}class R{}class f{constructor(e){this._dragging=!1,this._rotating=!1,this._angle=0,this.taps=[],this._onMouseDown=(e=>(this._down.x=e.offsetX,this._down.y=e.offsetY,this._handleDown(),e.returnValue=!1,!1)),this._onMouseMove=(e=>(this._move.x=e.offsetX,this._move.y=e.offsetY,this._handleMove(),e.returnValue=!1,!1)),this._onMouseUp=(e=>(this._handleUp(),e.returnValue=!1,!1)),this._onMouseOut=(e=>(this._handleUp(),e.returnValue=!1,!1)),this._onTouch=(e=>{let t=e.changedTouches[0];switch(e.type){case"touchstart":this._down.x=t.clientX,this._down.y=t.clientY,this._handleDown();break;case"touchmove":this._move.x=t.clientX,this._move.y=t.clientY,this._handleMove();break;case"touchend":this._handleUp();break;default:return}return e.returnValue=!1,!1}),this._game=e,this._ray=new o.Ray,this._down=new o.Vector2(0,0),this._move=new o.Vector2(0,0),this._matrix=new o.Matrix4,this._holder=new R,this._holder.vector=new o.Vector3,this._vector=new o.Vector3,this._planes=[new o.Plane(new o.Vector3(1,0,0),3*-h.SIZE/2),new o.Plane(new o.Vector3(0,1,0),3*-h.SIZE/2),new o.Plane(new o.Vector3(0,0,1),3*-h.SIZE/2)],this._game.canvas.addEventListener("mousedown",this._onMouseDown),this._game.canvas.addEventListener("mousemove",this._onMouseMove),this._game.canvas.addEventListener("mouseup",this._onMouseUp),this._game.canvas.addEventListener("mouseout",this._onMouseOut),this._game.canvas.addEventListener("touchstart",this._onTouch),this._game.canvas.addEventListener("touchmove",this._onTouch),this._game.canvas.addEventListener("touchend",this._onTouch),this.loop()}loop(){requestAnimationFrame(this.loop.bind(this)),this.update()}update(){if(!this._game.enable&&this._rotating&&this._group.angle!=this._angle){let e=(this._angle-this._group.angle)/2,t=Math.PI/this._game.duration*4;e>t&&(e=t),e<-t&&(e=-t),this._group.angle+=e,this._game.dirty=!0}}match(){let e,t=[];var i=this._holder.index;if(-1===this._holder.index)return 0===(e=d.GROUPS.x).axis.dot(this._holder.plane.normal)&&t.push(e),0===(e=d.GROUPS.y).axis.dot(this._holder.plane.normal)&&t.push(e),0===(e=d.GROUPS.z).axis.dot(this._holder.plane.normal)&&t.push(e),t;var n=i%3-1,s=Math.floor(i%9/3)-1,a=Math.floor(i/9)-1;switch(n){case-1:0===(e=d.GROUPS.L).axis.dot(this._holder.plane.normal)&&t.push(e);break;case 0:0===(e=d.GROUPS.M).axis.dot(this._holder.plane.normal)&&t.push(e);break;case 1:0===(e=d.GROUPS.R).axis.dot(this._holder.plane.normal)&&t.push(e)}switch(s){case-1:0===(e=d.GROUPS.D).axis.dot(this._holder.plane.normal)&&t.push(e);break;case 0:0===(e=d.GROUPS.E).axis.dot(this._holder.plane.normal)&&t.push(e);break;case 1:0===(e=d.GROUPS.U).axis.dot(this._holder.plane.normal)&&t.push(e)}switch(a){case-1:0===(e=d.GROUPS.B).axis.dot(this._holder.plane.normal)&&t.push(e);break;case 0:0===(e=d.GROUPS.S).axis.dot(this._holder.plane.normal)&&t.push(e);break;case 1:0===(e=d.GROUPS.F).axis.dot(this._holder.plane.normal)&&t.push(e)}return t}_intersect(e,t){var i=e.x/this._game.canvas.clientWidth*2-1,n=-e.y/this._game.canvas.clientHeight*2+1;this._ray.origin.setFromMatrixPosition(this._game.camera.matrixWorld),this._ray.direction.set(i,n,.5).unproject(this._game.camera).sub(this._ray.origin).normalize(),this._ray.applyMatrix4(this._matrix.identity().getInverse(this._game.scene.matrix));var s=new o.Vector3;return this._ray.intersectPlane(t,s),s}_handleDown(){if(this._game.enable&&this._game.twister.finish(),this._game.lock)return!0;this._dragging=!0,this._holder.index=-1,this._planes.some(e=>{var t=this._intersect(this._down,e);if(null!==t&&Math.abs(t.x)<=3*h.SIZE/2+.01&&Math.abs(t.y)<=3*h.SIZE/2+.01&&Math.abs(t.z)<=3*h.SIZE/2+.01){this._holder.plane=e;var i=Math.ceil(Math.round(t.x)/h.SIZE-.5),n=Math.ceil(Math.round(t.y)/h.SIZE-.5),s=Math.ceil(Math.round(t.z)/h.SIZE-.5);return this._holder.index=i<2&&i>-2&&n<2&&n>-2&&s<2&&s>-2?9*(s+1)+3*(n+1)+(i+1):-1,!0}return!1},this),this._game.dirty=!0}_handleMove(){if(this._dragging){var e=this._move.x-this._down.x,t=this._move.y-this._down.y,i=Math.sqrt(e*e+t*t);if(Math.min(this._game.canvas.clientWidth,this._game.canvas.clientHeight)/i>64)return!0;if(this._game.lock)return this._dragging=!1,this._rotating=!1,!0;if(this._dragging=!1,this._rotating=!0,-1!==this._holder.index&&this._game.enable){var n=this._intersect(this._down,this._holder.plane),s=this._intersect(this._move,this._holder.plane);this._vector.subVectors(s,n);var a=this._vector.x,r=this._vector.y,l=this._vector.z,p=Math.max(Math.abs(a),Math.abs(r),Math.abs(l));a=Math.abs(a)===p?a:0,r=Math.abs(r)===p?r:0,l=Math.abs(l)===p?l:0,this._vector.set(a,r,l),this._holder.vector.copy(this._vector.multiply(this._vector).normalize()),this.match().some(e=>0===e.axis.dot(this._vector)&&(this._group=e,!0),this),this._vector.crossVectors(this._holder.vector,this._holder.plane.normal),this._holder.vector.multiplyScalar(this._vector.x+this._vector.y+this._vector.z)}else if(e*e>t*t)this._group=d.GROUPS.y;else{let e=new o.Vector3(3*h.SIZE/2,0,3*h.SIZE/2);e.applyMatrix4(this._game.scene.matrix).project(this._game.camera);let t=this._game.canvas.clientWidth/2,i=Math.round(e.x*t+t);this._down.x<i?this._group=d.GROUPS.x:this._group=d.GROUPS.z}this._group.hold(this._game)}if(this._rotating){if(-1!==this._holder.index&&this._game.enable){n=this._intersect(this._down,this._holder.plane),s=this._intersect(this._move,this._holder.plane);this._vector.subVectors(s,n).multiply(this._holder.vector),this._angle=-(this._vector.x+this._vector.y+this._vector.z)*(this._group.axis.x+this._group.axis.y+this._group.axis.z)/h.SIZE*Math.PI/4}else{e=this._move.x-this._down.x,t=this._move.y-this._down.y;this._group===d.GROUPS.y?this._angle=e/h.SIZE*Math.PI/4:this._group===d.GROUPS.x?this._angle=t/h.SIZE*Math.PI/4:this._angle=-t/h.SIZE*Math.PI/4}if(this._game.enable)return this._angle=this._angle/Math.abs(this._angle)*Math.PI/2,void this._handleUp()}}_handleUp(){if(this._dragging){let e=null;switch(this._holder.plane){case this._planes[0]:e=n.R;break;case this._planes[1]:e=n.U;break;case this._planes[2]:e=n.F}for(let t of this.taps)t(this._holder.index,e)}this._rotating&&this._group&&null!==this._group&&(this._game.enable?this._group.adjust(this._game,this._angle):this._group.revert(this._game)),this._holder.index=-1,this._dragging=!1,this._rotating=!1,this._game.dirty=!0}}class v{constructor(){this.lock=!1,this.enable=!0,this.dirty=!0,this.duration=60,this.width=0,this.height=0,this.scale=1,this.scene=new o.Scene,this.scene.rotation.x=Math.PI/6,this.scene.rotation.y=-Math.PI/5,this.camera=new o.PerspectiveCamera(50,1,1,32*h.SIZE),this.camera.position.x=0,this.camera.position.y=0,this.camera.position.z=3*h.SIZE*4,this.tweener=new u,this.twister=new l(this),this.cube=new g,this.scene.add(this.cube);for(let e in d.GROUPS)this.scene.add(d.GROUPS[e]);this.renderer=new o.WebGLRenderer({antialias:!0,preserveDrawingBuffer:!0}),this.renderer.setClearColor(14737632),this.renderer.setPixelRatio(window.devicePixelRatio),this.canvas=this.renderer.domElement,this.controller=new f(this),this.loop()}resize(){this.camera.aspect=this.width/this.height;let e=this.height/Math.min(this.width,this.height)*h.SIZE/4,t=2*Math.atan(e/h.SIZE)*180/Math.PI;this.camera.fov=t*this.scale,this.camera.lookAt(this.scene.position),this.camera.updateProjectionMatrix(),this.renderer.setSize(this.width,this.height,!0),this.dirty=!0}render(){this.dirty&&(this.renderer.render(this.scene,this.camera),this.dirty=!1)}loop(){requestAnimationFrame(this.loop.bind(this)),this.render()}random(){let e="",t=[],i=-1,n=["U","D","R","L","F","B"],s=-1;for(let e=0;e<24;e++){let e=[];for(;s==i;)s=Math.floor(3*Math.random());let a=Math.floor(2*Math.random());e.push(n[2*s+a]);let o=Math.random();o<.2?e.push("2"):o<.6&&e.push("'"),t.push(e.join("")),i=s}return e=t.join(" ")}}class x{constructor(e){this._mode="",this._keyboard=!1,this._size=0,this._speed=0,this._storage=window.localStorage,this._game=e,this.mode=this._storage.getItem("option.mode")||"play",this.keyboard="true"==this._storage.getItem("option.keyboard"),this.speed=Number(this._storage.getItem("option.speed")||0),this.size=Number(this._storage.getItem("option.size")||0)}get mode(){return this._mode}set mode(e){this._mode=e,this._storage.setItem("option.mode",e),this._game.enable="play"==this.mode||"movie"==this.mode}get keyboard(){return this._keyboard}set keyboard(e){this._keyboard=e,this._storage.setItem("option.keyboard",String(e))}get size(){return this._size}set size(e){e<-4&&(e=-4),e>4&&(e=4),this._size=e,this._storage.setItem("option.size",String(e)),this._game.scale=Math.pow(2,-this.size/8),this._game.resize()}get speed(){return this._speed}set speed(e){e<-4&&(e=-4),e>4&&(e=4),this._speed=e,this._storage.setItem("option.speed",String(e)),this._game.duration=50-10*this.speed}}var y=function(e,t,i,n){var s,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(o=(a<3?s(o):a>3?s(t,i,o):s(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},U=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let _=class extends s.default{constructor(){super(...arguments),this.layers=0,this.operations=[["L","D","B","F","U","R","L'","D'","B'","F'","U'","R'"],["M","E","S'","S","E'","M'","M'","E'","S","S'","E","M"],["l","d","b","f","u","r","l'","d'","b'","f'","u'","r'"],["x'","y'","z'","z","y","x","x","y","z","z'","y'","x'"]]}get exps(){return this.operations[this.layers]}twist(e){this.game.twister.twist(e),this.layers=0}};y([Object(a.Inject)("game"),U("design:type",v)],_.prototype,"game",void 0),y([Object(a.Inject)("option"),U("design:type",x)],_.prototype,"option",void 0),y([Object(a.Prop)({default:!1}),U("design:type",Boolean)],_.prototype,"show",void 0);var w=_=y([Object(a.Component)({template:i(5)})],_),b=function(e,t,i,n){var s,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(o=(a<3?s(o):a>3?s(t,i,o):s(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},F=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let L=class extends s.default{constructor(){super(...arguments),this.scripts=i(6),this.progress=0,this.playing=!1,this.type=Number(window.localStorage.getItem("script.type")||0),this.index=Number(window.localStorage.getItem("script.index")||1),this.timeoutTask=0,this.intervalTask=0,this.exp="",this.actions=new c(this.exp).parse()}onShowChange(e=this.show,t=this.show){e?(this.onTypeChange(),this.onIndexChange(),this.onScriptChange(),this.onExpChange(this.exp),this.$nextTick(this.strip)):(this.playing=!1,t&&this.stick())}mounted(){this.onShowChange()}play(){if(this.progress==this.actions.length&&(this.playing=!1),this.playing){let e=this.actions[this.progress];this.progress++,this.game.twister.twist(e.exp,e.reverse,e.times,this.play,!1)}}forward(){if(this.progress==this.actions.length)return;this.playing=!1;let e=this.actions[this.progress];this.progress++,this.game.twister.twist(e.exp,e.reverse,e.times)}backward(){if(0==this.progress)return;this.playing=!1,this.progress--;let e=this.actions[this.progress];this.game.twister.twist(e.exp,!e.reverse,e.times)}stick(){for(let e=0;e<27;e++)for(let t=0;t<6;t++)this.game.cube.stick(e,t);this.game.dirty=!0}strip(){this.stick();let e=this.scripts[this.type].strips;for(let t of e)for(let e of t.indexes)for(let i of t.faces)this.game.cube.strip(e,i);this.game.dirty=!0}onIndexChange(){let e=this.scripts[this.type].scripts.length;for(this.index;this.index<1;)this.index=this.index+e;for(;this.index>e;)this.index=this.index-e;window.localStorage.setItem("script.index",String(this.index))}onTypeChange(e=this.type,t=this.type){window.localStorage.setItem("script.type",String(this.type)),e!=t&&(this.index=1),this.strip()}get script(){let e=this.scripts[this.type].scripts[this.index-1],t={name:"",exp:""};return t.name=e.name,t.exp=e.exp,t}indexDown(e){return clearTimeout(this.timeoutTask),this.timeoutTask=setTimeout(()=>{this.timeoutTask=0,clearTimeout(this.intervalTask),this.intervalTask=setInterval(()=>{this.index=this.index+e},100)},500),!0}indexUp(e){return 0!=this.timeoutTask&&(clearTimeout(this.timeoutTask),this.index=this.index+e,this.timeoutTask=0),0!=this.intervalTask&&(clearInterval(this.intervalTask),this.intervalTask=0),!0}onExpChange(e){this.playing=!1;let t=window.localStorage,i=t.getItem(this.script.name);e==this.script.exp?t.removeItem(this.script.name):e!=i&&t.setItem(this.script.name,e),this.actions=new c(this.exp).parse(),this.$nextTick(this.init)}onScriptChange(){this.playing=!1;let e=window.localStorage;this.exp=e.getItem(this.script.name)||this.script.exp}toggle(){this.playing?this.playing=!1:(this.playing=!this.playing,this.play())}init(){this.progress=0,this.playing=!1,this.game.twister.twist("#"),this.game.twister.twist(this.exp,!0,1,null,!0)}};b([Object(a.Inject)("game"),F("design:type",v)],L.prototype,"game",void 0),b([Object(a.Inject)("option"),F("design:type",x)],L.prototype,"option",void 0),b([Object(a.Prop)({default:!1}),F("design:type",Boolean)],L.prototype,"show",void 0),b([Object(a.Watch)("show"),F("design:type",Function),F("design:paramtypes",[Boolean,Boolean]),F("design:returntype",void 0)],L.prototype,"onShowChange",null),b([Object(a.Watch)("index"),F("design:type",Function),F("design:paramtypes",[]),F("design:returntype",void 0)],L.prototype,"onIndexChange",null),b([Object(a.Watch)("type"),F("design:type",Function),F("design:paramtypes",[Number,Number]),F("design:returntype",void 0)],L.prototype,"onTypeChange",null),b([Object(a.Watch)("exp"),F("design:type",Function),F("design:paramtypes",[String]),F("design:returntype",void 0)],L.prototype,"onExpChange",null),b([Object(a.Watch)("script"),F("design:type",Function),F("design:paramtypes",[]),F("design:returntype",void 0)],L.prototype,"onScriptChange",null);var D=L=b([Object(a.Component)({template:i(7)})],L),B=function(e,t,i,n){var s,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(o=(a<3?s(o):a>3?s(t,i,o):s(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},E=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let A=class extends s.default{onValueChange(e){this.$emit("input",e)}demo(){this.game.twister.twist("UU'")}};B([Object(a.Inject)("game"),E("design:type",v)],A.prototype,"game",void 0),B([Object(a.Inject)("option"),E("design:type",x)],A.prototype,"option",void 0),B([Object(a.Prop)({default:"100%"}),E("design:type",String)],A.prototype,"width",void 0),B([Object(a.Prop)({required:!0}),E("design:type",Boolean)],A.prototype,"value",void 0),B([Object(a.Watch)("value"),E("design:type",Function),E("design:paramtypes",[Boolean]),E("design:returntype",void 0)],A.prototype,"onValueChange",null);var C=A=B([Object(a.Component)({template:i(8)})],A),O=function(e,t,i,n){var s,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(o=(a<3?s(o):a>3?s(t,i,o):s(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},M=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let S=class extends s.default{constructor(){super(...arguments),this.tune=!1,this.data=!1}onValueChange(e){this.$emit("input",e)}mode(e){this.option.mode=e,this.$emit("input",!1)}reset(){window.localStorage.clear(),window.location.reload()}};O([Object(a.Inject)("game"),M("design:type",v)],S.prototype,"game",void 0),O([Object(a.Inject)("option"),M("design:type",x)],S.prototype,"option",void 0),O([Object(a.Prop)({required:!0}),M("design:type",Boolean)],S.prototype,"value",void 0),O([Object(a.Watch)("value"),M("design:type",Function),M("design:paramtypes",[Boolean]),M("design:returntype",void 0)],S.prototype,"onValueChange",null);var I=S=O([Object(a.Component)({template:i(9),components:{"tune-menu":C}})],S);class k{constructor(e,t,i){this.idx=e,this.len=t,this.type=i}}function P(e,t){let i=8,n=null;for(;i<e.length;){let s=e.slice(i,i+4),a=e.slice(i+4,i+8),o=Z(s),r=G(a);if(r===t)return n=new k(i,o,r);i+=8+o+4}return n}function j(e,t){let i=8,n=null,s=[];for(;i<e.length;){let a=e.slice(i,i+4),o=e.slice(i+4,i+8),r=Z(a),h=G(o);h===t&&(n=new k(i,r,h),s.push(n)),i+=8+r+4}return s}function T(e,t){let i=new Uint8Array(e.length+t.length);return i.set(e),i.set(t,e.length),i}function z(e){let t=new Uint8Array(4);return t[0]=e.charCodeAt(0),t[1]=e.charCodeAt(1),t[2]=e.charCodeAt(2),t[3]=e.charCodeAt(3),t}function G(e){return String.fromCharCode(e[0])+String.fromCharCode(e[1])+String.fromCharCode(e[2])+String.fromCharCode(e[3])}function V(e){let t=e,i=new Uint8Array([0,0,0,0]);for(let e=0;e<i.length;e++){let n=255&t;i[e]=n,t=(t-n)/256}return i.reverse()}function Z(e){return(e[0]<<24)+(e[1]<<12)+(e[2]<<8)+e[3]}function q(e){let t=e,i=new Uint8Array([0,0]);for(let e=0;e<i.length;e++){let n=255&t;i[e]=n,t=(t-n)/256}return i.reverse()}let W="00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D".split(" ").map(function(e){return parseInt(e,16)});function $(e){let t=-1;for(let i=0;i<e.length;i++)t=t>>>8^W[255&(t^e[i])];return(-1^t)>>>0}var H=function(e,t,i,n){var s,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(o=(a<3?s(o):a>3?s(t,i,o):s(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},N=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let J=class extends s.default{constructor(){super(...arguments),this.scene=window.localStorage.getItem("movie.scene")||"",this.action=window.localStorage.getItem("movie.action")||"",this.operate=0,this.playing=!1,this.encoder=new class{constructor(e){this.repeat=0,this.delay_num=1,this.delay_den=60,this.dispose=0,this.blend=1,this._frames=-1,this._seq=-1,this.encoding=!1,this._canvas=e}start(){return this.encoding=!0,this.data=new Uint8Array(0),this._frames=-1,this._seq=-1,0}addFrame(){if(null===this._canvas||!this.encoding||null===this.data)throw new Error;this._frames+=1;let e,t=function(e){let t=atob(e),i=t.length,n=new Uint8Array(i);for(let e=0;e<i;++e)n[e]=t.charCodeAt(e);return n}(this._canvas.toDataURL("image/png").replace(/^data:image\/png;base64,/,""));if(0==this._frames){let e=new Uint8Array([137,80,78,71,13,10,26,10]);this.data=T(this.data,e);let i=P(t,"IHDR");if(null==i)throw new Error;let n=t.slice(i.idx,i.idx+12+i.len);this.data=T(this.data,n);let s=new Uint8Array(0);s=T(s=T(s=T(s=T(s=T(s,new Uint8Array([0,0,0,8])),z("acTL")),new Uint8Array([0,0,0,1])),V(this.repeat)),V($(s.slice(4,16)))),this.data=T(this.data,s);let a=j(t,"IDAT");for(let e=0;e<a.length;e++){if(0==e){this._seq+=1;let e=new Uint8Array(0);e=T(e=T(e=T(e=T(e=T(e=T(e=T(e=T(e=T(e=T(e=T(e=T(e,V(26)),z("fcTL")),V(this._seq)),V(this._canvas.width)),V(this._canvas.height)),V(0)),V(0)),q(this.delay_num)),q(this.delay_den)),new Uint8Array([this.dispose])),new Uint8Array([this.blend])),V($(e.slice(4,34)))),this.data=T(this.data,e)}i=a[e];let n=t.slice(i.idx,i.idx+12+i.len);this.data=T(this.data,n)}}if(this._frames>0){let i=j(t,"IDAT");for(let n=0;n<i.length;n++){if(0==n){this._seq+=1;let e=new Uint8Array(0);e=T(e=T(e=T(e=T(e=T(e=T(e=T(e=T(e=T(e=T(e=T(e=T(e,V(26)),z("fcTL")),V(this._seq)),V(this._canvas.width)),V(this._canvas.height)),V(0)),V(0)),q(this.delay_num)),q(this.delay_den)),new Uint8Array([this.dispose])),new Uint8Array([this.blend])),V($(e.slice(4,34)))),this.data=T(this.data,e)}e=i[n];let s=t.slice(e.idx+8,e.idx+8+e.len),a=e.len+4;this._seq+=1;let o=new Uint8Array(0);o=T(o=T(o=T(o=T(o=T(o,V(a)),z("fdAT")),V(this._seq)),s),V($(o.slice(4,8+a)))),this.data=T(this.data,o)}}return 0}finish(){if(!this.encoding)throw new Error;let e=new Uint8Array([0,0,0,0,73,69,78,68,174,66,96,130]);this.data=T(this.data,e);let t=P(this.data,"acTL");if(null==t)throw new Error;let i=V(this._frames+1);this.data[t.idx+8]=i[0],this.data[t.idx+8+1]=i[1],this.data[t.idx+8+2]=i[2],this.data[t.idx+8+3]=i[3];let n=V($(this.data.slice(t.idx+4,t.idx+4+4+8)));return this.data[t.idx+4+4+8]=n[0],this.data[t.idx+4+4+8+1]=n[1],this.data[t.idx+4+4+8+2]=n[2],this.data[t.idx+4+4+8+3]=n[3],this.encoding=!1,this.data}}(this.game.canvas),this.recording=!1,this.link="",this.dialog=!1,this.strips=JSON.parse(window.localStorage.getItem("movie.strips")||"[]"),this.highlights=JSON.parse(window.localStorage.getItem("movie.highlights")||"[]"),this.hides=JSON.parse(window.localStorage.getItem("movie.hides")||"[]")}mounted(){let e=decodeURI(window.location.search.toString().substr(1)).replace(/\+/gi,'"');if(e.length>0)try{let t=JSON.parse(e);null!=t.movie&&(this.scene=t.movie.scene||"",this.action=t.movie.action||"",this.strips=t.movie.strips||[],this.highlights=t.movie.highlights||[],this.hides=t.movie.hides||[],this.option.mode="movie",window.location.href=window.location.origin+window.location.pathname,console.log(window.location.href))}catch(e){}this.loop(),this.game.controller.taps.push(this.tap),this.onShowChange(this.show)}onShowChange(e=this.show,t=this.show){if(e)this.init();else if(this.playing=!1,t){for(let e=0;e<27;e++){this.game.cube.cubelets[e].show();for(let t=0;t<6;t++)this.game.cube.stick(e,t)}this.game.dirty=!0}}onSceneChange(){window.localStorage.setItem("movie.scene",this.scene),this.init()}onActionChange(){window.localStorage.setItem("movie.action",this.action)}init(){for(let e=0;e<27;e++){this.hides.indexOf(e)<0?this.game.cube.show(e):this.game.cube.hide(e);for(let t=0;t<6;t++){let i=6*e+t;this.highlights.indexOf(i)>=0?this.game.cube.highlight(e,t):this.strips.indexOf(i)>=0?this.game.cube.strip(e,t):this.game.cube.stick(e,t)}}this.playing=!1,this.game.twister.twist("#"),this.game.twister.twist(this.scene,!1,1,null,!0)}reset(){this.hides=[],this.strips=[],this.highlights=[],this.init(),this.game.dirty=!0}play(){this.playing&&(this.init(),this.playing=!0,this.game.twister.twist("-"+this.action+"-",!1,1,this.play,!1))}toggle(){this.playing?this.init():(this.playing=!0,this.play())}snap(){let e=this.game.canvas.toDataURL("image/png").split(";base64,"),t=e[0].split(":")[1],i=window.atob(e[1]),n=i.length,s=new Uint8Array(n);for(let e=0;e<n;++e)s[e]=i.charCodeAt(e);let a=new Blob([s],{type:t}),o=document.createElement("a"),r=document.createEvent("MouseEvents");r.initEvent("click",!1,!1),o.download="cuber.png",o.href=URL.createObjectURL(a),o.dispatchEvent(r)}loop(){requestAnimationFrame(this.loop.bind(this)),this.record()}record(){this.recording&&this.encoder.addFrame()}save(){if(!this.recording)return;this.recording=!1;let e=this.option.speed;this.option.speed=e;let t=this.encoder.finish(),i=new Blob([new Uint8Array(t)],{type:"image/png"}),n=document.createElement("a"),s=document.createEvent("MouseEvents");s.initEvent("click",!1,!1),n.download="cuber.png",n.href=URL.createObjectURL(i),n.dispatchEvent(s)}film(){this.game.duration=60,this.init(),this.playing=!0,this.recording=!0,this.encoder.start(),this.encoder.addFrame(),this.game.twister.twist("-"+this.action+"-",!1,1,this.save,!1)}share(){let e=JSON.stringify({movie:{scene:this.scene,action:this.action,strips:this.strips,highlights:this.highlights,hides:this.hides}});console.log(e.replace(/"/gi,"+")),this.link=window.location.origin+window.location.pathname+"?"+encodeURI(e.replace(/"/gi,"+")),this.dialog=!0}onStripsChange(){window.localStorage.setItem("movie.strips",JSON.stringify(this.strips))}onHighlightsChange(){window.localStorage.setItem("movie.highlights",JSON.stringify(this.highlights))}onHidesChange(){window.localStorage.setItem("movie.hides",JSON.stringify(this.hides))}tap(e,t){if(!this.show)return;if(e<0)return;let i=this.game.cube.cubelets[e],n=6*(e=i.initial)+(t=i.getColor(t)),s=0;switch(this.operate){case 0:(s=this.strips.indexOf(n))<0?(i.strip(t),this.strips.push(n),(s=this.highlights.indexOf(n))>=0&&this.highlights.splice(s,1)):(i.stick(t),this.strips.splice(s,1));break;case 1:(s=this.highlights.indexOf(n))<0?(i.highlight(t),this.highlights.push(n),(s=this.strips.indexOf(n))>=0&&this.strips.splice(s,1)):(i.stick(t),this.highlights.splice(s,1));break;case 2:(s=this.hides.indexOf(e))<0?(i.hide(),this.hides.push(e)):(i.show(),this.hides.splice(s,1))}}};H([Object(a.Inject)("game"),N("design:type",v)],J.prototype,"game",void 0),H([Object(a.Inject)("option"),N("design:type",x)],J.prototype,"option",void 0),H([Object(a.Prop)({default:!1}),N("design:type",Boolean)],J.prototype,"show",void 0),H([Object(a.Watch)("show"),N("design:type",Function),N("design:paramtypes",[Boolean,Boolean]),N("design:returntype",void 0)],J.prototype,"onShowChange",null),H([Object(a.Watch)("scene"),N("design:type",Function),N("design:paramtypes",[]),N("design:returntype",void 0)],J.prototype,"onSceneChange",null),H([Object(a.Watch)("action"),N("design:type",Function),N("design:paramtypes",[]),N("design:returntype",void 0)],J.prototype,"onActionChange",null),H([Object(a.Watch)("strips"),N("design:type",Function),N("design:paramtypes",[]),N("design:returntype",void 0)],J.prototype,"onStripsChange",null),H([Object(a.Watch)("highlights"),N("design:type",Function),N("design:paramtypes",[]),N("design:returntype",void 0)],J.prototype,"onHighlightsChange",null),H([Object(a.Watch)("hides"),N("design:type",Function),N("design:paramtypes",[]),N("design:returntype",void 0)],J.prototype,"onHidesChange",null);var Y=J=H([Object(a.Component)({template:i(10)})],J),X=function(e,t,i,n){var s,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(o=(a<3?s(o):a>3?s(t,i,o):s(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},K=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let Q=class extends s.default{constructor(){super(...arguments),this.game=new v,this.option=new x(this.game),this.menu=!1,this.width="100%"}resize(){let e=this.$el;if(window.innerWidth>window.innerHeight/(4/3)){if("100%"==this.width)return this.width=window.innerHeight/(16/9)+"px",e.style.width=this.width,void this.$nextTick(this.resize)}else if("100%"!=this.width)return this.width="100%",e.style.width=this.width,void this.$nextTick(this.resize);if(this.$refs.cuber instanceof HTMLElement&&this.$refs.panel instanceof HTMLElement){let e=this.$refs.cuber,t=this.$refs.panel.clientHeight,i=window.innerHeight-t;this.game.width=e.clientWidth,this.game.height=i,this.game.resize()}}mounted(){if(this.$refs.cuber instanceof Element){this.$refs.cuber.appendChild(this.game.canvas),this.resize()}}onModeChange(e,t){this.$nextTick(this.resize)}onKeyboardChange(e,t){this.$nextTick(this.resize)}};X([Object(a.Provide)("game"),K("design:type",v)],Q.prototype,"game",void 0),X([Object(a.Provide)("option"),K("design:type",x)],Q.prototype,"option",void 0),X([Object(a.Watch)("option.mode"),K("design:type",Function),K("design:paramtypes",[String,String]),K("design:returntype",void 0)],Q.prototype,"onModeChange",null),X([Object(a.Watch)("option.keyboard"),K("design:type",Function),K("design:paramtypes",[String,String]),K("design:returntype",void 0)],Q.prototype,"onKeyboardChange",null);var ee=Q=X([Object(a.Component)({template:i(11),components:{"keyboard-panel":w,"script-panel":D,"movie-panel":Y,"app-menu":I}})],Q),te=i(4),ie=i.n(te),ne=(i(12),i(13),i(14),function(e,t,i,n){var s,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(o=(a<3?s(o):a>3?s(t,i,o):s(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o}),se=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let ae=class extends s.default{};ne([Object(a.Prop)({default:!1}),se("design:type",Boolean)],ae.prototype,"disabled",void 0),ne([Object(a.Prop)({default:!1}),se("design:type",Boolean)],ae.prototype,"ripple",void 0),ne([Object(a.Prop)({default:!1}),se("design:type",Boolean)],ae.prototype,"flat",void 0),ne([Object(a.Prop)({default:!1}),se("design:type",Boolean)],ae.prototype,"block",void 0),ne([Object(a.Prop)({default:!1}),se("design:type",Boolean)],ae.prototype,"icon",void 0),ne([Object(a.Prop)({default:!1}),se("design:type",Boolean)],ae.prototype,"large",void 0),ne([Object(a.Prop)({default:!1}),se("design:type",Boolean)],ae.prototype,"outline",void 0),ne([Object(a.Prop)({default:!1}),se("design:type",String)],ae.prototype,"color",void 0),ne([Object(a.Prop)({default:!1}),se("design:type",Boolean)],ae.prototype,"fixed",void 0),ne([Object(a.Prop)({default:!1}),se("design:type",Boolean)],ae.prototype,"top",void 0),ne([Object(a.Prop)({default:!1}),se("design:type",Boolean)],ae.prototype,"bottom",void 0),ne([Object(a.Prop)({default:!1}),se("design:type",Boolean)],ae.prototype,"left",void 0),ne([Object(a.Prop)({default:!1}),se("design:type",Boolean)],ae.prototype,"right",void 0);var oe=ae=ne([Object(a.Component)({template:i(15)})],ae);s.default.use(ie.a),s.default.component("fast-button",oe),new s.default({el:"#app",render:e=>e(ee)})}]);