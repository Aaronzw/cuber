!function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/dist/",i(i.s=14)}([function(e,t,i){e.exports=i(3)(7)},function(e,t,i){e.exports=i(3)(11)},function(e,t,i){e.exports=i(3)(1)},function(e,t){e.exports=dll_library},function(e,t,i){e.exports=function(){return i(8)('!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=1)}([function(t,e,n){(function(t){(function(){var e,n,r,o,i,s,u,h,l,c,f,p,a,v,m,F,R,y,U,g,d,D,w,b,B,L,M,T,S,O,P,x,E,C,j,J;U=(E=[0,1,2,3,4,5])[0],y=E[1],v=E[2],i=E[3],R=E[4],e=E[5],M=(C=[0,1,2,3,4,5,6,7])[0],w=C[1],B=C[2],d=C[3],l=C[4],f=C[5],u=C[6],a=C[7],L=(j=[0,1,2,3,4,5,6,7,8,9,10,11])[0],D=j[1],b=j[2],g=j[3],p=j[4],h=j[5],c=j[6],s=j[7],F=j[8],m=j[9],n=j[10],r=j[11],(J=function(){var t,e,n,r,o,i;return o=function(t){return i(9)+t},n=function(t){return o(9)+t},e=function(t){return n(9)+t},r=function(t){return e(9)+t},t=function(t){return r(9)+t},[[4,13,22,31,40,49],[[(i=function(t){return t-1})(9),o(1),n(3)],[i(7),n(1),r(3)],[i(1),r(1),t(3)],[i(3),t(1),o(3)],[e(3),n(9),o(7)],[e(1),r(9),n(7)],[e(7),t(9),r(7)],[e(9),o(9),t(7)]],[[i(6),o(2)],[i(8),n(2)],[i(4),r(2)],[i(2),t(2)],[e(6),o(8)],[e(2),n(8)],[e(4),r(8)],[e(8),t(8)],[n(6),o(4)],[n(4),r(6)],[t(6),r(4)],[t(4),o(6)]]]}())[0],O=J[1],x=J[2],T=["U","R","F","D","L","B"],S=[["U","R","F"],["U","F","L"],["U","L","B"],["U","B","R"],["D","F","R"],["D","L","F"],["D","B","L"],["D","R","B"]],P=[["U","R"],["U","F"],["U","L"],["U","B"],["D","R"],["D","F"],["D","L"],["D","B"],["F","R"],["F","L"],["B","L"],["B","R"]],o=function(){var t,o,E;function C(t){null!=t?this.init(t):this.identity(),this.newCenter=function(){var t,e;for(e=[],t=0;t<=5;++t)e.push(0);return e}(),this.newCp=function(){var t,e;for(e=[],t=0;t<=7;++t)e.push(0);return e}(),this.newEp=function(){var t,e;for(e=[],t=0;t<=11;++t)e.push(0);return e}(),this.newCo=function(){var t,e;for(e=[],t=0;t<=7;++t)e.push(0);return e}(),this.newEo=function(){var t,e;for(e=[],t=0;t<=11;++t)e.push(0);return e}()}return C.prototype.init=function(t){return this.center=t.center.slice(0),this.co=t.co.slice(0),this.ep=t.ep.slice(0),this.cp=t.cp.slice(0),this.eo=t.eo.slice(0)},C.prototype.identity=function(){return this.center=[0,1,2,3,4,5],this.cp=[0,1,2,3,4,5,6,7],this.co=function(){var t,e;for(e=[],t=0;t<=7;++t)e.push(0);return e}(),this.ep=[0,1,2,3,4,5,6,7,8,9,10,11],this.eo=function(){var t,e;for(e=[],t=0;t<=11;++t)e.push(0);return e}()},C.prototype.toJSON=function(){return{center:this.center,cp:this.cp,co:this.co,ep:this.ep,eo:this.eo}},C.prototype.asString=function(){var t,e,n,r,o,i,s,u,h,l,c;for(c=[],n=r=0;r<=5;n=++r)c[9*n+4]=T[this.center[n]];for(n=o=0;o<=7;n=++o)for(t=this.cp[n],h=this.co[n],s=i=0;i<=2;s=++i)c[O[n][(s+h)%3]]=S[t][s];for(n=u=0;u<=11;n=++u)for(e=this.ep[n],h=this.eo[n],s=l=0;l<=1;s=++l)c[x[n][(s+h)%2]]=P[e][s];return c.join("")},C.fromString=function(t){var e,n,r,o,i,s,u,h,l,c,f,p,a,v;for(r=new C,o=s=0;s<=5;o=++s)for(i=u=0;u<=5;i=++u)t[9*o+4]===T[i]&&(r.center[o]=i);for(o=h=0;h<=7;o=++h){for(c=l=0;l<=2&&("U"!==(a=t[O[o][c]])&&"D"!==a);c=++l);for(e=t[O[o][(c+1)%3]],n=t[O[o][(c+2)%3]],i=f=0;f<=7;i=++f)e===S[i][1]&&n===S[i][2]&&(r.cp[o]=i,r.co[o]=c%3)}for(o=p=0;p<=11;o=++p)for(i=v=0;v<=11;i=++v){if(t[x[o][0]]===P[i][0]&&t[x[o][1]]===P[i][1]){r.ep[o]=i,r.eo[o]=0;break}if(t[x[o][0]]===P[i][1]&&t[x[o][1]]===P[i][0]){r.ep[o]=i,r.eo[o]=1;break}}return r},C.prototype.clone=function(){return new C(this.toJSON())},C.prototype.randomize=function(){var t,e,n;return n=function(t,e){return t+(Math.random()*(e-t+1)|0)},t=function(t){var e,r,o,i,s,u,h,l;for(l=[],e=r=0,s=(o=t.length-1)-2;0<=s?r<=s:r>=s;e=0<=s?++r:--r)e!==(i=n(e,o))?(u=[t[i],t[e]],t[e]=u[0],t[i]=u[1],l.push((h=[t[o-1],t[o]],t[o]=h[0],t[o-1]=h[1],h))):l.push(void 0);return l},e=function(t,e){var r,o,i,s;for(i=0,r=o=0,s=t.length-2;0<=s?o<=s:o>=s;r=0<=s?++o:--o)i+=t[r]=n(0,e-1);return t[t.length-1]=(e-i%e)%e},function(){return t(this.cp),t(this.ep),e(this.co,3),e(this.eo,2),this}}(),C.random=function(){return(new C).randomize()},C.prototype.isSolved=function(){var t,e,n,r,o,i,s;for((n=this.clone()).move(n.upright()),e=o=0;o<=5;e=++o)if(n.center[e]!==e)return!1;for(t=i=0;i<=7;t=++i){if(n.cp[t]!==t)return!1;if(0!==n.co[t])return!1}for(r=s=0;s<=11;r=++s){if(n.ep[r]!==r)return!1;if(0!==n.eo[r])return!1}return!0},C.prototype.centerMultiply=function(t){var e,n,r,o;for(o=n=0;n<=5;o=++n)e=t.center[o],this.newCenter[o]=this.center[e];return r=[this.newCenter,this.center],this.center=r[0],this.newCenter=r[1],this},C.prototype.cornerMultiply=function(t){var e,n,r,o,i;for(i=n=0;n<=7;i=++n)e=t.cp[i],this.newCp[i]=this.cp[e],this.newCo[i]=(this.co[e]+t.co[i])%3;return r=[this.newCp,this.cp],this.cp=r[0],this.newCp=r[1],o=[this.newCo,this.co],this.co=o[0],this.newCo=o[1],this},C.prototype.edgeMultiply=function(t){var e,n,r,o,i;for(i=n=0;n<=11;i=++n)e=t.ep[i],this.newEp[i]=this.ep[e],this.newEo[i]=(this.eo[e]+t.eo[i])%2;return r=[this.newEp,this.ep],this.ep=r[0],this.newEp=r[1],o=[this.newEo,this.eo],this.eo=o[0],this.newEo=o[1],this},C.prototype.multiply=function(t){return this.centerMultiply(t),this.cornerMultiply(t),this.edgeMultiply(t),this},C.moves=[{center:[0,1,2,3,4,5],cp:[d,M,w,B,l,f,u,a],co:[0,0,0,0,0,0,0,0],ep:[g,L,D,b,p,h,c,s,F,m,n,r],eo:[0,0,0,0,0,0,0,0,0,0,0,0]},{center:[0,1,2,3,4,5],cp:[l,w,B,M,a,f,u,d],co:[2,0,0,1,1,0,0,2],ep:[F,D,b,g,r,h,c,s,p,m,n,L],eo:[0,0,0,0,0,0,0,0,0,0,0,0]},{center:[0,1,2,3,4,5],cp:[w,f,B,d,M,l,u,a],co:[1,2,0,0,2,1,0,0],ep:[L,m,b,g,p,F,c,s,D,h,n,r],eo:[0,1,0,0,0,1,0,0,1,1,0,0]},{center:[0,1,2,3,4,5],cp:[M,w,B,d,f,u,a,l],co:[0,0,0,0,0,0,0,0],ep:[L,D,b,g,h,c,s,p,F,m,n,r],eo:[0,0,0,0,0,0,0,0,0,0,0,0]},{center:[0,1,2,3,4,5],cp:[M,B,u,d,l,w,f,a],co:[0,1,2,0,0,2,1,0],ep:[L,D,n,g,p,h,m,s,F,b,c,r],eo:[0,0,0,0,0,0,0,0,0,0,0,0]},{center:[0,1,2,3,4,5],cp:[M,w,d,a,l,f,B,u],co:[0,0,1,2,0,0,2,1],ep:[L,D,b,r,p,h,c,n,F,m,g,s],eo:[0,0,0,1,0,0,0,1,0,0,1,1]},{center:[U,v,R,i,e,y],cp:[M,w,B,d,l,f,u,a],co:[0,0,0,0,0,0,0,0],ep:[L,D,b,g,p,h,c,s,m,n,r,F],eo:[0,0,0,0,0,0,0,0,1,1,1,1]},{center:[e,y,U,v,R,i],cp:[M,w,B,d,l,f,u,a],co:[0,0,0,0,0,0,0,0],ep:[L,g,b,s,p,D,c,h,F,m,n,r],eo:[0,1,0,1,0,1,0,1,0,0,0,0]},{center:[R,U,v,y,i,e],cp:[M,w,B,d,l,f,u,a],co:[0,0,0,0,0,0,0,0],ep:[b,D,c,g,L,h,p,s,F,m,n,r],eo:[1,0,1,0,1,0,1,0,0,0,0,0]}],o={U:0,R:1,F:2,D:3,L:4,B:5,E:6,M:7,S:8,x:9,y:10,z:11,u:12,r:13,f:14,d:15,l:16,b:17},t={0:"U",1:"R",2:"F",3:"D",4:"L",5:"B",6:"E",7:"M",8:"S",9:"x",10:"y",11:"z",12:"u",13:"r",14:"f",15:"d",16:"l",17:"b"},E=function(t){var e,n,r,i,s,u,h;if("string"==typeof t){for(h=[],e=0,n=(u=t.split(/\\s+/)).length;e<n;e++)if(0!==(i=u[e]).length){if(i.length>2)throw new Error("Invalid move: "+i);if(void 0===(r=o[i[0]]))throw new Error("Invalid move: "+i);if(1===i.length)s=0;else if("2"===i[1])s=1;else{if("\'"!==i[1])throw new Error("Invalid move: "+i);s=2}h.push(3*r+s)}return h}return null!=t.length?t:[t]},C.prototype.move=function(t){var e,n,r,o,i,s,u;for(n=0,o=(s=E(t)).length;n<o;n++)for(e=(i=s[n])/3|0,r=0,u=i%3;0<=u?r<=u:r>=u;0<=u?++r:--r)this.multiply(C.moves[e]);return this},C.prototype.upright=function(){var t,n,r,o,s,u;for(t=this.clone(),u=[],n=o=0;o<=5&&t.center[n]!==v;n=++o);switch(n){case i:u.push("x");break;case U:u.push("x\'");break;case e:u.push("x2");break;case y:u.push("y");break;case R:u.push("y\'")}for(u.length&&t.move(u[0]),r=s=0;s<=5&&t.center[r]!==U;r=++s);switch(r){case R:u.push("z");break;case y:u.push("z\'");break;case i:u.push("z2")}return u.join(" ")},C.inverse=function(e){var n,r,o,i,s,u,h;if((u=function(){var t,r,o,u;for(u=[],t=0,r=(o=E(e)).length;t<r;t++)i=o[t],n=i/3|0,s=i%3,u.push(3*n-(s-1)+1);return u}()).reverse(),"string"==typeof e){for(h="",r=0,o=u.length;r<o;r++)i=u[r],h+=t[n=i/3|0],1===(s=i%3)?h+="2":2===s&&(h+="\'"),h+=" ";return h.substring(0,h.length-1)}return null!=e.length?u:u[0]},C.moves.push((new C).move("R M\' L\'").toJSON()),C.moves.push((new C).move("U E\' D\'").toJSON()),C.moves.push((new C).move("F S B\'").toJSON()),C.moves.push((new C).move("U E\'").toJSON()),C.moves.push((new C).move("R M\'").toJSON()),C.moves.push((new C).move("F S").toJSON()),C.moves.push((new C).move("D E").toJSON()),C.moves.push((new C).move("L M").toJSON()),C.moves.push((new C).move("B S\'").toJSON()),C}(),void 0!==t&&null!==t?t.exports=o:this.Cube=o}).call(this)}).call(this,n(3)(t))},function(t,e,n){"use strict";n.r(e);n(2);var r=n(0),o=n.n(r);const i=self;i.addEventListener("message",t=>{if("init"==t.data.action)o.a.initSolver(),i.postMessage({action:"init"});else if("scramble"==t.data.action){let t=o.a.scramble();i.postMessage({action:"scramble",data:t})}})},function(t,e,n){(function(){var t,e,r,o,i,s,u,h,l,c,f,p,a,v,m,F,R,y,U,g,d,D,w,b,B,L,M,T,S,O,P,x,E,C=[].slice,j=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};for(U in r=this.Cube||n(0),(T=[0,1,2,3,4,5])[0],T[1],T[2],T[3],T[4],T[5],(S=[0,1,2,3,4,5,6,7])[1],S[2],S[3],S[4],S[6],i=S[7],c=(O=[0,1,2,3,4,5,6,7,8,9,10,11])[0],O[1],l=O[2],h=O[3],O[4],o=O[5],O[6],O[7],s=O[8],O[9],O[10],t=O[11],e=function(t,e){var n,r,o;if(t<e)return 0;for(e>t/2&&(e=t-e),o=1,n=t,r=1;n!==t-e;)o*=n,o/=r,n--,r++;return o},y=function(t){var e,n,r,o;for(e=1,n=r=2,o=t;2<=o?r<=o:r>=o;n=2<=o?++r:--r)e*=n;return e},g=function(t,e){return t>e?t:e},P=function(t,e,n){var r,o,i,s,u;for(u=t[e],r=o=i=e,s=n-1;i<=s?o<=s:o>=s;r=i<=s?++o:--o)t[r]=t[r+1];return t[n]=u},x=function(t,e,n){var r,o,i,s,u;for(u=t[n],r=o=i=n,s=e+1;i<=s?o<=s:o>=s;r=i<=s?++o:--o)t[r]=t[r-1];return t[e]=u},u={twist:function(t){var e,n,r,o,i,s;if(null!=t){for(i=0,e=n=6;n>=0;e=--n)o=t%3,t=t/3|0,this.co[e]=o,i+=o;return this.co[7]=(3-i%3)%3,this}for(s=0,e=r=0;r<=6;e=++r)s=3*s+this.co[e];return s},flip:function(t){var e,n,r,o,i,s;if(null!=t){for(i=0,e=n=10;n>=0;e=--n)o=t%2,t=t/2|0,this.eo[e]=o,i+=o;return this.eo[11]=(2-i%2)%2,this}for(s=0,e=r=0;r<=10;e=++r)s=2*s+this.eo[e];return s},cornerParity:function(){var t,e,n,r,o,s,u,h,l;for(l=0,t=n=o=i,s=f+1;o<=s?n<=s:n>=s;t=o<=s?++n:--n)for(e=r=u=t-1,h=f;u<=h?r<=h:r>=h;e=u<=h?++r:--r)this.cp[e]>this.cp[t]&&l++;return l%2},edgeParity:function(){var e,n,r,o,i,s,u,h,l;for(l=0,e=r=i=t,s=c+1;i<=s?r<=s:r>=s;e=i<=s?++r:--r)for(n=o=u=e-1,h=c;u<=h?o<=h:o>=h;n=u<=h?++o:--o)this.ep[n]>this.ep[e]&&l++;return l%2},URFtoDLF:(B=function(t,n,r,o){var i,s,u,h,l,c;return null==o&&(o=!1),u=y((h=r-n)+1),"corners"===t?(s=7,c="cp"):(s=11,c="ep"),l=function(){var t,e,n;for(n=[],i=t=0,e=h;0<=e?t<=e:t>=e;i=0<=e?++t:--t)n.push(0);return n}(),function(t){var f,p,a,v,m,F,R,y,U,g,d,D,w,b,B,L,M,T,S,O,E,C,j,J,N,k,z;if(null!=t){for(i=F=0,B=h;0<=B?F<=B:F>=B;i=0<=B?++F:--F)l[i]=i+n;for(p=t%u,f=t/u|0,U=this[c],i=R=0,L=s;0<=L?R<=L:R>=L;i=0<=L?++R:--R)U[i]=-1;for(v=y=1,M=h;1<=M?y<=M:y>=M;v=1<=M?++y:--y)for(m=p%(v+1),p=p/(v+1)|0;m>0;)x(l,0,v),m--;if(N=h,o)for(v=g=0,T=s;0<=T?g<=T:g>=T;v=0<=T?++g:--g)f-(a=e(s-v,N+1))>=0&&(U[v]=l[h-N],f-=a,N--);else for(v=C=S=s;S<=0?C<=0:C>=0;v=S<=0?++C:--C)f-(a=e(v,N+1))>=0&&(U[v]=l[N],f-=a,N--);return this}for(U=this[c],i=j=0,O=h;0<=O?j<=O:j>=O;i=0<=O?++j:--j)l[i]=-1;if(f=p=N=0,o)for(v=J=E=s;E<=0?J<=0:J>=0;v=E<=0?++J:--J)n<=(d=U[v])&&d<=r&&(f+=e(s-v,N+1),l[h-N]=U[v],N++);else for(v=k=0,D=s;0<=D?k<=D:k>=D;v=0<=D?++k:--k)n<=(w=U[v])&&w<=r&&(f+=e(v,N+1),l[N]=U[v],N++);for(v=z=b=h;b<=0?z<=0:z>=0;v=b<=0?++z:--z){for(m=0;l[v]!==n+v;)P(l,0,v),m++;p=(v+1)*p+m}return f*u+p}})("corners",f=S[0],S[5]),URtoUL:B("edges",c,l),UBtoDF:B("edges",h,o),URtoDF:B("edges",c,o),FRtoBR:B("edges",s,t,!0)})E=u[U],r.prototype[U]=E;v=function(t,e,n){var o,i,s,u,h,l,c,f,p,a,v;for(o="corners"===t?"cornerMultiply":"edgeMultiply",i=new r,v=[],s=l=0,a=n-1;0<=a?l<=a:l>=a;s=0<=a?++l:--l){for(i[e](s),u=[],h=f=0;f<=5;h=++f){for(c=r.moves[h],p=0;p<=2;++p)i[o](c),u.push(i[e]());i[o](c)}v.push(u)}return v},d=function(){var t,e;return t=new r,e=new r,function(n,r){var o,i;for(t.URtoUL(n),e.UBtoDF(r),o=i=0;i<=7;o=++i)if(-1!==t.ep[o]){if(-1!==e.ep[o])return-1;e.ep[o]=t.ep[o]}return e.URtoDF()}}(),r.moveTables={parity:[[1,0,1,1,0,1,1,0,1,1,0,1,1,0,1,1,0,1],[0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0]],twist:null,flip:null,FRtoBR:null,URFtoDLF:null,URtoDF:null,URtoUL:null,UBtoDF:null,mergeURtoDF:null},D={twist:["corners",2187],flip:["edges",2048],FRtoBR:["edges",11880],URFtoDLF:["corners",20160],URtoDF:["edges",20160],URtoUL:["edges",1320],UBtoDF:["edges",1320],mergeURtoDF:[]},r.computeMoveTables=function(){var t,e,n,r,o,i,s,u;for(0===(u=1<=arguments.length?C.call(arguments,0):[]).length&&(u=function(){var t;for(n in t=[],D)t.push(n);return t}()),e=0,t=u.length;e<t;e++)s=u[e],null===this.moveTables[s]&&("mergeURtoDF"===s?this.moveTables.mergeURtoDF=function(){var t,e,n,r;for(r=[],e=n=0;n<=335;e=++n)r.push(function(){var n,r;for(r=[],t=n=0;n<=335;t=++n)r.push(d(e,t));return r}());return r}():(o=(r=D[s])[0],i=r[1],this.moveTables[s]=v(o,s,i)));return this},p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17],w=function(){var t,e,n,r,o,i,s,u;for(u=[],e=n=0;n<=5;e=++n){for(r=[],t=o=0;o<=5;t=++o)if(t!==e&&t!==e-3)for(s=i=0;i<=2;s=++i)r.push(3*t+s);u.push(r)}return u}(),a=[0,1,2,4,7,9,10,11,13,16],b=function(){var t,e,n,r,o,i,s,u,h,l;for(l=[],e=r=0;r<=5;e=++r){for(o=[],t=i=0;i<=5;t=++i)if(t!==e&&t!==e-3)for(s=0,n=(h=0===t||3===t?[0,1,2]:[1]).length;s<n;s++)u=h[s],o.push(3*t+u);l.push(o)}return l}(),L=function(t,e,n){var r,o;return o=e>>3,r=e%8<<2,null!=n?(t[o]&=~(15<<r),t[o]|=n<<r,n):(t[o]&15<<r)>>>r},m=function(t,e,n,r){var o,i,s,u,h,l,c,f,v,m,F;for(F=function(){var t,n,r;for(r=[],t=0,n=Math.ceil(e/8)-1;0<=n?t<=n:t>=n;0<=n?++t:--t)r.push(4294967295);return r}(),c=1===t?p:a,L(F,0,i=0),s=1;s!==e;){for(u=l=0,m=e-1;0<=m?l<=m:l>=m;u=0<=m?++l:--l)if(L(F,u)===i)for(o=n(u),v=0,h=c.length;v<h;v++)f=r(o,c[v]),15===L(F,f)&&(L(F,f,i+1),s++);i++}return F},r.pruningTables={sliceTwist:null,sliceFlip:null,sliceURFtoDLFParity:null,sliceURtoDFParity:null},M={sliceTwist:[1,1082565,function(t){return[t%495,t/495|0]},function(t,e){var n,o,i;return o=t[0],i=t[1],n=r.moveTables.FRtoBR[24*o][e]/24|0,495*r.moveTables.twist[i][e]+n}],sliceFlip:[1,1013760,function(t){return[t%495,t/495|0]},function(t,e){var n,o,i;return i=t[0],n=t[1],o=r.moveTables.FRtoBR[24*i][e]/24|0,495*r.moveTables.flip[n][e]+o}],sliceURFtoDLFParity:[2,967680,function(t){return[t%2,(t/2|0)%24,(t/2|0)/24|0]},function(t,e){var n,o,i,s,u;return s=t[0],u=t[1],n=t[2],o=r.moveTables.parity[s][e],i=r.moveTables.FRtoBR[u][e],2*(24*r.moveTables.URFtoDLF[n][e]+i)+o}],sliceURtoDFParity:[2,967680,function(t){return[t%2,(t/2|0)%24,(t/2|0)/24|0]},function(t,e){var n,o,i,s,u;return s=t[0],u=t[1],n=t[2],o=r.moveTables.parity[s][e],i=r.moveTables.FRtoBR[u][e],2*(24*r.moveTables.URtoDF[n][e]+i)+o}]},r.computePruningTables=function(){var t,e,n,r,o,i;for(0===(i=1<=arguments.length?C.call(arguments,0):[]).length&&(i=function(){var t;for(n in t=[],M)t.push(n);return t}()),e=0,t=i.length;e<t;e++)o=i[e],null===this.pruningTables[o]&&(r=M[o],this.pruningTables[o]=m.apply(null,r));return this},r.initSolver=function(){return r.computeMoveTables(),r.computePruningTables()},r.prototype.solveUpright=function(t){var e,n,o,i,s,u,h,l,c;return null==t&&(t=22),o=function(){var t,e,n,r,o,i,s;for(e=["U","R","F","D","L","B"],i=["","2","\'"],s=[],t=n=0;n<=5;t=++n)for(o=r=0;r<=2;o=++r)s.push(e[t]+i[o]);return s}(),e=function(){function t(t){this.parent=null,this.lastMove=null,this.depth=0,t&&this.init(t)}return t.prototype.init=function(t){return this.flip=t.flip(),this.twist=t.twist(),this.slice=t.FRtoBR()/24|0,this.parity=t.cornerParity(),this.URFtoDLF=t.URFtoDLF(),this.FRtoBR=t.FRtoBR(),this.URtoUL=t.URtoUL(),this.UBtoDF=t.UBtoDF(),this},t.prototype.solution=function(){return this.parent?this.parent.solution()+o[this.lastMove]+" ":""},t.prototype.move=function(t,e,n){return r.moveTables[t][e][n]},t.prototype.pruning=function(t,e){return L(r.pruningTables[t],e)},t.prototype.moves1=function(){return null!==this.lastMove?w[this.lastMove/3|0]:p},t.prototype.minDist1=function(){var t,e;return t=this.pruning("sliceFlip",495*this.flip+this.slice),e=this.pruning("sliceTwist",495*this.twist+this.slice),g(t,e)},t.prototype.next1=function(t){var e;return(e=n.pop()).parent=this,e.lastMove=t,e.depth=this.depth+1,e.flip=this.move("flip",this.flip,t),e.twist=this.move("twist",this.twist,t),e.slice=this.move("FRtoBR",24*this.slice,t)/24|0,e},t.prototype.moves2=function(){return null!==this.lastMove?b[this.lastMove/3|0]:a},t.prototype.minDist2=function(){var t,e,n,r;return n=2*(24*this.URtoDF+this.FRtoBR)+this.parity,t=this.pruning("sliceURtoDFParity",n),r=2*(24*this.URFtoDLF+this.FRtoBR)+this.parity,e=this.pruning("sliceURFtoDLFParity",r),g(t,e)},t.prototype.init2=function(t){if(null==t&&(t=!0),null!==this.parent)return this.parent.init2(!1),this.URFtoDLF=this.move("URFtoDLF",this.parent.URFtoDLF,this.lastMove),this.FRtoBR=this.move("FRtoBR",this.parent.FRtoBR,this.lastMove),this.parity=this.move("parity",this.parent.parity,this.lastMove),this.URtoUL=this.move("URtoUL",this.parent.URtoUL,this.lastMove),this.UBtoDF=this.move("UBtoDF",this.parent.UBtoDF,this.lastMove),t?this.URtoDF=this.move("mergeURtoDF",this.URtoUL,this.UBtoDF):void 0},t.prototype.next2=function(t){var e;return(e=n.pop()).parent=this,e.lastMove=t,e.depth=this.depth+1,e.URFtoDLF=this.move("URFtoDLF",this.URFtoDLF,t),e.FRtoBR=this.move("FRtoBR",this.FRtoBR,t),e.parity=this.move("parity",this.parity,t),e.URtoDF=this.move("URtoDF",this.URtoDF,t),e},t}(),l=null,s=function(e){var n,r,o,s;for(n=0,s=[],n=r=1,o=t;(1<=o?r<=o:r>=o)&&(i(e,n),null===l);n=1<=o?++r:--r)s.push(n++);return s},i=function(t,e){var r,o,s,u,c,f,p;if(0===e){if(0===t.minDist1()&&(null===t.lastMove||(c=t.lastMove,j.call(a,c)<0)))return h(t)}else if(e>0&&t.minDist1()<=e){for(p=[],o=0,r=(f=t.moves1()).length;o<r&&(s=f[o],u=t.next1(s),i(u,e-1),n.push(u),null===l);o++)p.push(void 0);return p}},h=function(e){var n,r,o,i;for(e.init2(),i=[],n=r=1,o=t-e.depth;(1<=o?r<=o:r>=o)&&(u(e,n),null===l);n=1<=o?++r:--r)i.push(n++);return i},u=function(t,e){var r,o,i,s,h,c;if(0===e){if(0===t.minDist2())return l=t.solution()}else if(e>0&&t.minDist2()<=e){for(c=[],o=0,r=(h=t.moves2()).length;o<r&&(i=h[o],s=t.next2(i),u(s,e-1),n.push(s),null===l);o++)c.push(void 0);return c}},s(c=(n=function(){var n,r,o;for(o=[],n=0,r=t+1;0<=r?n<=r:n>=r;0<=r?++n:--n)o.push(new e);return o}()).pop().init(this)),n.push(c),l.length>0&&(l=l.substring(0,l.length-1)),l},R={U:0,R:1,F:2,D:3,L:4,B:5},F={0:"U",1:"R",2:"F",3:"D",4:"L",5:"B"},r.prototype.solve=function(t){var e,n,o,i,s,u,h,l;for(null==t&&(t=22),l=(e=this.clone()).upright(),e.move(l),u=(new r).move(l).center,h=[],o=0,n=(s=e.solveUpright(t).split(" ")).length;o<n;o++)i=s[o],h.push(F[u[R[i[0]]]]),i.length>1&&(h[h.length-1]+=i[1]);return h.join(" ")},r.scramble=function(){return r.inverse(r.random().solve())}}).call(this)},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}}]);',null)}},function(e,t,i){e.exports=i(3)(12)},function(e,t){e.exports='<v-container fluid grid-list-md text-xs-center v-show="show" style="padding-top: 0%">\n  <v-layout row wrap>\n    <v-flex xs12 style="display: table; width: 100%">\n      <p class="title" style="display: table-cell; vertical-align:middle; width: 100%; height: 1em; min-width: 0%; min-height: 0%; margin: 0%; padding: 0%;">{{game.twister.buffer}}</p>\n    </v-flex>\n    <v-flex v-for="exp in exps" d-flex xs2>\n      <v-btn :disabled="game.twister.length > 9" @click.stop.prevent="twist(exp)" class="headline" style="width:auto; height:2em; min-width: 0%; min-height: 0%; margin: 0%; text-transform:none">{{exp}}\n      </v-btn>\n    </v-flex>\n    <v-flex xs2>\n      <v-btn @click.stop.prevent="layers==1?layers=0:layers=1" :color="layers == 1?\'primary\':\'\'" :outline="layers == 1" block class="headline" style="height:2em; min-width: 0%; min-height: 0%; margin: 0%;">\n        <v-icon large>view_carousel</v-icon>\n      </v-btn>\n    </v-flex>\n    <v-flex xs2>\n      <v-btn @click.stop.prevent="layers==2?layers=0:layers=2" :color="layers == 2?\'primary\':\'\'" :outline="layers == 2" block class="headline" style="height:2em; min-width: 0%; min-height: 0%; margin: 0%;">\n        <v-icon large>looks_two</v-icon>\n      </v-btn>\n    </v-flex>\n    <v-flex xs2>\n      <v-btn @click.stop.prevent="layers==3?layers=0:layers=3" :color="layers == 3?\'primary\':\'\'" :outline="layers == 3" block class="headline" style="height:2em; min-width: 0%; min-height: 0%; margin: 0%;">\n        <v-icon large>looks_3</v-icon>\n      </v-btn>\n    </v-flex>\n    <v-flex xs2>\n      <v-btn block @click.stop.prevent="twist(\'*\')" class="headline" style="height:2em; min-width: 0%; min-height: 0%; margin: 0%; padding: 0%;">\n        <v-icon large>casino</v-icon>\n      </v-btn>\n    </v-flex>\n    <v-flex xs2>\n      <v-btn block @click.stop.prevent="twist(\'#\')" class="headline" style="height:2em; min-width: 0%; min-height: 0%; margin: 0%; padding: 0%;">\n        <v-icon large>format_paint</v-icon>\n      </v-btn>\n    </v-flex>\n    <v-flex xs2>\n      <v-btn block @click.stop.prevent="$emit(\'hide\')" class="headline" style="height:2em; min-width: 0%; min-height: 0%; margin: 0%; padding: 0%;">\n        <v-icon large>keyboard_hide</v-icon>\n      </v-btn>\n    </v-flex>\n  </v-layout>\n</v-container>'},function(e,t){e.exports='<v-container fluid grid-list-md text-xs-center v-show="show" style="padding-top: 0%">\n  <v-layout row wrap>\n    <template v-for="(group, i) in scripts">\n      <v-flex xs4 style="margin: 0%; padding: 0%">\n        <v-btn class="headline" :color="type == i?\'primary\':\'\'" :outline="type == i" flat block style="text-transform:none; min-width: 0%; min-height: 0%; margin: 0%; padding: 0%; width: 100%; height: 2em;" @click.stop.prevent="type = i;init();">\n          {{type==i?(progress != 0?\'\':script.name):group.name}}\n          <v-icon large v-show="type == i && (progress != 0)">replay</v-icon>\n        </v-btn>\n      </v-flex>\n    </template>\n    <v-flex xs12>\n      <v-text-field outline single-line hide-details class="headline" :append-icon="exp==script.exp?\'\':\'settings_backup_restore\'" @click:append="exp=script.exp" v-model="exp"></v-text-field>\n    </v-flex>\n    <v-flex xs12 style="padding-left: 5%; padding-right: 5%">\n      <v-slider style="margin: 0%" readonly hide-details thumb-label="false" ticks="always" v-model="progress" :max="actions.length"></v-slider>\n    </v-flex>\n    <v-flex xs2.4>\n      <v-btn icon large @mousedown="indexDown(-1)" @mouseup="indexUp(-1)" @mouseleave="indexUp(-1)" @touchstart.stop.prevent="indexDown(-1)" @touchend.stop.prevent="indexUp(-1)" style="margin: 0%; padding: 0%;">\n        <v-icon large>skip_previous</v-icon>\n      </v-btn>\n    </v-flex>\n    <v-flex xs2.4>\n      <v-btn icon large :disabled="progress==0" @click.stop.prevent="backward" style="margin: 0%; padding: 0%;">\n        <v-icon large>fast_rewind</v-icon>\n      </v-btn>\n    </v-flex>\n    <v-flex xs2.4>\n      <v-btn icon large :disabled="progress == actions.length" @click.stop.prevent="toggle" style="margin: 0%; padding: 0%;">\n        <v-icon large>{{playing?\'pause\':\'play_arrow\'}}</v-icon>\n      </v-btn>\n    </v-flex>\n    <v-flex xs2.4>\n      <v-btn icon large :disabled="progress == actions.length" @click.stop.prevent="forward" style="margin: 0%; padding: 0%;">\n        <v-icon large>fast_forward</v-icon>\n      </v-btn>\n    </v-flex>\n    <v-flex xs2.4>\n      <v-btn icon large @mousedown="indexDown(1)" @mouseup="indexUp(1)" @mouseleave="indexUp(1)" @touchstart.stop.prevent="indexDown(1)" @touchend.stop.prevent="indexUp(1)" style="margin: 0%; padding: 0%;">\n        <v-icon large>skip_next</v-icon>\n      </v-btn>\n    </v-flex>\n  </v-layout>\n</v-container>'},function(e,t,i){"use strict";var n=window.URL||window.webkitURL;e.exports=function(e,t){try{try{var i;try{(i=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(e),i=i.getBlob()}catch(t){i=new Blob([e])}return new Worker(n.createObjectURL(i))}catch(t){return new Worker("data:application/javascript,"+encodeURIComponent(e))}}catch(e){if(!t)throw Error("Inline worker is not supported");return new Worker(t)}}},function(e,t){e.exports='<v-container fluid grid-list-md text-xs-center v-show="show" style="padding-top: 0%">\n  <v-layout row wrap>\n    <v-flex xs12 style="margin: 0%; padding: 0%; display: table; width: 100%;">\n      <p class="headline" @click="random" style="\n                border: 2px solid rgba(0,0,0,0.54);\n                border-radius: 4px;\n                display: table-cell;\n                vertical-align:middle;\n                width: 100%;\n                height: 2.8em;\n                min-width: 0%;\n                min-height: 0%;\n                margin: 0%;\n                padding: 0%;\n            ">{{exp}}\n        <v-progress-circular v-if="exp == \'\'" color="primary" indeterminate></v-progress-circular>\n      </p>\n    </v-flex>\n    <v-flex xs12 style="margin: 0%; padding: 0%; display: table; width: 100%;">\n      <p class="display-4" :class="color" @mousedown="down(1)" @mouseup="up(1)" @mouseleave="up(1)"\n        @touchstart.stop.prevent="down(1)" @touchend.stop.prevent="up(1)" style="display: table-cell; vertical-align:middle; width: 100%; height: 1.6em; min-width: 0%; min-height: 0%; margin: 0%; padding: 0%;">{{time}}</p>\n    </v-flex>\n  </v-layout>\n</v-container>'},function(e,t){e.exports='<v-app>\n    <div v-resize="resize">\n        <div ref=cuber></div>\n        <div ref=panel>\n            <keyboard-panel :show="mode == \'play\' && keyboard" @hide="keyboard = false"></keyboard-panel>\n            <script-panel :show="mode == \'script\'"></script-panel>\n            <timer-panel :show="mode == \'timer\'"></timer-panel>\n        </div>\n        <v-btn fixed top right icon large @click.stop.prevent="menu = !menu;">\n            <v-icon large>menu</v-icon>\n        </v-btn>\n        <v-btn v-show="mode == \'play\' && !keyboard" fixed bottom right icon large @click.stop.prevent="keyboard = !keyboard;">\n            <v-icon large>keyboard</v-icon>\n        </v-btn>\n        <v-btn fixed top left icon class="title" @click.stop.prevent v-if="exp != \'\'" style="text-transform:none">{{exp}}</v-btn>\n    </div>\n    <v-bottom-sheet v-model="menu">\n        <v-card flat>\n            <v-container fluid grid-list-md text-xs-center>\n                <v-layout row wrap justify-center align-center>\n                    <v-flex xs4>\n                        <v-btn class="headline" :color="mode == \'play\'?\'primary\':\'\'" flat block @click.stop.prevent="mode = \'play\'" style="height: 2em; min-width: 0%; min-height: 0%; margin: 0%; padding: 0%;">\n                            <v-icon large>games</v-icon>\n                        </v-btn>\n                    </v-flex>\n                    <v-flex xs4>\n                        <v-btn class="headline" :color="mode == \'script\'?\'primary\':\'\'" flat block @click.stop.prevent="mode = \'script\'" style="height: 2em; min-width: 0%; min-height: 0%; margin: 0%; padding: 0%;">\n                            <v-icon large>school</v-icon>\n                        </v-btn>\n                    </v-flex>\n                    <v-flex xs4>\n                        <v-btn class="headline" :color="mode == \'timer\'?\'primary\':\'\'" flat block @click.stop.prevent="mode = \'timer\'" style="height: 2em; min-width: 0%; min-height: 0%; margin: 0%; padding: 0%;">\n                            <v-icon large>timer</v-icon>\n                        </v-btn>\n                    </v-flex>\n                </v-layout>\n                <v-divider></v-divider>\n                <v-layout row wrap justify-center align-center>\n                    <v-flex xs12>\n                        <v-btn class="headline" block outline @click.stop.prevent="menu=false; tune=true" style="height: 2em; min-width: 0%; min-height: 0%; margin: 0%; padding: 0%;">\n                            <v-icon large>tune</v-icon>\n                        </v-btn>\n                    </v-flex>\n                </v-layout>\n                <v-divider></v-divider>\n                <v-layout row wrap justify-center align-center>\n                    <v-flex xs12>\n                        <v-btn class="headline" block outline @click.stop.prevent="menu=false; about=true" style="height: 2em; min-width: 0%; min-height: 0%; margin: 0%; padding: 0%;">\n                            <v-icon large>help</v-icon>\n                        </v-btn>\n                    </v-flex>\n                </v-layout>\n            </v-container>\n        </v-card>\n    </v-bottom-sheet>\n    <v-bottom-sheet v-model="tune">\n        <v-card>\n            <v-container fluid grid-list-md text-xs-center>\n                <v-layout row wrap justify-center align-center>\n                    <v-flex xs3>\n                        <v-icon large color="black">av_timer</v-icon>\n                    </v-flex>\n                    <v-flex xs3>\n                        <v-btn icon :disabled="speed <= -4" @click.stop.prevent="speed--" style="min-width: 0%; min-height: 0%; margin: 0%; padding: 0%;">\n                            <v-icon large>remove</v-icon>\n                        </v-btn>\n                    </v-flex>\n                    <v-flex xs3>\n                        <v-btn class="headline" flat block outline @click.stop.prevent :ripple="false" style="min-width: 0%; min-height: 0%; margin: 0%; padding: 0%;">{{speed}}\n                        </v-btn>\n                    </v-flex>\n                    <v-flex xs3>\n                        <v-btn icon :disabled="speed >= 4" @click.stop.prevent="speed++" style="min-width: 0%; min-height: 0%; margin: 0%; padding: 0%;">\n                            <v-icon large>add</v-icon>\n                        </v-btn>\n                    </v-flex>\n                </v-layout>\n                <v-divider></v-divider>\n                <v-layout row wrap justify-center align-center>\n                    <v-flex xs3>\n                        <v-icon large color="black">crop_rotate</v-icon>\n                    </v-flex>\n                    <v-flex xs3>\n                        <v-btn flat block :disabled="angle <= -2" @click.stop.prevent="angle--" style="min-width: 0%; min-height: 0%; margin: 0%; padding: 0%;">\n                            <v-icon large>remove</v-icon>\n                        </v-btn>\n                    </v-flex>\n                    <v-flex xs3>\n                        <v-btn class="headline" flat block outline @click.stop.prevent :ripple="false" style="min-width: 0%; min-height: 0%; margin: 0%; padding: 0%;">{{angle}}\n                        </v-btn>\n                    </v-flex>\n                    <v-flex xs3>\n                        <v-btn flat block :disabled="angle >= 2" @click.stop.prevent="angle++" style="min-width: 0%; min-height: 0%; margin: 0%; padding: 0%;">\n                            <v-icon large>add</v-icon>\n                        </v-btn>\n                    </v-flex>\n                </v-layout>\n                <v-divider></v-divider>\n                <v-layout row wrap justify-center align-center>\n                    <v-flex xs3>\n                        <v-icon large color="black">transform</v-icon>\n                    </v-flex>\n                    <v-flex xs3>\n                        <v-btn flat block :disabled="size <= -4" @click.stop.prevent="size--" style="min-width: 0%; min-height: 0%; margin: 0%; padding: 0%;">\n                            <v-icon large>remove</v-icon>\n                        </v-btn>\n                    </v-flex>\n                    <v-flex xs3>\n                        <v-btn class="headline" flat block outline @click.stop.prevent :ripple="false" style="min-width: 0%; min-height: 0%; margin: 0%; padding: 0%;">{{size}}\n                        </v-btn>\n                    </v-flex>\n                    <v-flex xs3>\n                        <v-btn flat block :disabled="size >= 4" @click.stop.prevent="size++" style="min-width: 0%; min-height: 0%; margin: 0%; padding: 0%;">\n                            <v-icon large>add</v-icon>\n                        </v-btn>\n                    </v-flex>\n                </v-layout>\n            </v-container>\n        </v-card>\n    </v-bottom-sheet>\n    <v-dialog v-model="about">\n        <v-card>\n            <v-toolbar dark color="primary">\n                <v-toolbar-title>About</v-toolbar-title>\n                <v-spacer></v-spacer>\n                <v-btn icon dark @click.native="about = false">\n                    <v-icon>close</v-icon>\n                </v-btn>\n            </v-toolbar>\n            <v-card-text>\n                <a class="headline" href="https://github.com/huazhechen/cuber">Code</a>\n            </v-card-text>\n\n            <v-card-actions>\n                <v-btn block outline @click.stop.prevent="about = false">OK</v-btn>\n                <v-btn block outline @click.stop.prevent="reset" color="error">RESET</v-btn>\n            </v-card-actions>\n        </v-card>\n    </v-dialog>\n</v-app>'},function(e,t,i){e.exports=i(3)(42)},function(e,t,i){e.exports=i(3)(13)},function(e,t,i){e.exports=i(3)(16)},function(e,t,i){"use strict";i.r(t);var n,s=i(2),r=i(1),o=i(0);class a extends o.Geometry{constructor(e,t){super();let i=e/2,n=i-t,s=[[-n,+n,+i],[+n,+n,+i],[+n,-n,+i],[-n,-n,+i],[-n,+i,-n],[+n,+i,-n],[+n,+i,+n],[-n,+i,+n],[-i,-n,-n],[-i,+n,-n],[-i,+n,+n],[-i,-n,+n],[+n,+n,-i],[-n,+n,-i],[-n,-n,-i],[+n,-n,-i],[-n,-i,+n],[+n,-i,+n],[+n,-i,-n],[-n,-i,-n],[+i,+n,+n],[+i,+n,-n],[+i,-n,-n],[+i,-n,+n]];for(let e=0;e<s.length;e++){let t=s[e];this.vertices.push(new o.Vector3(t[0],t[1],t[2]))}for(let e=0;e<a._INDICES.length;e++){let t=a._INDICES[e],i=new o.Face3(t[0],t[1],t[2]);this.faces.push(i)}}}a._INDICES=[[1,6,7],[0,1,7],[3,0,10],[11,3,10],[17,2,3],[16,17,3],[23,20,1],[2,23,1],[5,12,13],[4,5,13],[9,13,14],[8,9,14],[22,15,12],[21,22,12],[19,14,15],[18,19,15],[7,4,9],[10,7,9],[11,8,19],[16,11,19],[23,17,18],[22,23,18],[20,21,5],[6,20,5],[20,6,1],[10,0,7],[21,12,5],[13,9,4],[23,2,17],[11,16,3],[22,18,15],[8,14,19]];!function(e){e[e.L=0]="L",e[e.R=1]="R",e[e.D=2]="D",e[e.U=3]="U",e[e.B=4]="B",e[e.F=5]="F"}(n||(n={}));class l extends o.Group{constructor(e){super(),this._vector=new o.Vector3,this._stickers=[],this._quaternion=new o.Quaternion,this.initial=e;let t=e%3-1,i=Math.floor(e%9/3)-1,s=Math.floor(e/9)-1;this.vector=new o.Vector3(t,i,s),this._materials=[this._vector.x<0?l._MATERIALS.o:l._MATERIALS.i,this._vector.x>0?l._MATERIALS.r:l._MATERIALS.i,this._vector.y<0?l._MATERIALS.w:l._MATERIALS.i,this._vector.y>0?l._MATERIALS.y:l._MATERIALS.i,this._vector.z<0?l._MATERIALS.g:l._MATERIALS.i,this._vector.z>0?l._MATERIALS.b:l._MATERIALS.i];let r=new o.Mesh(l._FRAME,l._MATERIALS.p);this.add(r);for(let e=0;e<6;e++){let t=new o.Mesh(l._EDGE,l._MATERIALS.p),i=new o.Mesh(l._STICKER,this._materials[e]);switch(e){case n.L:t.rotation.y=-Math.PI/2,t.position.x=-l._SIZE/2,i.rotation.y=-Math.PI/2,i.position.x=-l._SIZE/2,i.name="L";break;case n.R:t.rotation.y=Math.PI/2,t.position.x=l._SIZE/2,i.rotation.y=Math.PI/2,i.position.x=l._SIZE/2,i.name="R";break;case n.D:t.rotation.x=Math.PI/2,t.position.y=-l._SIZE/2,i.rotation.x=Math.PI/2,i.position.y=-l._SIZE/2,i.name="D";break;case n.U:t.rotation.x=-Math.PI/2,t.position.y=l._SIZE/2,i.rotation.x=-Math.PI/2,i.position.y=l._SIZE/2,i.name="U";break;case n.B:t.rotation.x=Math.PI,t.position.z=-l._SIZE/2,i.rotation.x=Math.PI,i.position.z=-l._SIZE/2,i.name="B";break;case n.F:t.rotation.z=0,t.position.z=l._SIZE/2,i.rotation.z=0,i.position.z=l._SIZE/2,i.name="F"}this.add(t),this.add(i),this._stickers.push(i),this.matrixAutoUpdate=!1,this.updateMatrix()}}set vector(e){this._vector.set(Math.round(e.x),Math.round(e.y),Math.round(e.z)),this._index=9*(this.vector.z+1)+3*(this.vector.y+1)+(this.vector.x+1),this.position.x=l._SIZE*this._vector.x,this.position.y=l._SIZE*this._vector.y,this.position.z=l._SIZE*this._vector.z}get vector(){return this._vector}set index(e){let t=e%3-1,i=Math.floor(e%9/3)-1,n=Math.floor(e/9)-1;this.vector=new o.Vector3(t,i,n)}get index(){return this._index}getColor(e){let t=new o.Vector3(0,0,0);switch(e){case n.L:t.x=-1;break;case n.R:t.x=1;break;case n.D:t.y=-1;break;case n.U:t.y=1;break;case n.B:t.z=-1;break;case n.F:t.z=1}this._quaternion.copy(this.quaternion),t.applyQuaternion(this._quaternion.inverse());let i=Math.round(t.x),s=Math.round(t.y),r=Math.round(t.z),a=0;return i<0?a=n.L:i>0?a=n.R:s<0?a=n.D:s>0?a=n.U:r<0?a=n.B:r>0&&(a=n.F),this._stickers[a].name}stick(){for(let e=0;e<6;e++)this._stickers[e].material=this._materials[e]}strip(e){this._stickers[e].material=l._MATERIALS.i}}l._SIZE=32,l._BORDER_WIDTH=2,l._EDGE_WIDTH=1,l._FRAME=new a(l._SIZE,l._BORDER_WIDTH),l._EDGE=new class extends o.ShapeGeometry{constructor(e,t){let i=new o.Shape;e/=2,i.moveTo(-e,-e),i.lineTo(-e,e),i.lineTo(e,e),i.lineTo(e,-e),i.closePath();let n=-(e-=t),s=e,r=-e,a=e,l=e/4,h=new o.Shape;h.moveTo(n,r+l),h.quadraticCurveTo(n,r,n+l,r),h.lineTo(a-l,r),h.quadraticCurveTo(a,r,a,r+l),h.lineTo(a,s-l),h.quadraticCurveTo(a,s,a-l,s),h.lineTo(n+l,s),h.quadraticCurveTo(n,s,n,s-l),h.lineTo(n,r+l),h.closePath(),i.holes.push(h),super(i)}}(l._SIZE-2*l._BORDER_WIDTH,l._EDGE_WIDTH),l._STICKER=new class extends o.ShapeGeometry{constructor(e,t){e/=2;let i=-(e-=t),n=e,s=-e,r=e,a=e/4,l=new o.Shape;l.moveTo(i,s+a),l.lineTo(i,n-a),l.quadraticCurveTo(i,n,i+a,n),l.lineTo(r-a,n),l.quadraticCurveTo(r,n,r,n-a),l.lineTo(r,s+a),l.quadraticCurveTo(r,s,r-a,s),l.lineTo(i+a,s),l.quadraticCurveTo(i,s,i,s+a),l.closePath(),super(l)}}(l._SIZE-2*l._BORDER_WIDTH,l._EDGE_WIDTH),l._MATERIALS={p:new o.MeshBasicMaterial({wireframe:!1,color:"#000000"}),i:new o.MeshBasicMaterial({wireframe:!1,color:"#303030"}),g:new o.MeshBasicMaterial({wireframe:!1,color:"#009D54"}),o:new o.MeshBasicMaterial({wireframe:!1,color:"#FF6C00"}),b:new o.MeshBasicMaterial({wireframe:!1,color:"#3D81F6"}),y:new o.MeshBasicMaterial({wireframe:!1,color:"#FDCC09"}),w:new o.MeshBasicMaterial({wireframe:!1,color:"#FFFFFF"}),r:new o.MeshBasicMaterial({wireframe:!1,color:"#DC422F"})};class h{constructor(e){this.queue=[],this._game=e}get length(){return this.queue.length}get buffer(){let e=[];for(let t of this.queue)e.push(t.format);return e.join(" ")}clear(){for(const e of this.queue)e.fast=!0;this.update(),this._game.tweener.clear()}twist(e,t=!1,i=1,n=null,s=!1){let r=new p(e,t,i).parse();r[r.length-1].callback=n;for(let e of r)e.fast=s,this.queue.push(e);this.update()}update(){if(0===this.queue.length||this._game.lock)return!1;let e=this.queue.shift();return void 0!=e&&(this.start(e),!0)}random(){let e="",t=[],i=-1,n=["U","D","R","L","F","B"],s=-1;for(let e=0;e<20;e++){let e=[];for(;s==i;)s=Math.floor(3*Math.random());let r=Math.floor(2*Math.random());e.push(n[2*s+r]);let o=Math.random();o<.2?e.push("2"):o<.6&&e.push("'"),t.push(e.join("")),i=s}return e=t.join(" ")}start(e){if("#"==e.exp)return this._game.cube.reset(),this._game.dirty=!0,e.callback&&e.callback(),void this.update();if("*"==e.exp){this._game.cube.reset(),this._game.dirty=!0;let t=this.random(),i=new p(t).parse();i[i.length-1].callback=e.callback;for(let e of i)e.fast=!0,this.queue.unshift(e);return void this.update()}let t=-Math.PI/2;e.reverse&&(t=-t),e.times&&(t*=e.times);let i=u.GROUPS[e.exp];if(void 0!==i){if(i.hold(this._game),e.fast)return i.angle=t,i.adjust(this._game),e.callback&&e.callback(),void this.update();{for(let t of this._game.callbacks)t(e.format);let n=this._game.duration*Math.min(1,Math.abs(t)/Math.PI);this._game.tweener.tween(i.angle,i.angle+t,n,e=>{i.angle=e,this._game.dirty=!0},()=>{i.adjust(this._game),e.callback&&e.callback(),this.update()})}}else this.update()}match(e){let t,i=[];var n=e.index;if(-1===e.index)return 0===(t=u.GROUPS.x).axis.dot(e.plane.normal)&&i.push(t),0===(t=u.GROUPS.y).axis.dot(e.plane.normal)&&i.push(t),0===(t=u.GROUPS.z).axis.dot(e.plane.normal)&&i.push(t),i;var s=n%3-1,r=Math.floor(n%9/3)-1,o=Math.floor(n/9)-1;switch(s){case-1:0===(t=u.GROUPS.L).axis.dot(e.plane.normal)&&i.push(t);break;case 0:0===(t=u.GROUPS.M).axis.dot(e.plane.normal)&&i.push(t);break;case 1:0===(t=u.GROUPS.R).axis.dot(e.plane.normal)&&i.push(t)}switch(r){case-1:0===(t=u.GROUPS.D).axis.dot(e.plane.normal)&&i.push(t);break;case 0:0===(t=u.GROUPS.E).axis.dot(e.plane.normal)&&i.push(t);break;case 1:0===(t=u.GROUPS.U).axis.dot(e.plane.normal)&&i.push(t)}switch(o){case-1:0===(t=u.GROUPS.B).axis.dot(e.plane.normal)&&i.push(t);break;case 0:0===(t=u.GROUPS.S).axis.dot(e.plane.normal)&&i.push(t);break;case 1:0===(t=u.GROUPS.F).axis.dot(e.plane.normal)&&i.push(t)}return i}}class c{constructor(){this.exp="",this.reverse=!1,this.times=1,this.fast=!1,this.callback=null}get format(){return this.fast?"":0==this.times?"":(this.exp.length>1?"(":"")+this.exp+(this.exp.length>1?")":"")+(this.reverse?"'":"")+(1==this.times?"":String(this.times))}}class p{constructor(e,t=!1,i=1){this._children=[],this._twist=new c;let n=e.replace(/[^\*#xyzbsfdeulmr\(\)'0123456789]/gi,"").match(/\([\*#xyzbsfdeulmr'\d]+\)('\d*|\d*'|\d*)|[\*#xyzbsfdeulmr]('\d*|\d*'|\d*)/gi);if(null!==n)if(1==n.length){var s=n[0].match(/^\((\S+)\)('?)(\d*)('?)$/i);if(null===s){if(null===(s=n[0].match(/([\*#xyzbsfdeulmr])('?)(\d*)('?)/i)))return;this._twist.exp=s[1],/[XYZ]/.test(this._twist.exp)&&(this._twist.exp=this._twist.exp.toLowerCase()),/[mes]/.test(this._twist.exp)&&(this._twist.exp=this._twist.exp.toUpperCase())}else this._children.push(new p(s[1]));this._twist.reverse=0!=(s[2]+s[4]).length,this._twist.times=0==s[3].length?1:parseInt(s[3]),this._twist.reverse=this._twist.reverse!==t,this._twist.times=this._twist.times*i}else{this._twist.exp=e,this._twist.reverse=t,this._twist.times=i;for(let e of n){var r=new p(e);this._children.push(r)}}}parse(e=!1){e=this._twist.reverse!==e;let t=[];if(0!==this._children.length)for(var i=0;i<this._twist.times;i++)for(var n=0;n<this._children.length;n++){var s=(e?this._children[this._children.length-n-1]:this._children[n]).parse(e);for(let e of s)t.push(e)}else{let i=new c;i.exp=this._twist.exp,i.reverse=e,i.times=this._twist.times,t.push(i)}return t}}class u extends o.Group{constructor(e,t,i){super(),this._cubelets=[],this.name=e,this.indices=t,this.axis=i,this.matrixAutoUpdate=!1,this.updateMatrix()}set angle(e){this.setRotationFromAxisAngle(this.axis,e),this._angle=e,this.updateMatrix()}get angle(){return this._angle}get exp(){let e=this._angle>0,t=Math.round(Math.abs(this._angle)/(Math.PI/2)),i=new c;return i.exp=this.name,i.times=t,i.reverse=e,i.format}hold(e){this._angle=0;for(let t of this.indices){let i=e.cube.cubelets[t];this._cubelets.push(i),e.cube.remove(i),this.add(i)}e.lock=!0}revert(e){let t=-this._angle;if(0===t){for(;;){let t=this._cubelets.pop();if(void 0===t)break;this.remove(t),e.cube.add(t),e.cube.cubelets[t.index]=t}this._angle=0,e.lock=!1,e.dirty=!0}else{var i=e.duration*Math.min(1,Math.abs(t)/Math.PI);i/=4,e.tweener.tween(this.angle,this.angle+t,i,t=>{this.angle=t,e.dirty=!0},()=>{this.revert(e)})}}adjust(e){let t=Math.round(this._angle/(Math.PI/2))*(Math.PI/2)-this._angle;if(0===t){for(;;){let t=this._cubelets.pop();if(void 0===t)break;this.rotate(t),this.remove(t),e.cube.add(t),e.cube.cubelets[t.index]=t}e.lock=!1,e.dirty=!0,this._angle=0}else{var i=e.duration*Math.min(1,Math.abs(t)/Math.PI);e.tweener.tween(this.angle,this.angle+t,i,t=>{this.angle=t,e.dirty=!0},()=>{this.adjust(e)})}}rotate(e){e.rotateOnWorldAxis(this.axis,this._angle),e.vector=e.vector.applyAxisAngle(this.axis,this._angle),e.updateMatrix()}}u.GROUPS={L:new u("L",[6,15,24,3,12,21,0,9,18],new o.Vector3(-1,0,0)),D:new u("D",[18,19,20,9,10,11,0,1,2],new o.Vector3(0,-1,0)),B:new u("B",[8,7,6,5,4,3,2,1,0],new o.Vector3(0,0,-1)),R:new u("R",[26,17,8,23,14,5,20,11,2],new o.Vector3(1,0,0)),U:new u("U",[6,7,8,15,16,17,24,25,26],new o.Vector3(0,1,0)),F:new u("F",[24,25,26,21,22,23,18,19,20],new o.Vector3(0,0,1)),l:new u("l",[0,3,6,9,12,15,18,21,24,1,4,7,10,13,16,19,22,25],new o.Vector3(-1,0,0)),d:new u("d",[0,1,2,9,10,11,18,19,20,3,4,5,12,13,14,21,22,23],new o.Vector3(0,-1,0)),b:new u("b",[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17],new o.Vector3(0,0,-1)),r:new u("r",[2,5,8,11,14,17,20,23,26,1,4,7,10,13,16,19,22,25],new o.Vector3(1,0,0)),u:new u("u",[6,7,8,15,16,17,24,25,26,3,4,5,12,13,14,21,22,23],new o.Vector3(0,1,0)),f:new u("f",[18,19,20,21,22,23,24,25,26,9,10,11,12,13,14,15,16,17],new o.Vector3(0,0,1)),M:new u("M",[1,4,7,10,13,16,19,22,25],new o.Vector3(-1,0,0)),E:new u("E",[3,4,5,12,13,14,21,22,23],new o.Vector3(0,-1,0)),S:new u("S",[9,10,11,12,13,14,15,16,17],new o.Vector3(0,0,1)),x:new u("x",[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26],new o.Vector3(1,0,0)),y:new u("y",[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26],new o.Vector3(0,1,0)),z:new u("z",[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26],new o.Vector3(0,0,1))};class d extends o.Group{constructor(){super(),this.cubelets=[],this._initial=[];for(var e=0;e<27;e++){let t=new l(e);this.cubelets.push(t),this._initial.push(t),this.add(t)}this.matrixAutoUpdate=!1,this.updateMatrix()}compare(e,t){return e.index-t.index}reset(){for(let e of this.cubelets)e.setRotationFromEuler(new o.Euler(0,0,0)),e.index=e.initial,e.updateMatrix();this.cubelets.sort(this.compare)}stick(){for(let e of this.cubelets)e.stick()}strip(e,t){for(let i of t)this._initial[e].strip(i)}get state(){let e=[];for(let t of u.GROUPS.U.indices)e.push(this.cubelets[t].getColor(n.U));for(let t of u.GROUPS.R.indices)e.push(this.cubelets[t].getColor(n.R));for(let t of u.GROUPS.F.indices)e.push(this.cubelets[t].getColor(n.F));for(let t of u.GROUPS.D.indices)e.push(this.cubelets[t].getColor(n.D));for(let t of u.GROUPS.L.indices)e.push(this.cubelets[t].getColor(n.L));for(let t of u.GROUPS.B.indices)e.push(this.cubelets[t].getColor(n.B));return e.join("")}}class m{constructor(){this._tweens=[],this.loop()}loop(){requestAnimationFrame(this.loop.bind(this)),this.update()}tween(e,t,i,n,s){this._tweens.push(new v(e,t,i,n,s))}update(){if(0===this._tweens.length)return!1;for(var e=0;e<this._tweens.length;)this._tweens[e].update()?e++:this._tweens.splice(e,1);return!0}clear(){for(const e of this._tweens)e.finish();this._tweens.splice(0,this._tweens.length)}}class v{constructor(e,t,i,n,s){this._value=0,this._begin=e,this._end=t,this._duration=i,this._update=n,this._finish=s}finish(){this._update(this._end),this._finish()}update(){this._value++;let e=this._value/this._duration;e=e>1?1:e;let t=1- --e*e;return this._update(this._begin+(this._end-this._begin)*t),1!=t||(this._finish(),!1)}}class f{}class g{constructor(e){this._dragging=!1,this._rotating=!1,this._angle=0,this._onMouseDown=(e=>{if(this._game.lock)return!0;this._down.x=e.offsetX,this._down.y=e.offsetY,this._handleDown()}),this._onMouseMove=(e=>{this._move.x=e.offsetX,this._move.y=e.offsetY,this._handleMove()}),this._onMouseUp=(e=>{this._handleUp()}),this._onMouseOut=(e=>{this._handleUp()}),this._onTouch=(e=>{let t=e.changedTouches[0];switch(e.type){case"touchstart":if(this._game.lock)return!0;this._down.x=t.clientX,this._down.y=t.clientY,this._handleDown();break;case"touchmove":this._move.x=t.clientX,this._move.y=t.clientY,this._handleMove();break;case"touchend":this._handleUp();break;default:return}}),this._game=e,this._ray=new o.Ray,this._down=new o.Vector2(0,0),this._move=new o.Vector2(0,0),this._matrix=new o.Matrix4,this._holder=new f,this._holder.vector=new o.Vector3,this._vector=new o.Vector3,this._planes=[new o.Plane(new o.Vector3(1,0,0),3*-R.SIZE/64),new o.Plane(new o.Vector3(0,1,0),3*-R.SIZE/64),new o.Plane(new o.Vector3(0,0,1),3*-R.SIZE/64)],this._game.canvas.addEventListener("mousedown",this._onMouseDown),this._game.canvas.addEventListener("mousemove",this._onMouseMove),this._game.canvas.addEventListener("mouseup",this._onMouseUp),this._game.canvas.addEventListener("mouseout",this._onMouseOut),this._game.canvas.addEventListener("touchstart",this._onTouch,!0),this._game.canvas.addEventListener("touchmove",this._onTouch,!0),this._game.canvas.addEventListener("touchend",this._onTouch,!0),this.loop()}loop(){requestAnimationFrame(this.loop.bind(this)),this.update()}update(){if(this._rotating&&this._group.angle!=this._angle){let e=(this._angle-this._group.angle)/2,t=Math.PI/this._game.duration*4;e>t&&(e=t),e<-t&&(e=-t),this._group.angle+=e,this._game.dirty=!0}}_intersect(e,t){var i=e.x/this._game.canvas.clientWidth*2-1,n=-e.y/this._game.canvas.clientHeight*2+1;this._ray.origin.setFromMatrixPosition(this._game.camera.matrixWorld),this._ray.direction.set(i,n,.5).unproject(this._game.camera).sub(this._ray.origin).normalize(),this._ray.applyMatrix4(this._matrix.identity().getInverse(this._game.scene.matrix));var s=new o.Vector3;return this._ray.intersectPlane(t,s),s}_handleDown(){this._dragging=!0,this._holder.index=-1,this._planes.some(e=>{var t=this._intersect(this._down,e);if(null!==t&&Math.abs(t.x)<=48.01&&Math.abs(t.y)<=48.01&&Math.abs(t.z)<=48.01){this._holder.plane=e;var i=Math.ceil(Math.round(t.x)/32-.5),n=Math.ceil(Math.round(t.y)/32-.5),s=Math.ceil(Math.round(t.z)/32-.5);return this._game.enable&&i<2&&i>-2&&n<2&&n>-2&&s<2&&s>-2?this._holder.index=9*(s+1)+3*(n+1)+(i+1):this._holder.index=-1,!0}return!1},this),this._game.dirty=!0}_handleMove(){if(this._dragging){var e=this._move.x-this._down.x,t=this._move.y-this._down.y,i=Math.sqrt(e*e+t*t);if(Math.min(this._game.canvas.clientWidth,this._game.canvas.clientHeight)/i>100)return!0;if(this._game.lock)return this._dragging=!1,this._rotating=!1,!0;if(this._dragging=!1,this._rotating=!0,-1===this._holder.index)e*e>t*t?this._group=u.GROUPS.y:this._down.x<this._game.canvas.clientWidth/2?this._group=u.GROUPS.x:this._group=u.GROUPS.z;else{var n=this._intersect(this._down,this._holder.plane),s=this._intersect(this._move,this._holder.plane);this._vector.subVectors(s,n);var r=this._vector.x,o=this._vector.y,a=this._vector.z,l=Math.max(Math.abs(r),Math.abs(o),Math.abs(a));r=Math.abs(r)===l?r:0,o=Math.abs(o)===l?o:0,a=Math.abs(a)===l?a:0,this._vector.set(r,o,a),this._holder.vector.copy(this._vector.multiply(this._vector).normalize()),this._game.twister.match(this._holder).some(e=>0===e.axis.dot(this._vector)&&(this._group=e,!0),this),this._vector.crossVectors(this._holder.vector,this._holder.plane.normal),this._holder.vector.multiplyScalar(this._vector.x+this._vector.y+this._vector.z)}this._group.hold(this._game)}if(this._rotating)if(-1===this._holder.index){e=this._move.x-this._down.x,t=this._move.y-this._down.y;this._group===u.GROUPS.y?this._angle=e/Math.min(this._game.canvas.clientWidth,this._game.canvas.clientHeight)*Math.PI*2:this._group===u.GROUPS.x?this._angle=t/Math.min(this._game.canvas.clientWidth,this._game.canvas.clientHeight)*Math.PI*2:this._angle=-t/Math.min(this._game.canvas.clientWidth,this._game.canvas.clientHeight)*Math.PI*2}else{n=this._intersect(this._down,this._holder.plane),s=this._intersect(this._move,this._holder.plane);this._vector.subVectors(s,n).multiply(this._holder.vector),this._angle=-(this._vector.x+this._vector.y+this._vector.z)*(this._group.axis.x+this._group.axis.y+this._group.axis.z)/R.SIZE*Math.PI*8}}_handleUp(){if(this._rotating&&this._group&&null!==this._group)if(this._game.enable){for(let e of this._game.callbacks)e(this._group.exp);this._group.adjust(this._game)}else this._group.revert(this._game);this._holder.index=-1,this._dragging=!1,this._rotating=!1,this._game.dirty=!0}}class R{constructor(){this.lock=!1,this.enable=!0,this.dirty=!0,this.duration=60,this.callbacks=[],this.scale=1,this.scene=new o.Scene,this.scene.rotation.x=Math.PI/8,this.scene.rotation.y=Math.PI/16-Math.PI/4,this.camera=new o.PerspectiveCamera(50,1,1,R.SIZE),this.camera.position.x=0,this.camera.position.y=0,this.camera.position.z=R.SIZE/3,this.tweener=new m,this.twister=new h(this),this.cube=new d,this.scale=1,this.scene.add(this.cube);for(let e in u.GROUPS)this.scene.add(u.GROUPS[e]);this.renderer=new o.WebGLRenderer({antialias:!0}),this.renderer.setClearColor(16777215),this.renderer.setPixelRatio(window.devicePixelRatio),this.canvas=this.renderer.domElement,this.controller=new g(this),this.loop()}resize(e,t){this.camera.aspect=e/t;let i=t/Math.min(e,t)*R.SIZE/3,n=2*Math.atan(i/R.SIZE)*180/Math.PI;this.camera.fov=n*this.scale,this.camera.lookAt(this.scene.position),this.camera.updateProjectionMatrix(),this.renderer.setSize(e,t,!0),this.dirty=!0}render(){this.dirty&&(this.renderer.render(this.scene,this.camera),this.dirty=!1)}loop(){requestAnimationFrame(this.loop.bind(this)),this.render()}}R.SIZE=1024;var U=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},x=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let y=class extends s.default{constructor(){super(...arguments),this.layers=0,this.operations=[["L'","B","U'","U","B'","R","L","D","F'","F","D'","R'"],["M'","S'","E","E'","S","M'","M","E","S'","S","E'","M"],["l'","b","u'","u","b'","r","l","d","f'","f","d'","r'"],["x","z'","y'","y","z","x","x'","y'","z'","z","y","x'"]]}get exps(){return this.operations[this.layers]}twist(e){this.game.twister.twist(e)}};U([Object(r.Inject)("game"),x("design:type",R)],y.prototype,"game",void 0),U([Object(r.Prop)({default:!1}),x("design:type",Boolean)],y.prototype,"show",void 0);var w=y=U([Object(r.Component)({template:i(6)})],y),b=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},_=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let L=class extends s.default{constructor(){super(...arguments),this.progress=0,this.playing=!1,this.dialog=!1,this.type=Number(window.localStorage.getItem("script.type")||0),this.index=Number(window.localStorage.getItem("script.index")||1),this.scripts=[{name:"F2L",strips:[{indexs:[6,7,8,15,16,17,24,25,26],faces:[0,1,2,3,4,5]}],scripts:[{name:"F2L-01",exp:"URU'R'"},{name:"F2L-02",exp:"x(UR'U'l)"},{name:"F2L-03",exp:"y'(R'U'R)y"},{name:"F2L-04",exp:"(RUR')"},{name:"F2L-05",exp:"y'R2y'(R'U'RU)yR2y"},{name:"F2L-06",exp:"R2y(RUR'U')y'R2"},{name:"F2L-07",exp:"U'(RU'U')(R'U2)(RU'R')"},{name:"F2L-08",exp:"d(R'U2)(RU'U')(R'UR)y"},{name:"F2L-09",exp:"(R2U)y(RU'R'F2)y'"},{name:"F2L-10",exp:"y'(R2U')(F'UF)R2y"},{name:"F2L-11",exp:"y'(RU'U')R'2U'R2U'R'y"},{name:"F2L-12",exp:"(R'U2)(R2'U)(R2'UR)"},{name:"F2L-13",exp:"d(R'URU')(R'U'R)y"},{name:"F2L-14",exp:"U'(RU'R'U)(RUR')"},{name:"F2L-15",exp:"y'(R'U)(Rd'U')(RUR')"},{name:"F2L-16",exp:"(RU'R'U)(dR'U'R)y"},{name:"F2L-17",exp:"(RU'U')(R'U'RU)R'"},{name:"F2L-18",exp:"y'(R'U2)(RUR'U')Ry"},{name:"F2L-19",exp:"U(RU'U')(R'URU')R'"},{name:"F2L-20",exp:"d'zU'(R2U)(R'U'RU)z'y'"},{name:"F2L-21",exp:"Ry(RU2R'F')y'"},{name:"F2L-22",exp:"F'L'U2rUx'"},{name:"F2L-23",exp:"(U2R2'U2)(R'U'RU'R2)"},{name:"F2L-24",exp:"y'(U2R2'U2)(RUR'UR2)y"},{name:"F2L-25",exp:"yU'(L'ULU)y'(RU'R')"},{name:"F2L-26",exp:"(URU'R'U')y'(R'UR)y"},{name:"F2L-27",exp:"(RU'R'U)(RU'R')"},{name:"F2L-28",exp:"y'(R'U)(RU')(R'UR)y"},{name:"F2L-29",exp:"y'(R'U'RU)(R'U'R)y"},{name:"F2L-30",exp:"(RUR'U')(RUR')"},{name:"F2L-31",exp:"(RU'R')y'(R'U2R)y"},{name:"F2L-32",exp:"(RUR'U')2(RUR')"},{name:"F2L-33",exp:"U'(RU')(R'U2)(RU'R')"},{name:"F2L-34",exp:"U'(RU'U'R'U)(RUR')"},{name:"F2L-35",exp:"U'(RUR')d(R'U'R)y"},{name:"F2L-36",exp:"d(R'U'R)d'(RUR')"},{name:"F2L-37",exp:"(RU'2R'U)2y'(R'U'R)y"},{name:"F2L-38",exp:"(RUR'U')(RU'U'R'U')(RUR')"},{name:"F2L-39",exp:"(RU'U')(RUR'U)(RU'U')R2"},{name:"F2L-40",exp:"(RU'RU)y(RU'R'F2)y'"},{name:"F2L-41",exp:"R2y(RUR'U')y'(R'UR')"}]},{name:"OLL",strips:[{indexs:[6,7,8,15,16,17,24,25,26],faces:[0,1,2,4,5]}],scripts:[{name:"OLL-01",exp:"(RU'2)(R2'FRF')U2(R'FRF')"},{name:"OLL-02",exp:"(FRUR'U'F')(fRUR'U'f')"},{name:"OLL-03",exp:"f(RUR'U')f'U'F(RUR'U')F'"},{name:"OLL-04",exp:"f(RUR'U')yx(R'F)(RUR'U')F'y'"},{name:"OLL-05",exp:"(r'U2)(RUR'U)r"},{name:"OLL-06",exp:"(rU'2)(R'U'RU'r')"},{name:"OLL-07",exp:"rUR'URU'2r'"},{name:"OLL-08",exp:"r'U'RU'R'U2r"},{name:"OLL-09",exp:"(R'U'R)y'x'(RU')(R'F)(RUR')xy"},{name:"OLL-10",exp:"(RUR'U)(R'FRF')(RU'2R')"},{name:"OLL-11",exp:"r'(R2UR'U)(RU'2R'U)(rR')"},{name:"OLL-12",exp:"L2lU'z(UR'U')(R2UR')z'rR'"},{name:"OLL-13",exp:"(rU'r'U')(rUr')(F'UF)"},{name:"OLL-14",exp:"R'FRUR'F'R(FU'F')"},{name:"OLL-15",exp:"(r'U'r)(R'U'RU)(r'Ur)"},{name:"OLL-16",exp:"RBR'LUL'U'RB'R'"},{name:"OLL-17",exp:"(RUR'U)(R'FRF'U2)R'FRF'"},{name:"OLL-18",exp:"F(RUR'd)(R'U2)(R'FRF')y"},{name:"OLL-19",exp:"R'U2FRUR'U'y'R2U'2RBy"},{name:"OLL-20",exp:"r'(RU)(RUR'U'r2)(R2'U)(RU')r'"},{name:"OLL-21",exp:"(RU'2)(R'U'RUR'U')(RU'R')"},{name:"OLL-22",exp:"RU'2(R'2U')(R2U')R'2U'2R"},{name:"OLL-23",exp:"(R2D')(RU2)(R'D)(RU2R)"},{name:"OLL-24",exp:"(rUR'U')(r'FRF')"},{name:"OLL-25",exp:"F'(rUR'U')(r'FR)"},{name:"OLL-26",exp:"RU'2R'U'RU'R'"},{name:"OLL-27",exp:"R'U2RUR'UR"},{name:"OLL-28",exp:"(rUR'U')(r'RU)(RU'R')"},{name:"OLL-29",exp:"(R2U'R)F(R'U)(R2U')(R'F'R)"},{name:"OLL-30",exp:"(R2UR'B')(RU')(R2'U)(lUl')"},{name:"OLL-31",exp:"(r'F'UF)(LF'L'U'r)"},{name:"OLL-32",exp:"(RU)(B'U')(R'URBR')"},{name:"OLL-33",exp:"(RUR'U')(R'FRF')"},{name:"OLL-34",exp:"(R'U'RU)x'z'(RU)(L'U')rR'y"},{name:"OLL-35",exp:"RU'2R2'FRF'(RU'2R')"},{name:"OLL-36",exp:"R'U'RU'R'URUlU'R'Ux"},{name:"OLL-37",exp:"F(RU'R'U'RU)(R'F')"},{name:"OLL-38",exp:"(RUR'U)(RU'R'U')(R'FRF')"},{name:"OLL-39",exp:"(LF'L'U'LU)(FU'L')"},{name:"OLL-40",exp:"(R'FRUR'U')(F'UR)"},{name:"OLL-41",exp:"RU'R'U2RUyRU'R'U'F'y'"},{name:"OLL-42",exp:"(R'URU'2R'U')(F'U)(FUR)"},{name:"OLL-43",exp:"(B'U')(R'URB)"},{name:"OLL-44",exp:"f(RUR'U')f'"},{name:"OLL-45",exp:"F(RUR'U')F'"},{name:"OLL-46",exp:"(R'U')R'FRF'(UR)"},{name:"OLL-47",exp:"B'(R'U'RU)2B"},{name:"OLL-48",exp:"F(RUR'U')2F'"},{name:"OLL-49",exp:"RB'(R2F)(R2B)R2F'R"},{name:"OLL-50",exp:"L'B(L2F')(L2B')L2FL'"},{name:"OLL-51",exp:"f(RUR'U')2f'"},{name:"OLL-52",exp:"R'U'RU'R'dR'UlUxy"},{name:"OLL-53",exp:"(r'U2)(RUR'U')(RUR'U)r"},{name:"OLL-54",exp:"(rU'2)(R'U'RUR'U')(RU'r')"},{name:"OLL-55",exp:"(RU'2)(R'2U')RU'R'U2(FRF')"},{name:"OLL-56",exp:"F(RUR'U')(RF')(rUR'U')r'"},{name:"OLL-57",exp:"(RUR'U'r)(R'U)(RU'r')"}]},{name:"PLL",strips:[],scripts:[{name:"PLL-Aa",exp:"x(R2U'2)(R'D')(RU'2)(R'DR')x'"},{name:"PLL-Ab",exp:"x(RD'R)U2R'DRU2R'2x'"},{name:"PLL-E",exp:"x'(RU'R'DRUR')u2'(R'URDR'U'R)x'y2"},{name:"PLL-F",exp:"(R'U'F')(RUR'U')(R'FR2U'R'U')(RUR'UR)"},{name:"PLL-Ga",exp:"(R2uR')(UR'U'Ru')(R'2F'UF)"},{name:"PLL-Gb",exp:"(R'd'F)(R2u)(R'URU'Ru'R'2)y'"},{name:"PLL-Gc",exp:"(R'2u'RU'R)(UR'u)(R2fR'f')"},{name:"PLL-Gd",exp:"(RUR')y'(R2u'RU'R'U)(R'uR2)y"},{name:"PLL-H",exp:"M2UM2U2M2UM2"},{name:"PLL-Ja",exp:"z(U'RD')(R2UR'U')(R2UDR')z'"},{name:"PLL-Jb",exp:"(RUR'F')(RUR'U')(R'F)(R2U'R')"},{name:"PLL-Na",exp:"z(R'UR')z'(RU2L'UR')z(UR')z'(RU2L'UR')"},{name:"PLL-Nb",exp:"z(U'RD')(R2UR'U')z'(RUR')z(R2UR')z'(RU')"},{name:"PLL-Ra",exp:"(RU'2)(R'U2)(RB'R'U')(RURBR2'U)"},{name:"PLL-Rb",exp:"(R'U2)(RU'2)(R'FRUR'U')(R'F'R2U')"},{name:"PLL-T",exp:"(RUR'U')(R'F)(R2U'R'U'RUR'F')"},{name:"PLL-Ua",exp:"(RU'R)(URUR)(U'R'U'R2)"},{name:"PLL-Ub",exp:"(R2U)(RUR'U')(R'U')(R'UR')"},{name:"PLL-V",exp:"(R'UR'U'yx2)(R'UR'U'yx)(U2R'U'RUR)x"},{name:"PLL-Y",exp:"F(RU'R'U')(RUR'F')(RUR'U')(R'FRF')"},{name:"PLL-Z",exp:"(R'U'RU'R)(URU'R'UR)(UR2U'R')U2"}]}],this.timeoutTask=0,this.intervalTask=0,this.exp="",this.actions=new p(this.exp).parse()}onShowChange(e,t){this.stick(),e?(this.onTypeChange(),this.onIndexChange(),this.onScriptChange(),this.onExpChange(this.exp)):this.playing=!1}play(){if(this.progress==this.actions.length&&(this.playing=!1),this.playing){let e=this.actions[this.progress];this.progress++,this.game.twister.twist(e.exp,e.reverse,e.times,this.play,!1)}}forward(){if(this.progress==this.actions.length)return;this.playing=!1,this.game.twister.clear();let e=this.actions[this.progress];this.progress++,this.game.twister.twist(e.exp,e.reverse,e.times)}backward(){if(0==this.progress)return;this.playing=!1,this.game.twister.clear(),this.playing=!1,this.progress--;let e=this.actions[this.progress];this.game.twister.twist(e.exp,!e.reverse,e.times)}stick(){this.game.cube.stick(),this.game.dirty=!0}strip(){let e=this.scripts[this.type].strips;for(let t of e)for(let e of t.indexs)this.game.cube.strip(e,t.faces);this.game.dirty=!0}onIndexChange(){let e=this.scripts[this.type].scripts.length;for(this.index;this.index<1;)this.index=this.index+e;for(;this.index>e;)this.index=this.index-e;window.localStorage.setItem("script.index",String(this.index))}onTypeChange(e=this.type,t=this.type){window.localStorage.setItem("script.type",String(this.type)),e!=t&&(this.index=1),this.stick(),this.strip()}get script(){let e=this.scripts[this.type].scripts[this.index-1],t={name:"",exp:""};return t.name=e.name,t.exp=e.exp,t}indexDown(e){return clearTimeout(this.timeoutTask),this.timeoutTask=setTimeout(()=>{this.timeoutTask=0,clearTimeout(this.intervalTask),this.intervalTask=setInterval(()=>{this.index=this.index+e},100)},500),!0}indexUp(e){return 0!=this.timeoutTask&&(clearTimeout(this.timeoutTask),this.index=this.index+e,this.timeoutTask=0),0!=this.intervalTask&&(clearInterval(this.intervalTask),this.intervalTask=0),!0}onExpChange(e){this.playing=!1;let t=window.localStorage,i=t.getItem(this.script.name);e==this.script.exp?t.removeItem(this.script.name):e!=i&&t.setItem(this.script.name,e),this.actions=new p(this.exp).parse(),this.init()}onScriptChange(){this.playing=!1;let e=window.localStorage;this.exp=e.getItem(this.script.name)||this.script.exp}toggle(){this.playing?(this.playing=!1,this.game.twister.clear()):(this.playing=!this.playing,this.play())}init(){this.progress=0,this.playing=!1,this.game.twister.clear(),this.game.twister.twist("#"),this.game.twister.twist(this.exp,!0,1,null,!0)}};b([Object(r.Inject)("game"),_("design:type",R)],L.prototype,"game",void 0),b([Object(r.Prop)({default:!1}),_("design:type",Boolean)],L.prototype,"show",void 0),b([Object(r.Watch)("show"),_("design:type",Function),_("design:paramtypes",[Boolean,Boolean]),_("design:returntype",void 0)],L.prototype,"onShowChange",null),b([Object(r.Watch)("index"),_("design:type",Function),_("design:paramtypes",[]),_("design:returntype",void 0)],L.prototype,"onIndexChange",null),b([Object(r.Watch)("type"),_("design:type",Function),_("design:paramtypes",[Number,Number]),_("design:returntype",void 0)],L.prototype,"onTypeChange",null),b([Object(r.Watch)("exp"),_("design:type",Function),_("design:paramtypes",[String]),_("design:returntype",void 0)],L.prototype,"onExpChange",null),b([Object(r.Watch)("script"),_("design:type",Function),_("design:paramtypes",[]),_("design:returntype",void 0)],L.prototype,"onScriptChange",null);var F=L=b([Object(r.Component)({template:i(7)})],L),M=i(4),k=i.n(M),S=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},O=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let T=class extends s.default{constructor(){super(...arguments),this.worker=new k.a,this.working=!1,this.scrambles=[],this.exp=window.localStorage.getItem("timer.exp")||"",this.start=0,this.lapse=Number(window.localStorage.getItem("timer.lapse")||0),this.timeoutTask=0,this.intervalTask=0,this.press=!1}mounted(){let e=window.localStorage,t=JSON.parse(e.getItem("timer.scrambles")||"[]");t instanceof Array&&(this.scrambles=t),this.worker.addEventListener("message",e=>{"init"==e.data.action?(this.working=!0,this.worker.postMessage({action:"scramble"})):"scramble"==e.data.action&&(this.scrambles.push(e.data.data),this.working=!1)}),this.worker.postMessage({action:"init"}),this.working=!0}onScramblesChange(){window.localStorage.setItem("timer.scrambles",JSON.stringify(this.scrambles)),!this.working&&this.scrambles.length<16&&(this.working=!0,this.worker.postMessage({action:"scramble"})),""==this.exp&&this.scrambles.length>0&&(this.exp=this.scrambles.shift()||"")}onShowChange(e,t){e&&this.init()}init(){""!=this.exp&&(this.game.twister.twist("#x2",!1,1,null,!0),this.game.twister.twist(this.exp,!1,1,null,!0))}onExpChange(e,t){window.localStorage.setItem("timer.exp",this.exp),this.show&&this.init()}get time(){let e=Math.floor(this.lapse/1e3/60),t=Math.floor(this.lapse%6e4/1e3),i=this.lapse%1e3;return(0==e?"":String(e)+":")+((0==e?"":"0")+String(t)).substr(-2)+":"+(0==this.intervalTask?("0"+String(Math.floor(i/10))).substr(-2):Math.floor(i/100))}get lock(){return!(!this.press&&0==this.intervalTask&&0==this.timeoutTask)}random(){this.lock||(0==this.scrambles.length?this.exp="":this.exp=this.scrambles.shift()||"")}down(){if(""!=this.exp)if(0!=this.intervalTask){this.press=!1,clearInterval(this.intervalTask),this.intervalTask=0;let e=new Date;this.lapse=e.getTime()-this.start,window.localStorage.setItem("timer.lapse",String(this.lapse)),this.start=0}else this.press=!0,clearTimeout(this.timeoutTask),this.timeoutTask=setTimeout(()=>{this.lapse=0,this.timeoutTask=0},550)}get color(){return this.press?0!=this.timeoutTask?"red--text":"green--text":"black--text"}up(){if(this.press&&0==this.timeoutTask){let e=new Date;this.start=e.getTime(),clearInterval(this.intervalTask),this.intervalTask=setInterval(()=>{let e=new Date;this.lapse=e.getTime()-this.start},100)}else clearTimeout(this.timeoutTask),this.timeoutTask=0;this.press=!1}};S([Object(r.Inject)("game"),O("design:type",R)],T.prototype,"game",void 0),S([Object(r.Watch)("scrambles"),O("design:type",Function),O("design:paramtypes",[]),O("design:returntype",void 0)],T.prototype,"onScramblesChange",null),S([Object(r.Prop)({default:!1}),O("design:type",Boolean)],T.prototype,"show",void 0),S([Object(r.Watch)("show"),O("design:type",Function),O("design:paramtypes",[Boolean,Boolean]),O("design:returntype",void 0)],T.prototype,"onShowChange",null),S([Object(r.Watch)("exp"),O("design:type",Function),O("design:paramtypes",[String,String]),O("design:returntype",void 0)],T.prototype,"onExpChange",null);var D=T=S([Object(r.Component)({template:i(9)})],T),C=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},P=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let E=class extends s.default{constructor(){super(...arguments),this.game=new R,this.init=!1,this.angle=1,this.size=0,this.speed=0,this.exp="",this.expTask=0,this.mode="",this.keyboard=!1,this.menu=!1,this.about=!1,this.tune=!1}onAngleChange(){window.localStorage.setItem("angle",String(this.angle)),this.game.scene.rotation.y=-Math.PI/4+this.angle*Math.PI/16,this.game.dirty=!0}onSizeChange(){window.localStorage.setItem("size",String(this.size)),this.game.scale=Math.pow(2,-this.size/8),this.resize()}onSpeedChange(){window.localStorage.setItem("speed",String(this.speed)),this.game.duration=50-10*this.speed,this.init&&(this.game.twister.clear(),this.game.twister.twist("R"),this.game.twister.twist("R",!0,1,null,!0))}resize(){if(this.$refs.cuber instanceof HTMLElement&&this.$refs.panel instanceof HTMLElement){let e=this.$refs.cuber,t=this.$refs.panel.clientHeight,i=window.innerHeight-t;this.game.resize(e.clientWidth,i)}}mounted(){if(this.$refs.cuber instanceof Element){this.$refs.cuber.appendChild(this.game.canvas),this.resize()}let e=window.localStorage;this.mode=window.localStorage.getItem("mode")||"play",this.keyboard="true"==window.localStorage.getItem("keyboard"),this.speed=Number(e.getItem("speed")||0),this.angle=Number(window.localStorage.getItem("angle")||1),this.size=Number(window.localStorage.getItem("size")||2),this.game.callbacks.push(this.onTwist),this.$nextTick(()=>{this.init=!0})}onTwist(e){this.exp=e,clearTimeout(this.expTask),this.expTask=setTimeout(()=>{this.exp=""},500)}onKeyboardChange(){window.localStorage.setItem("keyboard",String(this.keyboard)),this.game.enable="play"==this.mode&&!this.keyboard,this.$nextTick(this.resize)}onModeChange(e,t){window.localStorage.setItem("mode",this.mode),this.game.enable="play"==this.mode&&!this.keyboard,this.menu=!1,this.game.twister.clear(),this.$nextTick(this.resize)}reset(){window.localStorage.clear(),window.location.reload()}};C([Object(r.Provide)("game"),P("design:type",R)],E.prototype,"game",void 0),C([Object(r.Watch)("angle"),P("design:type",Function),P("design:paramtypes",[]),P("design:returntype",void 0)],E.prototype,"onAngleChange",null),C([Object(r.Watch)("size"),P("design:type",Function),P("design:paramtypes",[]),P("design:returntype",void 0)],E.prototype,"onSizeChange",null),C([Object(r.Watch)("speed"),P("design:type",Function),P("design:paramtypes",[]),P("design:returntype",void 0)],E.prototype,"onSpeedChange",null),C([Object(r.Watch)("keyboard"),P("design:type",Function),P("design:paramtypes",[]),P("design:returntype",void 0)],E.prototype,"onKeyboardChange",null),C([Object(r.Watch)("mode"),P("design:type",Function),P("design:paramtypes",[String,String]),P("design:returntype",void 0)],E.prototype,"onModeChange",null);var I=E=C([Object(r.Component)({template:i(10),components:{"keyboard-panel":w,"script-panel":F,"timer-panel":D}})],E),B=i(5),j=i.n(B);i(11),i(12),i(13);s.default.use(j.a),new s.default({el:"#app",render:e=>e(I)})}]);