!function(t){var e={};function i(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/dist/",i(i.s=32)}([function(t,e,i){t.exports=i(4)(7)},function(t,e,i){t.exports=i(4)(11)},function(t,e,i){t.exports=i(4)(1)},function(t,e,i){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function a(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var i=e.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var n in i)a(i,n)&&(t[n]=i[n])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var s={arraySet:function(t,e,i,n,a){if(e.subarray&&t.subarray)t.set(e.subarray(i,i+n),a);else for(var s=0;s<n;s++)t[a+s]=e[i+s]},flattenChunks:function(t){var e,i,n,a,s,r;for(n=0,e=0,i=t.length;e<i;e++)n+=t[e].length;for(r=new Uint8Array(n),a=0,e=0,i=t.length;e<i;e++)s=t[e],r.set(s,a),a+=s.length;return r}},r={arraySet:function(t,e,i,n,a){for(var s=0;s<n;s++)t[a+s]=e[i+s]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,s)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,r))},e.setTyped(n)},function(t,e){t.exports=dll_library},function(t,e,i){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(t,e,i){"use strict";var n={};(0,i(3).assign)(n,i(18),i(21),i(11)),t.exports=n},function(t,e,i){"use strict";t.exports=function(t,e,i,n){for(var a=65535&t|0,s=t>>>16&65535|0,r=0;0!==i;){i-=r=i>2e3?2e3:i;do{s=s+(a=a+e[n++]|0)|0}while(--r);a%=65521,s%=65521}return a|s<<16|0}},function(t,e,i){"use strict";var n=function(){for(var t,e=[],i=0;i<256;i++){t=i;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[i]=t}return e}();t.exports=function(t,e,i,a){var s=n,r=a+i;t^=-1;for(var o=a;o<r;o++)t=t>>>8^s[255&(t^e[o])];return-1^t}},function(t,e,i){"use strict";var n=i(3),a=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(t){a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){s=!1}for(var r=new n.Buf8(256),o=0;o<256;o++)r[o]=o>=252?6:o>=248?5:o>=240?4:o>=224?3:o>=192?2:1;function h(t,e){if(e<65537&&(t.subarray&&s||!t.subarray&&a))return String.fromCharCode.apply(null,n.shrinkBuf(t,e));for(var i="",r=0;r<e;r++)i+=String.fromCharCode(t[r]);return i}r[254]=r[254]=1,e.string2buf=function(t){var e,i,a,s,r,o=t.length,h=0;for(s=0;s<o;s++)55296==(64512&(i=t.charCodeAt(s)))&&s+1<o&&56320==(64512&(a=t.charCodeAt(s+1)))&&(i=65536+(i-55296<<10)+(a-56320),s++),h+=i<128?1:i<2048?2:i<65536?3:4;for(e=new n.Buf8(h),r=0,s=0;r<h;s++)55296==(64512&(i=t.charCodeAt(s)))&&s+1<o&&56320==(64512&(a=t.charCodeAt(s+1)))&&(i=65536+(i-55296<<10)+(a-56320),s++),i<128?e[r++]=i:i<2048?(e[r++]=192|i>>>6,e[r++]=128|63&i):i<65536?(e[r++]=224|i>>>12,e[r++]=128|i>>>6&63,e[r++]=128|63&i):(e[r++]=240|i>>>18,e[r++]=128|i>>>12&63,e[r++]=128|i>>>6&63,e[r++]=128|63&i);return e},e.buf2binstring=function(t){return h(t,t.length)},e.binstring2buf=function(t){for(var e=new n.Buf8(t.length),i=0,a=e.length;i<a;i++)e[i]=t.charCodeAt(i);return e},e.buf2string=function(t,e){var i,n,a,s,o=e||t.length,l=new Array(2*o);for(n=0,i=0;i<o;)if((a=t[i++])<128)l[n++]=a;else if((s=r[a])>4)l[n++]=65533,i+=s-1;else{for(a&=2===s?31:3===s?15:7;s>1&&i<o;)a=a<<6|63&t[i++],s--;s>1?l[n++]=65533:a<65536?l[n++]=a:(a-=65536,l[n++]=55296|a>>10&1023,l[n++]=56320|1023&a)}return h(l,n)},e.utf8border=function(t,e){var i;for((e=e||t.length)>t.length&&(e=t.length),i=e-1;i>=0&&128==(192&t[i]);)i--;return i<0?e:0===i?e:i+r[t[i]]>e?i:e}},function(t,e,i){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(t,e,i){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(t,e,i){t.exports=i(4)(12)},function(t,e){t.exports='<v-container fluid grid-list-md text-xs-center v-show="show" style="padding-top: 0%; background: #FAFAFA">\n  <v-layout row wrap>\n    <v-flex xs4>\n      <fast-button block flat outline @tap="twist(\'*\')" class="headline" style="height:2em; min-width: 0%; min-height: 0%; margin: 0%; padding: 0%;">\n        <v-icon large>casino</v-icon>\n      </fast-button>\n    </v-flex>\n    <v-flex xs4>\n      <fast-button block flat outline @tap="twist(\'#\')" class="headline" style="height:2em; min-width: 0%; min-height: 0%; margin: 0%; padding: 0%;">\n        <v-icon large>format_paint</v-icon>\n      </fast-button>\n    </v-flex>\n    <v-flex xs4>\n      <fast-button block flat outline @tap="option.keyboard = false" class="headline" style="height:2em; min-width: 0%; min-height: 0%; margin: 0%; padding: 0%;">\n        <v-icon large>keyboard_hide</v-icon>\n      </fast-button>\n    </v-flex>\n    <v-flex v-for="exp in exps" d-flex xs2>\n      <fast-button block flat outline @tap="twist(exp)" class="headline" style="width:auto; height:2em; min-width: 0%; min-height: 0%; margin: 0%; text-transform:none">{{exp}}\n      </fast-button>\n    </v-flex>\n    <v-flex xs4>\n      <fast-button @tap="layers==1?layers=0:layers=1" :color="layers == 1?\'primary\':\'\'" :outline="layers == 1" block flat outline\n        class="headline" style="height:2em; min-width: 0%; min-height: 0%; margin: 0%;">\n        <v-icon large>view_carousel</v-icon>\n      </fast-button>\n    </v-flex>\n    <v-flex xs4>\n      <fast-button @tap="layers==2?layers=0:layers=2" :color="layers == 2?\'primary\':\'\'" :outline="layers == 2" block flat outline\n        class="headline" style="height:2em; min-width: 0%; min-height: 0%; margin: 0%;">\n        <v-icon large>looks_two</v-icon>\n      </fast-button>\n    </v-flex>\n    <v-flex xs4>\n      <fast-button @tap="layers==3?layers=0:layers=3" :color="layers == 3?\'primary\':\'\'" :outline="layers == 3" block flat outline\n        class="headline" style="height:2em; min-width: 0%; min-height: 0%; margin: 0%;">\n        <v-icon large>looks_3</v-icon>\n      </fast-button>\n    </v-flex>\n  </v-layout>\n</v-container>'},function(t){t.exports=[{name:"F2L",strips:[{indexes:[6,7,8,15,16,17,24,25,26],faces:[0,1,2,3,4,5]}],scripts:[{name:"F2L-01",exp:"URU'R'"},{name:"F2L-02",exp:"y'(U'R'UR)y"},{name:"F2L-03",exp:"y'(R'U'R)y"},{name:"F2L-04",exp:"(RUR')"},{name:"F2L-05",exp:"U'(RUR')U2(RU'R')"},{name:"F2L-06",exp:"d(R'U'R)U2(R'UR)y"},{name:"F2L-07",exp:"U'(RU'2)(R'U2)(RU'R')"},{name:"F2L-08",exp:"d(R'U2)(RU'2)(R'UR)y"},{name:"F2L-09",exp:"y'(UR'U'RU'R'U'R)y"},{name:"F2L-10",exp:"U'(RUR'URUR')"},{name:"F2L-11",exp:"y'(R'URU')(R'URU'2)(R'UR)y"},{name:"F2L-12",exp:"(RU'R'U)(RU'R'U2)(RU'R')"},{name:"F2L-13",exp:"d(R'URU')(R'U'R)y"},{name:"F2L-14",exp:"U'(RU'R'U)(RUR')"},{name:"F2L-15",exp:"(RUR')(U2RU'R'URU'R')"},{name:"F2L-16",exp:"(RU'R'U)(dR'U'R)y"},{name:"F2L-17",exp:"(RU'2)(R'U'RUR')"},{name:"F2L-18",exp:"y'(R'U2)(RUR'U'R)y"},{name:"F2L-19",exp:"U(RU'2)(R'URU')R'"},{name:"F2L-20",exp:"y'(U'R'U2RU')(R'UR)y"},{name:"F2L-21",exp:"(RU'R'U2)(RUR')"},{name:"F2L-22",exp:"y'U2(R'U'RU')(R'UR)y"},{name:"F2L-23",exp:"(RUR'U2)(RUR'U')(RUR')"},{name:"F2L-24",exp:"y'(R'U'RU2)(R'U'RU)(R'U'R)y"},{name:"F2L-25",exp:"yU'(L'ULU)y'(RU'R')"},{name:"F2L-26",exp:"(URU'R'U')y'(R'UR)y"},{name:"F2L-27",exp:"(RU'R'U)(RU'R')"},{name:"F2L-28",exp:"y'(R'U)(RU')(R'UR)y"},{name:"F2L-29",exp:"y'(R'U'RU)(R'U'R)y"},{name:"F2L-30",exp:"(RUR'U')(RUR')"},{name:"F2L-31",exp:"(RU'R')y'(R'U2R)y"},{name:"F2L-32",exp:"(RUR'U')2(RUR')"},{name:"F2L-33",exp:"(RUR'U')(RU'R'URU'R')"},{name:"F2L-34",exp:"U'(RU'2R'U)(RUR')"},{name:"F2L-35",exp:"U'(RUR')d(R'U'R)y"},{name:"F2L-36",exp:"d(R'U'R)d'(RUR')"},{name:"F2L-37",exp:"(RU'2R'U)2y'(R'U'R)y"},{name:"F2L-38",exp:"(RUR'U')(RU2R'U')(RUR')"},{name:"F2L-39",exp:"(RU'R'U)(RU'2R'U)(RU'R')"},{name:"F2L-40",exp:"(RU'R'U')(RU'R')d(R'U'R)y"},{name:"F2L-41",exp:"(RUR'U')(RU'R'U)d(R'U'R)y"}]},{name:"OLL",strips:[{indexes:[6,7,8,15,16,17,24,25,26],faces:[0,1,2,4,5]}],scripts:[{name:"OLL-01",exp:"(RU'2)(R2'FRF')U2(R'FRF')"},{name:"OLL-02",exp:"(FRUR'U'F')(fRUR'U'f')"},{name:"OLL-03",exp:"f(RUR'U')f'U'F(RUR'U')F'"},{name:"OLL-04",exp:"f(RUR'U')yx(R'F)(RUR'U')F'y'"},{name:"OLL-05",exp:"(r'U2)(RUR'U)r"},{name:"OLL-06",exp:"(rU'2)(R'U'RU'r')"},{name:"OLL-07",exp:"rUR'URU'2r'"},{name:"OLL-08",exp:"r'U'RU'R'U2r"},{name:"OLL-09",exp:"(R'U'R)y'x'(RU')(R'F)(RUR')xy"},{name:"OLL-10",exp:"(RUR'U)(R'FRF')(RU'2R')"},{name:"OLL-11",exp:"r'(R2UR'U)(RU'2R'U)(rR')"},{name:"OLL-12",exp:"L2lU'z(UR'U')(R2UR')z'rR'"},{name:"OLL-13",exp:"(rU'r'U')(rUr')(F'UF)"},{name:"OLL-14",exp:"R'FRUR'F'R(FU'F')"},{name:"OLL-15",exp:"(r'U'r)(R'U'RU)(r'Ur)"},{name:"OLL-16",exp:"RBR'LUL'U'RB'R'"},{name:"OLL-17",exp:"(RUR'U)(R'FRF'U2)R'FRF'"},{name:"OLL-18",exp:"F(RUR'd)(R'U2)(R'FRF')y"},{name:"OLL-19",exp:"R'U2FRUR'U'y'R2U'2RBy"},{name:"OLL-20",exp:"r'(RU)(RUR'U'r2)(R2'U)(RU')r'"},{name:"OLL-21",exp:"(RU'2)(R'U'RUR'U')(RU'R')"},{name:"OLL-22",exp:"RU'2(R'2U')(R2U')R'2U'2R"},{name:"OLL-23",exp:"(R2D')(RU2)(R'D)(RU2R)"},{name:"OLL-24",exp:"(rUR'U')(r'FRF')"},{name:"OLL-25",exp:"F'(rUR'U')(r'FR)"},{name:"OLL-26",exp:"RU'2R'U'RU'R'"},{name:"OLL-27",exp:"R'U2RUR'UR"},{name:"OLL-28",exp:"(rUR'U')(r'RU)(RU'R')"},{name:"OLL-29",exp:"(R2U'R)F(R'U)(R2U')(R'F'R)"},{name:"OLL-30",exp:"(R2UR'B')(RU')(R2'U)(lUl')"},{name:"OLL-31",exp:"(r'F'UF)(LF'L'U'r)"},{name:"OLL-32",exp:"(RU)(B'U')(R'URBR')"},{name:"OLL-33",exp:"(RUR'U')(R'FRF')"},{name:"OLL-34",exp:"(R'U'RU)x'z'(RU)(L'U')rR'y"},{name:"OLL-35",exp:"RU'2R2'FRF'(RU'2R')"},{name:"OLL-36",exp:"R'U'RU'R'URUlU'R'Ux"},{name:"OLL-37",exp:"F(RU'R'U'RU)(R'F')"},{name:"OLL-38",exp:"(RUR'U)(RU'R'U')(R'FRF')"},{name:"OLL-39",exp:"(LF'L'U'LU)(FU'L')"},{name:"OLL-40",exp:"(R'FRUR'U')(F'UR)"},{name:"OLL-41",exp:"RU'R'U2RUyRU'R'U'F'y'"},{name:"OLL-42",exp:"(R'URU'2R'U')(F'U)(FUR)"},{name:"OLL-43",exp:"(B'U')(R'URB)"},{name:"OLL-44",exp:"f(RUR'U')f'"},{name:"OLL-45",exp:"F(RUR'U')F'"},{name:"OLL-46",exp:"(R'U')R'FRF'(UR)"},{name:"OLL-47",exp:"B'(R'U'RU)2B"},{name:"OLL-48",exp:"F(RUR'U')2F'"},{name:"OLL-49",exp:"RB'(R2F)(R2B)R2F'R"},{name:"OLL-50",exp:"L'B(L2F')(L2B')L2FL'"},{name:"OLL-51",exp:"f(RUR'U')2f'"},{name:"OLL-52",exp:"R'U'RU'R'dR'UlUxy"},{name:"OLL-53",exp:"(r'U2)(RUR'U')(RUR'U)r"},{name:"OLL-54",exp:"(rU'2)(R'U'RUR'U')(RU'r')"},{name:"OLL-55",exp:"(RU'2)(R'2U')RU'R'U2(FRF')"},{name:"OLL-56",exp:"F(RUR'U')(RF')(rUR'U')r'"},{name:"OLL-57",exp:"(RUR'U'r)(R'U)(RU'r')"}]},{name:"PLL",strips:[],scripts:[{name:"PLL-Aa",exp:"x(R2U'2)(R'D')(RU'2)(R'DR')x'"},{name:"PLL-Ab",exp:"x(RD'R)U2R'DRU2R'2x'"},{name:"PLL-E",exp:"x'(RU'R'DRUR')u2'(R'URDR'U'R)x'y2"},{name:"PLL-F",exp:"(R'U'F')(RUR'U')(R'FR2U'R'U')(RUR'UR)"},{name:"PLL-Ga",exp:"(R2uR')(UR'U'Ru')(R'2F'UF)"},{name:"PLL-Gb",exp:"(R'd'F)(R2u)(R'URU'Ru'R'2)y'"},{name:"PLL-Gc",exp:"(R'2u'RU'R)(UR'u)(R2fR'f')"},{name:"PLL-Gd",exp:"(RUR')y'(R2u'RU'R'U)(R'uR2)y"},{name:"PLL-H",exp:"M2UM2U2M2UM2"},{name:"PLL-Ja",exp:"z(U'RD')(R2UR'U')(R2UDR')z'"},{name:"PLL-Jb",exp:"(RUR'F')(RUR'U')(R'F)(R2U'R')"},{name:"PLL-Na",exp:"z(R'UR')z'(RU2L'UR')z(UR')z'(RU2L'UR')"},{name:"PLL-Nb",exp:"z(U'RD')(R2UR'U')z'(RUR')z(R2UR')z'(RU')"},{name:"PLL-Ra",exp:"(RU'2)(R'U2)(RB'R'U')(RURBR2'U)"},{name:"PLL-Rb",exp:"(R'U2)(RU'2)(R'FRUR'U')(R'F'R2U')"},{name:"PLL-T",exp:"(RUR'U')(R'F)(R2U'R'U'RUR'F')"},{name:"PLL-Ua",exp:"(RU'R)(URUR)(U'R'U'R2)"},{name:"PLL-Ub",exp:"(R2U)(RUR'U')(R'U')(R'UR')"},{name:"PLL-V",exp:"(R'UR'U'yx2)(R'UR'U'yx)(U2R'U'RUR)x"},{name:"PLL-Y",exp:"F(RU'R'U')(RUR'F')(RUR'U')(R'FRF')"},{name:"PLL-Z",exp:"(R'U'RU'R)(URU'R'UR)(UR2U'R')U2"}]}]},function(t,e){t.exports='<v-container fluid grid-list-md text-xs-center v-show="show" style="padding-top: 0%; background: #FAFAFA">\n  <v-layout row wrap>\n    <v-flex xs12 style="display: flex">\n      <template v-for="(group, i) in scripts">\n        <fast-button class="headline" :color="type == i?\'primary\':\'\'" :outline="type == i" flat block style="text-transform:none; min-width: 0%; min-height: 0%; margin: 0%; padding: 0%; height: 2em; flex: 1" @tap="type = i;init();">\n          {{type==i?(progress != 0?\'\':script.name):group.name}}\n          <v-icon large v-show="type == i && (progress != 0)">replay</v-icon>\n        </fast-button>\n      </template>\n    </v-flex>\n    <v-flex xs12>\n      <v-text-field outline single-line hide-details class="headline" :append-icon="exp==script.exp?\'\':\'settings_backup_restore\'" @click:append="exp=script.exp" v-model="exp"></v-text-field>\n    </v-flex>\n    <v-flex xs12 style="padding-left: 5%; padding-right: 5%">\n      <v-slider style="margin: 0%" readonly hide-details thumb-label="false" ticks="always" v-model="progress" :max="actions.length"></v-slider>\n    </v-flex>\n    <v-flex xs2.4>\n      <v-btn icon large @mousedown="indexDown(-1)" @mouseup="indexUp(-1)" @mouseleave="indexUp(-1)" @touchstart.stop.prevent="indexDown(-1)" @touchend.stop.prevent="indexUp(-1)" style="margin: 0%; padding: 0%;">\n        <v-icon large>skip_previous</v-icon>\n      </v-btn>\n    </v-flex>\n    <v-flex xs2.4>\n      <fast-button icon large :disabled="progress==0" @tap="backward" style="margin: 0%; padding: 0%;">\n        <v-icon large>fast_rewind</v-icon>\n      </fast-button>\n    </v-flex>\n    <v-flex xs2.4>\n      <fast-button icon large :disabled="progress == actions.length" @tap="toggle" style="margin: 0%; padding: 0%;">\n        <v-icon large>{{playing?\'pause\':\'play_arrow\'}}</v-icon>\n      </fast-button>\n    </v-flex>\n    <v-flex xs2.4>\n      <fast-button icon large :disabled="progress == actions.length" @tap="forward" style="margin: 0%; padding: 0%;">\n        <v-icon large>fast_forward</v-icon>\n      </fast-button>\n    </v-flex>\n    <v-flex xs2.4>\n      <v-btn icon large @mousedown="indexDown(1)" @mouseup="indexUp(1)" @mouseleave="indexUp(1)" @touchstart.stop.prevent="indexDown(1)" @touchend.stop.prevent="indexUp(1)" style="margin: 0%; padding: 0%;">\n        <v-icon large>skip_next</v-icon>\n      </v-btn>\n    </v-flex>\n  </v-layout>\n</v-container>'},function(t,e){t.exports='<v-bottom-sheet v-model="value">\n  <v-card flat :width="game.width" style="margin: auto">\n    <v-container fluid grid-list-md text-xs-center>\n      <v-layout row wrap justify-center align-center>\n        <v-flex xs3>\n          <v-icon large color="black">av_timer</v-icon>\n        </v-flex>\n        <v-flex xs3>\n          <fast-button icon :disabled="option.speed <= -4" @tap="option.speed--;demo();" style="min-width: 0%; min-height: 0%; margin: 0%; padding: 0%;">\n            <v-icon large>remove</v-icon>\n          </fast-button>\n        </v-flex>\n        <v-flex xs3>\n          <fast-button class="headline" flat block outline @tap :ripple="false" style="min-width: 0%; min-height: 0%; margin: 0%; padding: 0%;">{{option.speed}}\n          </fast-button>\n        </v-flex>\n        <v-flex xs3>\n          <fast-button icon :disabled="option.speed >= 4" @tap="option.speed++;demo();" style="min-width: 0%; min-height: 0%; margin: 0%; padding: 0%;">\n            <v-icon large>add</v-icon>\n          </fast-button>\n        </v-flex>\n      </v-layout>\n      <v-divider></v-divider>\n      <v-layout row wrap justify-center align-center>\n        <v-flex xs3>\n          <v-icon large color="black">transform</v-icon>\n        </v-flex>\n        <v-flex xs3>\n          <fast-button flat block :disabled="option.size <= -4" @tap="option.size--" style="min-width: 0%; min-height: 0%; margin: 0%; padding: 0%;">\n            <v-icon large>remove</v-icon>\n          </fast-button>\n        </v-flex>\n        <v-flex xs3>\n          <fast-button class="headline" flat block outline @tap :ripple="false" style="min-width: 0%; min-height: 0%; margin: 0%; padding: 0%;">{{option.size}}\n          </fast-button>\n        </v-flex>\n        <v-flex xs3>\n          <fast-button flat block :disabled="option.size >= 4" @tap="option.size++" style="min-width: 0%; min-height: 0%; margin: 0%; padding: 0%;">\n            <v-icon large>add</v-icon>\n          </fast-button>\n        </v-flex>\n      </v-layout>\n    </v-container>\n  </v-card>\n</v-bottom-sheet>'},function(t,e){t.exports='<v-bottom-sheet v-model="value">\n  <v-card flat :width="game.width" style="margin: auto">\n    <v-container fluid grid-list-md text-xs-center>\n      <v-layout row wrap>\n        <v-flex xs4>\n          <fast-button class="headline" :color="option.mode == \'play\'?\'primary\':\'\'" flat block @tap="$emit(\'input\', false); mode(\'play\')"\n            outline style="height: 2em; min-width: 0%; min-height: 0%; margin: 0%; padding: 0%;">\n            <v-icon large>games</v-icon>\n          </fast-button>\n        </v-flex>\n        <v-flex xs4>\n          <fast-button class="headline" :color="option.mode == \'script\'?\'primary\':\'\'" flat block @tap="$emit(\'input\', false); mode(\'script\')"\n            outline style="height: 2em; min-width: 0%; min-height: 0%; margin: 0%; padding: 0%;">\n            <v-icon large>school</v-icon>\n          </fast-button>\n        </v-flex>\n        <v-flex xs4>\n          <fast-button class="headline" :color="option.mode == \'movie\'?\'primary\':\'\'" flat block @tap="$emit(\'input\', false); mode(\'movie\')"\n            outline style="height: 2em; min-width: 0%; min-height: 0%; margin: 0%; padding: 0%;">\n            <v-icon large>movie</v-icon>\n          </fast-button>\n        </v-flex>\n      </v-layout>\n      <v-divider></v-divider>\n      <v-layout row wrap>\n        <v-flex xs4>\n          <fast-button class="headline" flat block @tap="$emit(\'input\', false); tune=true" style="height: 2em; min-width: 0%; min-height: 0%; margin: 0%; padding: 0%;">\n            <v-icon large>palette</v-icon>\n          </fast-button>\n        </v-flex>\n        <v-flex xs4>\n          <fast-button class="headline" color="error" flat block @tap="$emit(\'input\', false); reset()" style="height: 2em; min-width: 0%; min-height: 0%; margin: 0%; padding: 0%;">\n            <v-icon large>delete</v-icon>\n          </fast-button>\n        </v-flex>\n      </v-layout>\n    </v-container>\n  </v-card>\n  <tune-menu v-model="tune"></tune-menu>\n</v-bottom-sheet>'},function(t,e,i){"use strict";var n=i(19),a=i(3),s=i(9),r=i(5),o=i(10),h=Object.prototype.toString,l=0,d=-1,c=0,p=8;function u(t){if(!(this instanceof u))return new u(t);this.options=a.assign({level:d,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:c,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;var i=n.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(i!==l)throw new Error(r[i]);if(e.header&&n.deflateSetHeader(this.strm,e.header),e.dictionary){var f;if(f="string"==typeof e.dictionary?s.string2buf(e.dictionary):"[object ArrayBuffer]"===h.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(i=n.deflateSetDictionary(this.strm,f))!==l)throw new Error(r[i]);this._dict_set=!0}}function f(t,e){var i=new u(e);if(i.push(t,!0),i.err)throw i.msg||r[i.err];return i.result}u.prototype.push=function(t,e){var i,r,o=this.strm,d=this.options.chunkSize;if(this.ended)return!1;r=e===~~e?e:!0===e?4:0,"string"==typeof t?o.input=s.string2buf(t):"[object ArrayBuffer]"===h.call(t)?o.input=new Uint8Array(t):o.input=t,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new a.Buf8(d),o.next_out=0,o.avail_out=d),1!==(i=n.deflate(o,r))&&i!==l)return this.onEnd(i),this.ended=!0,!1;0!==o.avail_out&&(0!==o.avail_in||4!==r&&2!==r)||("string"===this.options.to?this.onData(s.buf2binstring(a.shrinkBuf(o.output,o.next_out))):this.onData(a.shrinkBuf(o.output,o.next_out)))}while((o.avail_in>0||0===o.avail_out)&&1!==i);return 4===r?(i=n.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===l):2!==r||(this.onEnd(l),o.avail_out=0,!0)},u.prototype.onData=function(t){this.chunks.push(t)},u.prototype.onEnd=function(t){t===l&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Deflate=u,e.deflate=f,e.deflateRaw=function(t,e){return(e=e||{}).raw=!0,f(t,e)},e.gzip=function(t,e){return(e=e||{}).gzip=!0,f(t,e)}},function(t,e,i){"use strict";var n,a=i(3),s=i(20),r=i(7),o=i(8),h=i(5),l=0,d=1,c=3,p=4,u=5,f=0,_=1,g=-2,m=-3,v=-5,w=-1,b=1,R=2,x=3,y=4,U=0,k=2,L=8,F=9,B=15,E=8,C=286,A=30,S=19,O=2*C+1,D=15,z=3,I=258,M=I+z+1,P=32,T=42,j=69,Z=73,N=91,G=103,V=113,H=666,q=1,W=2,K=3,$=4,Y=3;function X(t,e){return t.msg=h[e],e}function J(t){return(t<<1)-(t>4?9:0)}function Q(t){for(var e=t.length;--e>=0;)t[e]=0}function tt(t){var e=t.state,i=e.pending;i>t.avail_out&&(i=t.avail_out),0!==i&&(a.arraySet(t.output,e.pending_buf,e.pending_out,i,t.next_out),t.next_out+=i,e.pending_out+=i,t.total_out+=i,t.avail_out-=i,e.pending-=i,0===e.pending&&(e.pending_out=0))}function et(t,e){s._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,tt(t.strm)}function it(t,e){t.pending_buf[t.pending++]=e}function nt(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function at(t,e,i,n){var s=t.avail_in;return s>n&&(s=n),0===s?0:(t.avail_in-=s,a.arraySet(e,t.input,t.next_in,s,i),1===t.state.wrap?t.adler=r(t.adler,e,s,i):2===t.state.wrap&&(t.adler=o(t.adler,e,s,i)),t.next_in+=s,t.total_in+=s,s)}function st(t,e){var i,n,a=t.max_chain_length,s=t.strstart,r=t.prev_length,o=t.nice_match,h=t.strstart>t.w_size-M?t.strstart-(t.w_size-M):0,l=t.window,d=t.w_mask,c=t.prev,p=t.strstart+I,u=l[s+r-1],f=l[s+r];t.prev_length>=t.good_match&&(a>>=2),o>t.lookahead&&(o=t.lookahead);do{if(l[(i=e)+r]===f&&l[i+r-1]===u&&l[i]===l[s]&&l[++i]===l[s+1]){s+=2,i++;do{}while(l[++s]===l[++i]&&l[++s]===l[++i]&&l[++s]===l[++i]&&l[++s]===l[++i]&&l[++s]===l[++i]&&l[++s]===l[++i]&&l[++s]===l[++i]&&l[++s]===l[++i]&&s<p);if(n=I-(p-s),s=p-I,n>r){if(t.match_start=e,r=n,n>=o)break;u=l[s+r-1],f=l[s+r]}}}while((e=c[e&d])>h&&0!=--a);return r<=t.lookahead?r:t.lookahead}function rt(t){var e,i,n,s,r,o=t.w_size;do{if(s=t.window_size-t.lookahead-t.strstart,t.strstart>=o+(o-M)){a.arraySet(t.window,t.window,o,o,0),t.match_start-=o,t.strstart-=o,t.block_start-=o,e=i=t.hash_size;do{n=t.head[--e],t.head[e]=n>=o?n-o:0}while(--i);e=i=o;do{n=t.prev[--e],t.prev[e]=n>=o?n-o:0}while(--i);s+=o}if(0===t.strm.avail_in)break;if(i=at(t.strm,t.window,t.strstart+t.lookahead,s),t.lookahead+=i,t.lookahead+t.insert>=z)for(r=t.strstart-t.insert,t.ins_h=t.window[r],t.ins_h=(t.ins_h<<t.hash_shift^t.window[r+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[r+z-1])&t.hash_mask,t.prev[r&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=r,r++,t.insert--,!(t.lookahead+t.insert<z)););}while(t.lookahead<M&&0!==t.strm.avail_in)}function ot(t,e){for(var i,n;;){if(t.lookahead<M){if(rt(t),t.lookahead<M&&e===l)return q;if(0===t.lookahead)break}if(i=0,t.lookahead>=z&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+z-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==i&&t.strstart-i<=t.w_size-M&&(t.match_length=st(t,i)),t.match_length>=z)if(n=s._tr_tally(t,t.strstart-t.match_start,t.match_length-z),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=z){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+z-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(et(t,!1),0===t.strm.avail_out))return q}return t.insert=t.strstart<z-1?t.strstart:z-1,e===p?(et(t,!0),0===t.strm.avail_out?K:$):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?q:W}function ht(t,e){for(var i,n,a;;){if(t.lookahead<M){if(rt(t),t.lookahead<M&&e===l)return q;if(0===t.lookahead)break}if(i=0,t.lookahead>=z&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+z-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=z-1,0!==i&&t.prev_length<t.max_lazy_match&&t.strstart-i<=t.w_size-M&&(t.match_length=st(t,i),t.match_length<=5&&(t.strategy===b||t.match_length===z&&t.strstart-t.match_start>4096)&&(t.match_length=z-1)),t.prev_length>=z&&t.match_length<=t.prev_length){a=t.strstart+t.lookahead-z,n=s._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-z),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=a&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+z-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=z-1,t.strstart++,n&&(et(t,!1),0===t.strm.avail_out))return q}else if(t.match_available){if((n=s._tr_tally(t,0,t.window[t.strstart-1]))&&et(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return q}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=s._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<z-1?t.strstart:z-1,e===p?(et(t,!0),0===t.strm.avail_out?K:$):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?q:W}function lt(t,e,i,n,a){this.good_length=t,this.max_lazy=e,this.nice_length=i,this.max_chain=n,this.func=a}function dt(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=k,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?T:V,t.adler=2===e.wrap?0:1,e.last_flush=l,s._tr_init(e),f):X(t,g)}function ct(t){var e=dt(t);return e===f&&function(t){t.window_size=2*t.w_size,Q(t.head),t.max_lazy_match=n[t.level].max_lazy,t.good_match=n[t.level].good_length,t.nice_match=n[t.level].nice_length,t.max_chain_length=n[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=z-1,t.match_available=0,t.ins_h=0}(t.state),e}function pt(t,e,i,n,s,r){if(!t)return g;var o=1;if(e===w&&(e=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),s<1||s>F||i!==L||n<8||n>15||e<0||e>9||r<0||r>y)return X(t,g);8===n&&(n=9);var h=new function(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=L,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*O),this.dyn_dtree=new a.Buf16(2*(2*A+1)),this.bl_tree=new a.Buf16(2*(2*S+1)),Q(this.dyn_ltree),Q(this.dyn_dtree),Q(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(D+1),this.heap=new a.Buf16(2*C+1),Q(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*C+1),Q(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0};return t.state=h,h.strm=t,h.wrap=o,h.gzhead=null,h.w_bits=n,h.w_size=1<<h.w_bits,h.w_mask=h.w_size-1,h.hash_bits=s+7,h.hash_size=1<<h.hash_bits,h.hash_mask=h.hash_size-1,h.hash_shift=~~((h.hash_bits+z-1)/z),h.window=new a.Buf8(2*h.w_size),h.head=new a.Buf16(h.hash_size),h.prev=new a.Buf16(h.w_size),h.lit_bufsize=1<<s+6,h.pending_buf_size=4*h.lit_bufsize,h.pending_buf=new a.Buf8(h.pending_buf_size),h.d_buf=1*h.lit_bufsize,h.l_buf=3*h.lit_bufsize,h.level=e,h.strategy=r,h.method=i,ct(t)}n=[new lt(0,0,0,0,function(t,e){var i=65535;for(i>t.pending_buf_size-5&&(i=t.pending_buf_size-5);;){if(t.lookahead<=1){if(rt(t),0===t.lookahead&&e===l)return q;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+i;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,et(t,!1),0===t.strm.avail_out))return q;if(t.strstart-t.block_start>=t.w_size-M&&(et(t,!1),0===t.strm.avail_out))return q}return t.insert=0,e===p?(et(t,!0),0===t.strm.avail_out?K:$):(t.strstart>t.block_start&&(et(t,!1),t.strm.avail_out),q)}),new lt(4,4,8,4,ot),new lt(4,5,16,8,ot),new lt(4,6,32,32,ot),new lt(4,4,16,16,ht),new lt(8,16,32,32,ht),new lt(8,16,128,128,ht),new lt(8,32,128,256,ht),new lt(32,128,258,1024,ht),new lt(32,258,258,4096,ht)],e.deflateInit=function(t,e){return pt(t,e,L,B,E,U)},e.deflateInit2=pt,e.deflateReset=ct,e.deflateResetKeep=dt,e.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?g:(t.state.gzhead=e,f):g},e.deflate=function(t,e){var i,a,r,h;if(!t||!t.state||e>u||e<0)return t?X(t,g):g;if(a=t.state,!t.output||!t.input&&0!==t.avail_in||a.status===H&&e!==p)return X(t,0===t.avail_out?v:g);if(a.strm=t,i=a.last_flush,a.last_flush=e,a.status===T)if(2===a.wrap)t.adler=0,it(a,31),it(a,139),it(a,8),a.gzhead?(it(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),it(a,255&a.gzhead.time),it(a,a.gzhead.time>>8&255),it(a,a.gzhead.time>>16&255),it(a,a.gzhead.time>>24&255),it(a,9===a.level?2:a.strategy>=R||a.level<2?4:0),it(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(it(a,255&a.gzhead.extra.length),it(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(t.adler=o(t.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=j):(it(a,0),it(a,0),it(a,0),it(a,0),it(a,0),it(a,9===a.level?2:a.strategy>=R||a.level<2?4:0),it(a,Y),a.status=V);else{var m=L+(a.w_bits-8<<4)<<8;m|=(a.strategy>=R||a.level<2?0:a.level<6?1:6===a.level?2:3)<<6,0!==a.strstart&&(m|=P),m+=31-m%31,a.status=V,nt(a,m),0!==a.strstart&&(nt(a,t.adler>>>16),nt(a,65535&t.adler)),t.adler=1}if(a.status===j)if(a.gzhead.extra){for(r=a.pending;a.gzindex<(65535&a.gzhead.extra.length)&&(a.pending!==a.pending_buf_size||(a.gzhead.hcrc&&a.pending>r&&(t.adler=o(t.adler,a.pending_buf,a.pending-r,r)),tt(t),r=a.pending,a.pending!==a.pending_buf_size));)it(a,255&a.gzhead.extra[a.gzindex]),a.gzindex++;a.gzhead.hcrc&&a.pending>r&&(t.adler=o(t.adler,a.pending_buf,a.pending-r,r)),a.gzindex===a.gzhead.extra.length&&(a.gzindex=0,a.status=Z)}else a.status=Z;if(a.status===Z)if(a.gzhead.name){r=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>r&&(t.adler=o(t.adler,a.pending_buf,a.pending-r,r)),tt(t),r=a.pending,a.pending===a.pending_buf_size)){h=1;break}h=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,it(a,h)}while(0!==h);a.gzhead.hcrc&&a.pending>r&&(t.adler=o(t.adler,a.pending_buf,a.pending-r,r)),0===h&&(a.gzindex=0,a.status=N)}else a.status=N;if(a.status===N)if(a.gzhead.comment){r=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>r&&(t.adler=o(t.adler,a.pending_buf,a.pending-r,r)),tt(t),r=a.pending,a.pending===a.pending_buf_size)){h=1;break}h=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,it(a,h)}while(0!==h);a.gzhead.hcrc&&a.pending>r&&(t.adler=o(t.adler,a.pending_buf,a.pending-r,r)),0===h&&(a.status=G)}else a.status=G;if(a.status===G&&(a.gzhead.hcrc?(a.pending+2>a.pending_buf_size&&tt(t),a.pending+2<=a.pending_buf_size&&(it(a,255&t.adler),it(a,t.adler>>8&255),t.adler=0,a.status=V)):a.status=V),0!==a.pending){if(tt(t),0===t.avail_out)return a.last_flush=-1,f}else if(0===t.avail_in&&J(e)<=J(i)&&e!==p)return X(t,v);if(a.status===H&&0!==t.avail_in)return X(t,v);if(0!==t.avail_in||0!==a.lookahead||e!==l&&a.status!==H){var w=a.strategy===R?function(t,e){for(var i;;){if(0===t.lookahead&&(rt(t),0===t.lookahead)){if(e===l)return q;break}if(t.match_length=0,i=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,i&&(et(t,!1),0===t.strm.avail_out))return q}return t.insert=0,e===p?(et(t,!0),0===t.strm.avail_out?K:$):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?q:W}(a,e):a.strategy===x?function(t,e){for(var i,n,a,r,o=t.window;;){if(t.lookahead<=I){if(rt(t),t.lookahead<=I&&e===l)return q;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=z&&t.strstart>0&&(n=o[a=t.strstart-1])===o[++a]&&n===o[++a]&&n===o[++a]){r=t.strstart+I;do{}while(n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&a<r);t.match_length=I-(r-a),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=z?(i=s._tr_tally(t,1,t.match_length-z),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(i=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),i&&(et(t,!1),0===t.strm.avail_out))return q}return t.insert=0,e===p?(et(t,!0),0===t.strm.avail_out?K:$):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?q:W}(a,e):n[a.level].func(a,e);if(w!==K&&w!==$||(a.status=H),w===q||w===K)return 0===t.avail_out&&(a.last_flush=-1),f;if(w===W&&(e===d?s._tr_align(a):e!==u&&(s._tr_stored_block(a,0,0,!1),e===c&&(Q(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),tt(t),0===t.avail_out))return a.last_flush=-1,f}return e!==p?f:a.wrap<=0?_:(2===a.wrap?(it(a,255&t.adler),it(a,t.adler>>8&255),it(a,t.adler>>16&255),it(a,t.adler>>24&255),it(a,255&t.total_in),it(a,t.total_in>>8&255),it(a,t.total_in>>16&255),it(a,t.total_in>>24&255)):(nt(a,t.adler>>>16),nt(a,65535&t.adler)),tt(t),a.wrap>0&&(a.wrap=-a.wrap),0!==a.pending?f:_)},e.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==T&&e!==j&&e!==Z&&e!==N&&e!==G&&e!==V&&e!==H?X(t,g):(t.state=null,e===V?X(t,m):f):g},e.deflateSetDictionary=function(t,e){var i,n,s,o,h,l,d,c,p=e.length;if(!t||!t.state)return g;if(2===(o=(i=t.state).wrap)||1===o&&i.status!==T||i.lookahead)return g;for(1===o&&(t.adler=r(t.adler,e,p,0)),i.wrap=0,p>=i.w_size&&(0===o&&(Q(i.head),i.strstart=0,i.block_start=0,i.insert=0),c=new a.Buf8(i.w_size),a.arraySet(c,e,p-i.w_size,i.w_size,0),e=c,p=i.w_size),h=t.avail_in,l=t.next_in,d=t.input,t.avail_in=p,t.next_in=0,t.input=e,rt(i);i.lookahead>=z;){n=i.strstart,s=i.lookahead-(z-1);do{i.ins_h=(i.ins_h<<i.hash_shift^i.window[n+z-1])&i.hash_mask,i.prev[n&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=n,n++}while(--s);i.strstart=n,i.lookahead=z-1,rt(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=z-1,i.match_available=0,t.next_in=l,t.input=d,t.avail_in=h,i.wrap=o,f},e.deflateInfo="pako deflate (from Nodeca project)"},function(t,e,i){"use strict";var n=i(3),a=4,s=0,r=1,o=2;function h(t){for(var e=t.length;--e>=0;)t[e]=0}var l=0,d=1,c=2,p=29,u=256,f=u+1+p,_=30,g=19,m=2*f+1,v=15,w=16,b=7,R=256,x=16,y=17,U=18,k=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],L=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],F=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],B=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],E=new Array(2*(f+2));h(E);var C=new Array(2*_);h(C);var A=new Array(512);h(A);var S=new Array(256);h(S);var O=new Array(p);h(O);var D,z,I,M=new Array(_);function P(t,e,i,n,a){this.static_tree=t,this.extra_bits=e,this.extra_base=i,this.elems=n,this.max_length=a,this.has_stree=t&&t.length}function T(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function j(t){return t<256?A[t]:A[256+(t>>>7)]}function Z(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function N(t,e,i){t.bi_valid>w-i?(t.bi_buf|=e<<t.bi_valid&65535,Z(t,t.bi_buf),t.bi_buf=e>>w-t.bi_valid,t.bi_valid+=i-w):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=i)}function G(t,e,i){N(t,i[2*e],i[2*e+1])}function V(t,e){var i=0;do{i|=1&t,t>>>=1,i<<=1}while(--e>0);return i>>>1}function H(t,e,i){var n,a,s=new Array(v+1),r=0;for(n=1;n<=v;n++)s[n]=r=r+i[n-1]<<1;for(a=0;a<=e;a++){var o=t[2*a+1];0!==o&&(t[2*a]=V(s[o]++,o))}}function q(t){var e;for(e=0;e<f;e++)t.dyn_ltree[2*e]=0;for(e=0;e<_;e++)t.dyn_dtree[2*e]=0;for(e=0;e<g;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*R]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function W(t){t.bi_valid>8?Z(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function K(t,e,i,n){var a=2*e,s=2*i;return t[a]<t[s]||t[a]===t[s]&&n[e]<=n[i]}function $(t,e,i){for(var n=t.heap[i],a=i<<1;a<=t.heap_len&&(a<t.heap_len&&K(e,t.heap[a+1],t.heap[a],t.depth)&&a++,!K(e,n,t.heap[a],t.depth));)t.heap[i]=t.heap[a],i=a,a<<=1;t.heap[i]=n}function Y(t,e,i){var n,a,s,r,o=0;if(0!==t.last_lit)do{n=t.pending_buf[t.d_buf+2*o]<<8|t.pending_buf[t.d_buf+2*o+1],a=t.pending_buf[t.l_buf+o],o++,0===n?G(t,a,e):(G(t,(s=S[a])+u+1,e),0!==(r=k[s])&&N(t,a-=O[s],r),G(t,s=j(--n),i),0!==(r=L[s])&&N(t,n-=M[s],r))}while(o<t.last_lit);G(t,R,e)}function X(t,e){var i,n,a,s=e.dyn_tree,r=e.stat_desc.static_tree,o=e.stat_desc.has_stree,h=e.stat_desc.elems,l=-1;for(t.heap_len=0,t.heap_max=m,i=0;i<h;i++)0!==s[2*i]?(t.heap[++t.heap_len]=l=i,t.depth[i]=0):s[2*i+1]=0;for(;t.heap_len<2;)s[2*(a=t.heap[++t.heap_len]=l<2?++l:0)]=1,t.depth[a]=0,t.opt_len--,o&&(t.static_len-=r[2*a+1]);for(e.max_code=l,i=t.heap_len>>1;i>=1;i--)$(t,s,i);a=h;do{i=t.heap[1],t.heap[1]=t.heap[t.heap_len--],$(t,s,1),n=t.heap[1],t.heap[--t.heap_max]=i,t.heap[--t.heap_max]=n,s[2*a]=s[2*i]+s[2*n],t.depth[a]=(t.depth[i]>=t.depth[n]?t.depth[i]:t.depth[n])+1,s[2*i+1]=s[2*n+1]=a,t.heap[1]=a++,$(t,s,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var i,n,a,s,r,o,h=e.dyn_tree,l=e.max_code,d=e.stat_desc.static_tree,c=e.stat_desc.has_stree,p=e.stat_desc.extra_bits,u=e.stat_desc.extra_base,f=e.stat_desc.max_length,_=0;for(s=0;s<=v;s++)t.bl_count[s]=0;for(h[2*t.heap[t.heap_max]+1]=0,i=t.heap_max+1;i<m;i++)(s=h[2*h[2*(n=t.heap[i])+1]+1]+1)>f&&(s=f,_++),h[2*n+1]=s,n>l||(t.bl_count[s]++,r=0,n>=u&&(r=p[n-u]),o=h[2*n],t.opt_len+=o*(s+r),c&&(t.static_len+=o*(d[2*n+1]+r)));if(0!==_){do{for(s=f-1;0===t.bl_count[s];)s--;t.bl_count[s]--,t.bl_count[s+1]+=2,t.bl_count[f]--,_-=2}while(_>0);for(s=f;0!==s;s--)for(n=t.bl_count[s];0!==n;)(a=t.heap[--i])>l||(h[2*a+1]!==s&&(t.opt_len+=(s-h[2*a+1])*h[2*a],h[2*a+1]=s),n--)}}(t,e),H(s,l,t.bl_count)}function J(t,e,i){var n,a,s=-1,r=e[1],o=0,h=7,l=4;for(0===r&&(h=138,l=3),e[2*(i+1)+1]=65535,n=0;n<=i;n++)a=r,r=e[2*(n+1)+1],++o<h&&a===r||(o<l?t.bl_tree[2*a]+=o:0!==a?(a!==s&&t.bl_tree[2*a]++,t.bl_tree[2*x]++):o<=10?t.bl_tree[2*y]++:t.bl_tree[2*U]++,o=0,s=a,0===r?(h=138,l=3):a===r?(h=6,l=3):(h=7,l=4))}function Q(t,e,i){var n,a,s=-1,r=e[1],o=0,h=7,l=4;for(0===r&&(h=138,l=3),n=0;n<=i;n++)if(a=r,r=e[2*(n+1)+1],!(++o<h&&a===r)){if(o<l)do{G(t,a,t.bl_tree)}while(0!=--o);else 0!==a?(a!==s&&(G(t,a,t.bl_tree),o--),G(t,x,t.bl_tree),N(t,o-3,2)):o<=10?(G(t,y,t.bl_tree),N(t,o-3,3)):(G(t,U,t.bl_tree),N(t,o-11,7));o=0,s=a,0===r?(h=138,l=3):a===r?(h=6,l=3):(h=7,l=4)}}h(M);var tt=!1;function et(t,e,i,a){N(t,(l<<1)+(a?1:0),3),function(t,e,i,a){W(t),a&&(Z(t,i),Z(t,~i)),n.arraySet(t.pending_buf,t.window,e,i,t.pending),t.pending+=i}(t,e,i,!0)}e._tr_init=function(t){tt||(function(){var t,e,i,n,a,s=new Array(v+1);for(i=0,n=0;n<p-1;n++)for(O[n]=i,t=0;t<1<<k[n];t++)S[i++]=n;for(S[i-1]=n,a=0,n=0;n<16;n++)for(M[n]=a,t=0;t<1<<L[n];t++)A[a++]=n;for(a>>=7;n<_;n++)for(M[n]=a<<7,t=0;t<1<<L[n]-7;t++)A[256+a++]=n;for(e=0;e<=v;e++)s[e]=0;for(t=0;t<=143;)E[2*t+1]=8,t++,s[8]++;for(;t<=255;)E[2*t+1]=9,t++,s[9]++;for(;t<=279;)E[2*t+1]=7,t++,s[7]++;for(;t<=287;)E[2*t+1]=8,t++,s[8]++;for(H(E,f+1,s),t=0;t<_;t++)C[2*t+1]=5,C[2*t]=V(t,5);D=new P(E,k,u+1,f,v),z=new P(C,L,0,_,v),I=new P(new Array(0),F,0,g,b)}(),tt=!0),t.l_desc=new T(t.dyn_ltree,D),t.d_desc=new T(t.dyn_dtree,z),t.bl_desc=new T(t.bl_tree,I),t.bi_buf=0,t.bi_valid=0,q(t)},e._tr_stored_block=et,e._tr_flush_block=function(t,e,i,n){var h,l,p=0;t.level>0?(t.strm.data_type===o&&(t.strm.data_type=function(t){var e,i=4093624447;for(e=0;e<=31;e++,i>>>=1)if(1&i&&0!==t.dyn_ltree[2*e])return s;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return r;for(e=32;e<u;e++)if(0!==t.dyn_ltree[2*e])return r;return s}(t)),X(t,t.l_desc),X(t,t.d_desc),p=function(t){var e;for(J(t,t.dyn_ltree,t.l_desc.max_code),J(t,t.dyn_dtree,t.d_desc.max_code),X(t,t.bl_desc),e=g-1;e>=3&&0===t.bl_tree[2*B[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),h=t.opt_len+3+7>>>3,(l=t.static_len+3+7>>>3)<=h&&(h=l)):h=l=i+5,i+4<=h&&-1!==e?et(t,e,i,n):t.strategy===a||l===h?(N(t,(d<<1)+(n?1:0),3),Y(t,E,C)):(N(t,(c<<1)+(n?1:0),3),function(t,e,i,n){var a;for(N(t,e-257,5),N(t,i-1,5),N(t,n-4,4),a=0;a<n;a++)N(t,t.bl_tree[2*B[a]+1],3);Q(t,t.dyn_ltree,e-1),Q(t,t.dyn_dtree,i-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,p+1),Y(t,t.dyn_ltree,t.dyn_dtree)),q(t),n&&W(t)},e._tr_tally=function(t,e,i){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&i,t.last_lit++,0===e?t.dyn_ltree[2*i]++:(t.matches++,e--,t.dyn_ltree[2*(S[i]+u+1)]++,t.dyn_dtree[2*j(e)]++),t.last_lit===t.lit_bufsize-1},e._tr_align=function(t){N(t,d<<1,3),G(t,R,E),function(t){16===t.bi_valid?(Z(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},function(t,e,i){"use strict";var n=i(22),a=i(3),s=i(9),r=i(11),o=i(5),h=i(10),l=i(25),d=Object.prototype.toString;function c(t){if(!(this instanceof c))return new c(t);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var i=n.inflateInit2(this.strm,e.windowBits);if(i!==r.Z_OK)throw new Error(o[i]);this.header=new l,n.inflateGetHeader(this.strm,this.header)}function p(t,e){var i=new c(e);if(i.push(t,!0),i.err)throw i.msg||o[i.err];return i.result}c.prototype.push=function(t,e){var i,o,h,l,c,p,u=this.strm,f=this.options.chunkSize,_=this.options.dictionary,g=!1;if(this.ended)return!1;o=e===~~e?e:!0===e?r.Z_FINISH:r.Z_NO_FLUSH,"string"==typeof t?u.input=s.binstring2buf(t):"[object ArrayBuffer]"===d.call(t)?u.input=new Uint8Array(t):u.input=t,u.next_in=0,u.avail_in=u.input.length;do{if(0===u.avail_out&&(u.output=new a.Buf8(f),u.next_out=0,u.avail_out=f),(i=n.inflate(u,r.Z_NO_FLUSH))===r.Z_NEED_DICT&&_&&(p="string"==typeof _?s.string2buf(_):"[object ArrayBuffer]"===d.call(_)?new Uint8Array(_):_,i=n.inflateSetDictionary(this.strm,p)),i===r.Z_BUF_ERROR&&!0===g&&(i=r.Z_OK,g=!1),i!==r.Z_STREAM_END&&i!==r.Z_OK)return this.onEnd(i),this.ended=!0,!1;u.next_out&&(0!==u.avail_out&&i!==r.Z_STREAM_END&&(0!==u.avail_in||o!==r.Z_FINISH&&o!==r.Z_SYNC_FLUSH)||("string"===this.options.to?(h=s.utf8border(u.output,u.next_out),l=u.next_out-h,c=s.buf2string(u.output,h),u.next_out=l,u.avail_out=f-l,l&&a.arraySet(u.output,u.output,h,l,0),this.onData(c)):this.onData(a.shrinkBuf(u.output,u.next_out)))),0===u.avail_in&&0===u.avail_out&&(g=!0)}while((u.avail_in>0||0===u.avail_out)&&i!==r.Z_STREAM_END);return i===r.Z_STREAM_END&&(o=r.Z_FINISH),o===r.Z_FINISH?(i=n.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===r.Z_OK):o!==r.Z_SYNC_FLUSH||(this.onEnd(r.Z_OK),u.avail_out=0,!0)},c.prototype.onData=function(t){this.chunks.push(t)},c.prototype.onEnd=function(t){t===r.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Inflate=c,e.inflate=p,e.inflateRaw=function(t,e){return(e=e||{}).raw=!0,p(t,e)},e.ungzip=p},function(t,e,i){"use strict";var n=i(3),a=i(7),s=i(8),r=i(23),o=i(24),h=0,l=1,d=2,c=4,p=5,u=6,f=0,_=1,g=2,m=-2,v=-3,w=-4,b=-5,R=8,x=1,y=2,U=3,k=4,L=5,F=6,B=7,E=8,C=9,A=10,S=11,O=12,D=13,z=14,I=15,M=16,P=17,T=18,j=19,Z=20,N=21,G=22,V=23,H=24,q=25,W=26,K=27,$=28,Y=29,X=30,J=31,Q=32,tt=852,et=592,it=15;function nt(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function at(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=x,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new n.Buf32(tt),e.distcode=e.distdyn=new n.Buf32(et),e.sane=1,e.back=-1,f):m}function st(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,at(t)):m}function rt(t,e){var i,n;return t&&t.state?(n=t.state,e<0?(i=0,e=-e):(i=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?m:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=i,n.wbits=e,st(t))):m}function ot(t,e){var i,a;return t?(a=new function(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0},t.state=a,a.window=null,(i=rt(t,e))!==f&&(t.state=null),i):m}var ht,lt,dt=!0;function ct(t){if(dt){var e;for(ht=new n.Buf32(512),lt=new n.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(o(l,t.lens,0,288,ht,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;o(d,t.lens,0,32,lt,0,t.work,{bits:5}),dt=!1}t.lencode=ht,t.lenbits=9,t.distcode=lt,t.distbits=5}function pt(t,e,i,a){var s,r=t.state;return null===r.window&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new n.Buf8(r.wsize)),a>=r.wsize?(n.arraySet(r.window,e,i-r.wsize,r.wsize,0),r.wnext=0,r.whave=r.wsize):((s=r.wsize-r.wnext)>a&&(s=a),n.arraySet(r.window,e,i-a,s,r.wnext),(a-=s)?(n.arraySet(r.window,e,i-a,a,0),r.wnext=a,r.whave=r.wsize):(r.wnext+=s,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=s))),0}e.inflateReset=st,e.inflateReset2=rt,e.inflateResetKeep=at,e.inflateInit=function(t){return ot(t,it)},e.inflateInit2=ot,e.inflate=function(t,e){var i,tt,et,it,at,st,rt,ot,ht,lt,dt,ut,ft,_t,gt,mt,vt,wt,bt,Rt,xt,yt,Ut,kt,Lt=0,Ft=new n.Buf8(4),Bt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return m;(i=t.state).mode===O&&(i.mode=D),at=t.next_out,et=t.output,rt=t.avail_out,it=t.next_in,tt=t.input,st=t.avail_in,ot=i.hold,ht=i.bits,lt=st,dt=rt,yt=f;t:for(;;)switch(i.mode){case x:if(0===i.wrap){i.mode=D;break}for(;ht<16;){if(0===st)break t;st--,ot+=tt[it++]<<ht,ht+=8}if(2&i.wrap&&35615===ot){i.check=0,Ft[0]=255&ot,Ft[1]=ot>>>8&255,i.check=s(i.check,Ft,2,0),ot=0,ht=0,i.mode=y;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&ot)<<8)+(ot>>8))%31){t.msg="incorrect header check",i.mode=X;break}if((15&ot)!==R){t.msg="unknown compression method",i.mode=X;break}if(ht-=4,xt=8+(15&(ot>>>=4)),0===i.wbits)i.wbits=xt;else if(xt>i.wbits){t.msg="invalid window size",i.mode=X;break}i.dmax=1<<xt,t.adler=i.check=1,i.mode=512&ot?A:O,ot=0,ht=0;break;case y:for(;ht<16;){if(0===st)break t;st--,ot+=tt[it++]<<ht,ht+=8}if(i.flags=ot,(255&i.flags)!==R){t.msg="unknown compression method",i.mode=X;break}if(57344&i.flags){t.msg="unknown header flags set",i.mode=X;break}i.head&&(i.head.text=ot>>8&1),512&i.flags&&(Ft[0]=255&ot,Ft[1]=ot>>>8&255,i.check=s(i.check,Ft,2,0)),ot=0,ht=0,i.mode=U;case U:for(;ht<32;){if(0===st)break t;st--,ot+=tt[it++]<<ht,ht+=8}i.head&&(i.head.time=ot),512&i.flags&&(Ft[0]=255&ot,Ft[1]=ot>>>8&255,Ft[2]=ot>>>16&255,Ft[3]=ot>>>24&255,i.check=s(i.check,Ft,4,0)),ot=0,ht=0,i.mode=k;case k:for(;ht<16;){if(0===st)break t;st--,ot+=tt[it++]<<ht,ht+=8}i.head&&(i.head.xflags=255&ot,i.head.os=ot>>8),512&i.flags&&(Ft[0]=255&ot,Ft[1]=ot>>>8&255,i.check=s(i.check,Ft,2,0)),ot=0,ht=0,i.mode=L;case L:if(1024&i.flags){for(;ht<16;){if(0===st)break t;st--,ot+=tt[it++]<<ht,ht+=8}i.length=ot,i.head&&(i.head.extra_len=ot),512&i.flags&&(Ft[0]=255&ot,Ft[1]=ot>>>8&255,i.check=s(i.check,Ft,2,0)),ot=0,ht=0}else i.head&&(i.head.extra=null);i.mode=F;case F:if(1024&i.flags&&((ut=i.length)>st&&(ut=st),ut&&(i.head&&(xt=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),n.arraySet(i.head.extra,tt,it,ut,xt)),512&i.flags&&(i.check=s(i.check,tt,ut,it)),st-=ut,it+=ut,i.length-=ut),i.length))break t;i.length=0,i.mode=B;case B:if(2048&i.flags){if(0===st)break t;ut=0;do{xt=tt[it+ut++],i.head&&xt&&i.length<65536&&(i.head.name+=String.fromCharCode(xt))}while(xt&&ut<st);if(512&i.flags&&(i.check=s(i.check,tt,ut,it)),st-=ut,it+=ut,xt)break t}else i.head&&(i.head.name=null);i.length=0,i.mode=E;case E:if(4096&i.flags){if(0===st)break t;ut=0;do{xt=tt[it+ut++],i.head&&xt&&i.length<65536&&(i.head.comment+=String.fromCharCode(xt))}while(xt&&ut<st);if(512&i.flags&&(i.check=s(i.check,tt,ut,it)),st-=ut,it+=ut,xt)break t}else i.head&&(i.head.comment=null);i.mode=C;case C:if(512&i.flags){for(;ht<16;){if(0===st)break t;st--,ot+=tt[it++]<<ht,ht+=8}if(ot!==(65535&i.check)){t.msg="header crc mismatch",i.mode=X;break}ot=0,ht=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),t.adler=i.check=0,i.mode=O;break;case A:for(;ht<32;){if(0===st)break t;st--,ot+=tt[it++]<<ht,ht+=8}t.adler=i.check=nt(ot),ot=0,ht=0,i.mode=S;case S:if(0===i.havedict)return t.next_out=at,t.avail_out=rt,t.next_in=it,t.avail_in=st,i.hold=ot,i.bits=ht,g;t.adler=i.check=1,i.mode=O;case O:if(e===p||e===u)break t;case D:if(i.last){ot>>>=7&ht,ht-=7&ht,i.mode=K;break}for(;ht<3;){if(0===st)break t;st--,ot+=tt[it++]<<ht,ht+=8}switch(i.last=1&ot,ht-=1,3&(ot>>>=1)){case 0:i.mode=z;break;case 1:if(ct(i),i.mode=Z,e===u){ot>>>=2,ht-=2;break t}break;case 2:i.mode=P;break;case 3:t.msg="invalid block type",i.mode=X}ot>>>=2,ht-=2;break;case z:for(ot>>>=7&ht,ht-=7&ht;ht<32;){if(0===st)break t;st--,ot+=tt[it++]<<ht,ht+=8}if((65535&ot)!=(ot>>>16^65535)){t.msg="invalid stored block lengths",i.mode=X;break}if(i.length=65535&ot,ot=0,ht=0,i.mode=I,e===u)break t;case I:i.mode=M;case M:if(ut=i.length){if(ut>st&&(ut=st),ut>rt&&(ut=rt),0===ut)break t;n.arraySet(et,tt,it,ut,at),st-=ut,it+=ut,rt-=ut,at+=ut,i.length-=ut;break}i.mode=O;break;case P:for(;ht<14;){if(0===st)break t;st--,ot+=tt[it++]<<ht,ht+=8}if(i.nlen=257+(31&ot),ot>>>=5,ht-=5,i.ndist=1+(31&ot),ot>>>=5,ht-=5,i.ncode=4+(15&ot),ot>>>=4,ht-=4,i.nlen>286||i.ndist>30){t.msg="too many length or distance symbols",i.mode=X;break}i.have=0,i.mode=T;case T:for(;i.have<i.ncode;){for(;ht<3;){if(0===st)break t;st--,ot+=tt[it++]<<ht,ht+=8}i.lens[Bt[i.have++]]=7&ot,ot>>>=3,ht-=3}for(;i.have<19;)i.lens[Bt[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,Ut={bits:i.lenbits},yt=o(h,i.lens,0,19,i.lencode,0,i.work,Ut),i.lenbits=Ut.bits,yt){t.msg="invalid code lengths set",i.mode=X;break}i.have=0,i.mode=j;case j:for(;i.have<i.nlen+i.ndist;){for(;mt=(Lt=i.lencode[ot&(1<<i.lenbits)-1])>>>16&255,vt=65535&Lt,!((gt=Lt>>>24)<=ht);){if(0===st)break t;st--,ot+=tt[it++]<<ht,ht+=8}if(vt<16)ot>>>=gt,ht-=gt,i.lens[i.have++]=vt;else{if(16===vt){for(kt=gt+2;ht<kt;){if(0===st)break t;st--,ot+=tt[it++]<<ht,ht+=8}if(ot>>>=gt,ht-=gt,0===i.have){t.msg="invalid bit length repeat",i.mode=X;break}xt=i.lens[i.have-1],ut=3+(3&ot),ot>>>=2,ht-=2}else if(17===vt){for(kt=gt+3;ht<kt;){if(0===st)break t;st--,ot+=tt[it++]<<ht,ht+=8}ht-=gt,xt=0,ut=3+(7&(ot>>>=gt)),ot>>>=3,ht-=3}else{for(kt=gt+7;ht<kt;){if(0===st)break t;st--,ot+=tt[it++]<<ht,ht+=8}ht-=gt,xt=0,ut=11+(127&(ot>>>=gt)),ot>>>=7,ht-=7}if(i.have+ut>i.nlen+i.ndist){t.msg="invalid bit length repeat",i.mode=X;break}for(;ut--;)i.lens[i.have++]=xt}}if(i.mode===X)break;if(0===i.lens[256]){t.msg="invalid code -- missing end-of-block",i.mode=X;break}if(i.lenbits=9,Ut={bits:i.lenbits},yt=o(l,i.lens,0,i.nlen,i.lencode,0,i.work,Ut),i.lenbits=Ut.bits,yt){t.msg="invalid literal/lengths set",i.mode=X;break}if(i.distbits=6,i.distcode=i.distdyn,Ut={bits:i.distbits},yt=o(d,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,Ut),i.distbits=Ut.bits,yt){t.msg="invalid distances set",i.mode=X;break}if(i.mode=Z,e===u)break t;case Z:i.mode=N;case N:if(st>=6&&rt>=258){t.next_out=at,t.avail_out=rt,t.next_in=it,t.avail_in=st,i.hold=ot,i.bits=ht,r(t,dt),at=t.next_out,et=t.output,rt=t.avail_out,it=t.next_in,tt=t.input,st=t.avail_in,ot=i.hold,ht=i.bits,i.mode===O&&(i.back=-1);break}for(i.back=0;mt=(Lt=i.lencode[ot&(1<<i.lenbits)-1])>>>16&255,vt=65535&Lt,!((gt=Lt>>>24)<=ht);){if(0===st)break t;st--,ot+=tt[it++]<<ht,ht+=8}if(mt&&0==(240&mt)){for(wt=gt,bt=mt,Rt=vt;mt=(Lt=i.lencode[Rt+((ot&(1<<wt+bt)-1)>>wt)])>>>16&255,vt=65535&Lt,!(wt+(gt=Lt>>>24)<=ht);){if(0===st)break t;st--,ot+=tt[it++]<<ht,ht+=8}ot>>>=wt,ht-=wt,i.back+=wt}if(ot>>>=gt,ht-=gt,i.back+=gt,i.length=vt,0===mt){i.mode=W;break}if(32&mt){i.back=-1,i.mode=O;break}if(64&mt){t.msg="invalid literal/length code",i.mode=X;break}i.extra=15&mt,i.mode=G;case G:if(i.extra){for(kt=i.extra;ht<kt;){if(0===st)break t;st--,ot+=tt[it++]<<ht,ht+=8}i.length+=ot&(1<<i.extra)-1,ot>>>=i.extra,ht-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=V;case V:for(;mt=(Lt=i.distcode[ot&(1<<i.distbits)-1])>>>16&255,vt=65535&Lt,!((gt=Lt>>>24)<=ht);){if(0===st)break t;st--,ot+=tt[it++]<<ht,ht+=8}if(0==(240&mt)){for(wt=gt,bt=mt,Rt=vt;mt=(Lt=i.distcode[Rt+((ot&(1<<wt+bt)-1)>>wt)])>>>16&255,vt=65535&Lt,!(wt+(gt=Lt>>>24)<=ht);){if(0===st)break t;st--,ot+=tt[it++]<<ht,ht+=8}ot>>>=wt,ht-=wt,i.back+=wt}if(ot>>>=gt,ht-=gt,i.back+=gt,64&mt){t.msg="invalid distance code",i.mode=X;break}i.offset=vt,i.extra=15&mt,i.mode=H;case H:if(i.extra){for(kt=i.extra;ht<kt;){if(0===st)break t;st--,ot+=tt[it++]<<ht,ht+=8}i.offset+=ot&(1<<i.extra)-1,ot>>>=i.extra,ht-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){t.msg="invalid distance too far back",i.mode=X;break}i.mode=q;case q:if(0===rt)break t;if(ut=dt-rt,i.offset>ut){if((ut=i.offset-ut)>i.whave&&i.sane){t.msg="invalid distance too far back",i.mode=X;break}ut>i.wnext?(ut-=i.wnext,ft=i.wsize-ut):ft=i.wnext-ut,ut>i.length&&(ut=i.length),_t=i.window}else _t=et,ft=at-i.offset,ut=i.length;ut>rt&&(ut=rt),rt-=ut,i.length-=ut;do{et[at++]=_t[ft++]}while(--ut);0===i.length&&(i.mode=N);break;case W:if(0===rt)break t;et[at++]=i.length,rt--,i.mode=N;break;case K:if(i.wrap){for(;ht<32;){if(0===st)break t;st--,ot|=tt[it++]<<ht,ht+=8}if(dt-=rt,t.total_out+=dt,i.total+=dt,dt&&(t.adler=i.check=i.flags?s(i.check,et,dt,at-dt):a(i.check,et,dt,at-dt)),dt=rt,(i.flags?ot:nt(ot))!==i.check){t.msg="incorrect data check",i.mode=X;break}ot=0,ht=0}i.mode=$;case $:if(i.wrap&&i.flags){for(;ht<32;){if(0===st)break t;st--,ot+=tt[it++]<<ht,ht+=8}if(ot!==(4294967295&i.total)){t.msg="incorrect length check",i.mode=X;break}ot=0,ht=0}i.mode=Y;case Y:yt=_;break t;case X:yt=v;break t;case J:return w;case Q:default:return m}return t.next_out=at,t.avail_out=rt,t.next_in=it,t.avail_in=st,i.hold=ot,i.bits=ht,(i.wsize||dt!==t.avail_out&&i.mode<X&&(i.mode<K||e!==c))&&pt(t,t.output,t.next_out,dt-t.avail_out)?(i.mode=J,w):(lt-=t.avail_in,dt-=t.avail_out,t.total_in+=lt,t.total_out+=dt,i.total+=dt,i.wrap&&dt&&(t.adler=i.check=i.flags?s(i.check,et,dt,t.next_out-dt):a(i.check,et,dt,t.next_out-dt)),t.data_type=i.bits+(i.last?64:0)+(i.mode===O?128:0)+(i.mode===Z||i.mode===I?256:0),(0===lt&&0===dt||e===c)&&yt===f&&(yt=b),yt)},e.inflateEnd=function(t){if(!t||!t.state)return m;var e=t.state;return e.window&&(e.window=null),t.state=null,f},e.inflateGetHeader=function(t,e){var i;return t&&t.state?0==(2&(i=t.state).wrap)?m:(i.head=e,e.done=!1,f):m},e.inflateSetDictionary=function(t,e){var i,n=e.length;return t&&t.state?0!==(i=t.state).wrap&&i.mode!==S?m:i.mode===S&&a(1,e,n,0)!==i.check?v:pt(t,e,n,n)?(i.mode=J,w):(i.havedict=1,f):m},e.inflateInfo="pako inflate (from Nodeca project)"},function(t,e,i){"use strict";t.exports=function(t,e){var i,n,a,s,r,o,h,l,d,c,p,u,f,_,g,m,v,w,b,R,x,y,U,k,L;i=t.state,n=t.next_in,k=t.input,a=n+(t.avail_in-5),s=t.next_out,L=t.output,r=s-(e-t.avail_out),o=s+(t.avail_out-257),h=i.dmax,l=i.wsize,d=i.whave,c=i.wnext,p=i.window,u=i.hold,f=i.bits,_=i.lencode,g=i.distcode,m=(1<<i.lenbits)-1,v=(1<<i.distbits)-1;t:do{f<15&&(u+=k[n++]<<f,f+=8,u+=k[n++]<<f,f+=8),w=_[u&m];e:for(;;){if(u>>>=b=w>>>24,f-=b,0===(b=w>>>16&255))L[s++]=65535&w;else{if(!(16&b)){if(0==(64&b)){w=_[(65535&w)+(u&(1<<b)-1)];continue e}if(32&b){i.mode=12;break t}t.msg="invalid literal/length code",i.mode=30;break t}R=65535&w,(b&=15)&&(f<b&&(u+=k[n++]<<f,f+=8),R+=u&(1<<b)-1,u>>>=b,f-=b),f<15&&(u+=k[n++]<<f,f+=8,u+=k[n++]<<f,f+=8),w=g[u&v];i:for(;;){if(u>>>=b=w>>>24,f-=b,!(16&(b=w>>>16&255))){if(0==(64&b)){w=g[(65535&w)+(u&(1<<b)-1)];continue i}t.msg="invalid distance code",i.mode=30;break t}if(x=65535&w,f<(b&=15)&&(u+=k[n++]<<f,(f+=8)<b&&(u+=k[n++]<<f,f+=8)),(x+=u&(1<<b)-1)>h){t.msg="invalid distance too far back",i.mode=30;break t}if(u>>>=b,f-=b,x>(b=s-r)){if((b=x-b)>d&&i.sane){t.msg="invalid distance too far back",i.mode=30;break t}if(y=0,U=p,0===c){if(y+=l-b,b<R){R-=b;do{L[s++]=p[y++]}while(--b);y=s-x,U=L}}else if(c<b){if(y+=l+c-b,(b-=c)<R){R-=b;do{L[s++]=p[y++]}while(--b);if(y=0,c<R){R-=b=c;do{L[s++]=p[y++]}while(--b);y=s-x,U=L}}}else if(y+=c-b,b<R){R-=b;do{L[s++]=p[y++]}while(--b);y=s-x,U=L}for(;R>2;)L[s++]=U[y++],L[s++]=U[y++],L[s++]=U[y++],R-=3;R&&(L[s++]=U[y++],R>1&&(L[s++]=U[y++]))}else{y=s-x;do{L[s++]=L[y++],L[s++]=L[y++],L[s++]=L[y++],R-=3}while(R>2);R&&(L[s++]=L[y++],R>1&&(L[s++]=L[y++]))}break}}break}}while(n<a&&s<o);n-=R=f>>3,u&=(1<<(f-=R<<3))-1,t.next_in=n,t.next_out=s,t.avail_in=n<a?a-n+5:5-(n-a),t.avail_out=s<o?o-s+257:257-(s-o),i.hold=u,i.bits=f}},function(t,e,i){"use strict";var n=i(3),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],r=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],o=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(t,e,i,h,l,d,c,p){var u,f,_,g,m,v,w,b,R,x=p.bits,y=0,U=0,k=0,L=0,F=0,B=0,E=0,C=0,A=0,S=0,O=null,D=0,z=new n.Buf16(16),I=new n.Buf16(16),M=null,P=0;for(y=0;y<=15;y++)z[y]=0;for(U=0;U<h;U++)z[e[i+U]]++;for(F=x,L=15;L>=1&&0===z[L];L--);if(F>L&&(F=L),0===L)return l[d++]=20971520,l[d++]=20971520,p.bits=1,0;for(k=1;k<L&&0===z[k];k++);for(F<k&&(F=k),C=1,y=1;y<=15;y++)if(C<<=1,(C-=z[y])<0)return-1;if(C>0&&(0===t||1!==L))return-1;for(I[1]=0,y=1;y<15;y++)I[y+1]=I[y]+z[y];for(U=0;U<h;U++)0!==e[i+U]&&(c[I[e[i+U]]++]=U);if(0===t?(O=M=c,v=19):1===t?(O=a,D-=257,M=s,P-=257,v=256):(O=r,M=o,v=-1),S=0,U=0,y=k,m=d,B=F,E=0,_=-1,g=(A=1<<F)-1,1===t&&A>852||2===t&&A>592)return 1;for(;;){w=y-E,c[U]<v?(b=0,R=c[U]):c[U]>v?(b=M[P+c[U]],R=O[D+c[U]]):(b=96,R=0),u=1<<y-E,k=f=1<<B;do{l[m+(S>>E)+(f-=u)]=w<<24|b<<16|R|0}while(0!==f);for(u=1<<y-1;S&u;)u>>=1;if(0!==u?(S&=u-1,S+=u):S=0,U++,0==--z[y]){if(y===L)break;y=e[i+c[U]]}if(y>F&&(S&g)!==_){for(0===E&&(E=F),m+=k,C=1<<(B=y-E);B+E<L&&!((C-=z[B+E])<=0);)B++,C<<=1;if(A+=1<<B,1===t&&A>852||2===t&&A>592)return 1;l[_=S&g]=F<<24|B<<16|m-d|0}}return 0!==S&&(l[m+S]=y-E<<24|64<<16|0),p.bits=F,0}},function(t,e,i){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},function(t,e){t.exports='<v-container fluid grid-list-md text-xs-center v-show="show" style="padding-top: 0%; background: #FAFAFA">\n  <v-layout row wrap>\n    <v-flex v-for="(item, index) in colors" xs2 style="margin: 0%; padding: 0%;">\n      <fast-button @tap="color = index" :color="item" block depressed class="headline" style="height: 2em; min-width: 0%; min-height: 0%; margin: 0%; padding: 0%;">\n        <v-icon large v-show="color == index" color="black">colorize</v-icon>\n      </fast-button>\n    </v-flex>\n    <v-flex xs2 style="margin: 0%; padding: 0%;">\n      <fast-button @tap="color = -1" block depressed class="headline" style="height: 2em; min-width: 0%; min-height: 0%; margin: 0%; padding: 0%;">\n        <v-icon large :color="color == -1?\'primary\':\'black\'">settings_backup_restore</v-icon>\n      </fast-button>\n    </v-flex>\n    <v-flex xs2 style="margin: 0%; padding: 0%;">\n      <fast-button @tap="reset" block depressed class="headline" style="height: 2em; min-width: 0%; min-height: 0%; margin: 0%; padding: 0%;">\n        <v-icon large color="red">clear</v-icon>\n      </fast-button>\n    </v-flex>\n  </v-layout>\n  <v-layout row wrap>\n    <v-flex xs12>\n      <v-text-field outline single-line hide-details class="headline" :append-icon="scene == \'\'?\'\':\'clear\'"\n        @click:append="scene = \'\'" v-model="scene">\n        <v-icon style="vertical-align: middle" slot="label">terrain</v-icon>\n      </v-text-field>\n    </v-flex>\n  </v-layout>\n  <v-layout row wrap>\n    <v-flex xs12>\n      <v-text-field outline single-line hide-details class="headline" :append-icon="action == \'\'?\'\':\'clear\'"\n        @click:append="action = \'\'" v-model="action">\n        <v-icon style="vertical-align: middle" slot="label">theaters</v-icon>\n      </v-text-field>\n    </v-flex>\n  </v-layout>\n  <v-layout row wrap>\n    <v-flex xs3>\n      <fast-button icon large :disabled="action == \'\' || recording" @tap="toggle" style="margin: 0%; padding: 0%;">\n        <v-icon large>{{playing?\'stop\':\'play_arrow\'}}</v-icon>\n      </fast-button>\n    </v-flex>\n    <v-flex xs3>\n      <fast-button icon large @tap="snap" style="margin: 0%; padding: 0%;">\n        <v-icon large>camera_alt</v-icon>\n      </fast-button>\n    </v-flex>\n    <v-flex xs3>\n      <fast-button icon large :disabled="action == \'\' || recording" @tap="film" style="margin: 0%; padding: 0%;">\n        <v-icon large>videocam</v-icon>\n      </fast-button>\n    </v-flex>\n    <v-flex xs3>\n      <fast-button icon large :disabled="recording" @tap="share" style="margin: 0%; padding: 0%;">\n        <v-icon large>share</v-icon>\n      </fast-button>\n    </v-flex>\n  </v-layout>\n  <v-dialog v-model="dialog" :width="game.width">\n    <v-card flat>\n      <v-card-text class="title" style="word-break: break-all;">{{link}}</v-card-text>\n    </v-card>\n  </v-dialog>\n</v-container>'},function(t,e){t.exports='<v-app>\n  <div v-resize="resize">\n    <div ref=cuber></div>\n    <div ref=panel>\n      <keyboard-panel :show="option.mode == \'play\' && option.keyboard"></keyboard-panel>\n      <script-panel :show="option.mode == \'script\'"></script-panel>\n      <movie-panel :show="option.mode == \'movie\'"></movie-panel>\n    </div>\n    <fast-button icon large @tap="menu = !menu;" style="position:absolute;right:1em;top:1em">\n      <v-icon large>menu</v-icon>\n    </fast-button>\n    <fast-button v-show="option.mode == \'play\' && !option.keyboard" icon large @tap="option.keyboard = !option.keyboard;" style="position:absolute;right:1em;bottom:1em">\n      <v-icon large>keyboard</v-icon>\n    </fast-button>\n  </div>\n  <app-menu v-model="menu"></app-menu>\n</v-app>'},function(t,e,i){t.exports=i(4)(42)},function(t,e,i){t.exports=i(4)(13)},function(t,e,i){t.exports=i(4)(16)},function(t,e){t.exports='<v-btn @click.native.stop.prevent="$emit(\'tap\')" @touchstart.native.stop.prevent @touchend.native.stop.prevent="$emit(\'tap\')" :ripple="ripple" :flat="flat" :block="block" :icon="icon" :large="large" :outline="outline" :color="color" :fixed="fixed" :top="top" :bottom="bottom" :left="left" :right="right" :disabled="disabled">\n  <slot></slot>\n</v-btn>'},function(t,e,i){"use strict";i.r(e);var n,a=i(2),s=i(1),r=i(0);class o extends r.Geometry{constructor(t,e){super();let i=t/2,n=i-e,a=[[-n,+n,+i],[+n,+n,+i],[+n,-n,+i],[-n,-n,+i],[-n,+i,-n],[+n,+i,-n],[+n,+i,+n],[-n,+i,+n],[-i,-n,-n],[-i,+n,-n],[-i,+n,+n],[-i,-n,+n],[+n,+n,-i],[-n,+n,-i],[-n,-n,-i],[+n,-n,-i],[-n,-i,+n],[+n,-i,+n],[+n,-i,-n],[-n,-i,-n],[+i,+n,+n],[+i,+n,-n],[+i,-n,-n],[+i,-n,+n]];for(let t=0;t<a.length;t++){let e=a[t];this.vertices.push(new r.Vector3(e[0],e[1],e[2]))}for(let t=0;t<o._INDICES.length;t++){let e=o._INDICES[t],i=new r.Face3(e[0],e[1],e[2]);this.faces.push(i)}this.computeFaceNormals()}}o._INDICES=[[1,6,7],[0,1,7],[3,0,10],[11,3,10],[17,2,3],[16,17,3],[23,20,1],[2,23,1],[5,12,13],[4,5,13],[9,13,14],[8,9,14],[22,15,12],[21,22,12],[19,14,15],[18,19,15],[7,4,9],[10,7,9],[11,8,19],[16,11,19],[23,17,18],[22,23,18],[20,21,5],[6,20,5],[20,6,1],[10,0,7],[21,12,5],[13,9,4],[23,2,17],[11,16,3],[22,18,15],[8,14,19]];!function(t){t[t.L=0]="L",t[t.R=1]="R",t[t.D=2]="D",t[t.U=3]="U",t[t.B=4]="B",t[t.F=5]="F"}(n||(n={}));class h extends r.Group{constructor(t){super(),this._vector=new r.Vector3,this._stickers=[],this._edges=[],this._quaternion=new r.Quaternion,this.initial=t;let e=t%3-1,i=Math.floor(t%9/3)-1,a=Math.floor(t/9)-1;this.vector=new r.Vector3(e,i,a),this._materials=[this._vector.x<0?h._MATERIALS.o:h._MATERIALS.i,this._vector.x>0?h._MATERIALS.r:h._MATERIALS.i,this._vector.y<0?h._MATERIALS.w:h._MATERIALS.i,this._vector.y>0?h._MATERIALS.y:h._MATERIALS.i,this._vector.z<0?h._MATERIALS.g:h._MATERIALS.i,this._vector.z>0?h._MATERIALS.b:h._MATERIALS.i],this._frame=new r.Mesh(h._FRAME,h._MATERIALS.p),this.add(this._frame);for(let t=0;t<6;t++){let e=new r.Mesh(h._EDGE,h._MATERIALS.p),i=new r.Mesh(h._STICKER,this._materials[t]);switch(t){case n.L:e.rotation.y=-Math.PI/2,e.position.x=-h.SIZE/2,i.rotation.y=-Math.PI/2,i.position.x=-h.SIZE/2,i.name="L";break;case n.R:e.rotation.y=Math.PI/2,e.position.x=h.SIZE/2,i.rotation.y=Math.PI/2,i.position.x=h.SIZE/2,i.name="R";break;case n.D:e.rotation.x=Math.PI/2,e.position.y=-h.SIZE/2,i.rotation.x=Math.PI/2,i.position.y=-h.SIZE/2,i.name="D";break;case n.U:e.rotation.x=-Math.PI/2,e.position.y=h.SIZE/2,i.rotation.x=-Math.PI/2,i.position.y=h.SIZE/2,i.name="U";break;case n.B:e.rotation.x=Math.PI,e.position.z=-h.SIZE/2,i.rotation.x=Math.PI,i.position.z=-h.SIZE/2,i.name="B";break;case n.F:e.rotation.z=0,e.position.z=h.SIZE/2,i.rotation.x=2*Math.PI,i.position.z=h.SIZE/2,i.name="F"}this.add(e),this._edges.push(e),this.add(i),this._stickers.push(i),this.matrixAutoUpdate=!1,this.updateMatrix()}}set vector(t){this._vector.set(Math.round(t.x),Math.round(t.y),Math.round(t.z)),this._index=9*(this.vector.z+1)+3*(this.vector.y+1)+(this.vector.x+1),this.position.x=h.SIZE*this._vector.x,this.position.y=h.SIZE*this._vector.y,this.position.z=h.SIZE*this._vector.z}get vector(){return this._vector}set index(t){let e=t%3-1,i=Math.floor(t%9/3)-1,n=Math.floor(t/9)-1;this.vector=new r.Vector3(e,i,n)}get index(){return this._index}getColor(t){let e=new r.Vector3(0,0,0);switch(t){case n.L:e.x=-1;break;case n.R:e.x=1;break;case n.D:e.y=-1;break;case n.U:e.y=1;break;case n.B:e.z=-1;break;case n.F:e.z=1}this._quaternion.copy(this.quaternion),e.applyQuaternion(this._quaternion.inverse());let i=Math.round(e.x),a=Math.round(e.y),s=Math.round(e.z),o=0;return i<0?o=n.L:i>0?o=n.R:a<0?o=n.D:a>0?o=n.U:s<0?o=n.B:s>0&&(o=n.F),o}stick(t,e){switch(e){case h.COLORS.y:this._stickers[t].material=h._MATERIALS.y;break;case h.COLORS.w:this._stickers[t].material=h._MATERIALS.w;break;case h.COLORS.b:this._stickers[t].material=h._MATERIALS.b;break;case h.COLORS.g:this._stickers[t].material=h._MATERIALS.g;break;case h.COLORS.r:this._stickers[t].material=h._MATERIALS.r;break;case h.COLORS.o:this._stickers[t].material=h._MATERIALS.o;break;case h.COLORS.i:this._stickers[t].material=h._MATERIALS.i;break;case h.COLORS.h:this._stickers[t].material=h._MATERIALS.h;break;case h.COLORS.c:this._stickers[t].material=h._MATERIALS.c;break;case h.COLORS.p:this._stickers[t].material=h._MATERIALS.p;break;default:this._stickers[t].material=this._materials[t]}}}h.SIZE=64,h._BORDER_WIDTH=3,h._EDGE_WIDTH=2,h._FRAME=new o(h.SIZE,h._BORDER_WIDTH),h._EDGE=new class extends r.ShapeGeometry{constructor(t,e){let i=new r.Shape;t/=2,i.moveTo(-t,-t),i.lineTo(-t,t),i.lineTo(t,t),i.lineTo(t,-t),i.closePath();let n=-(t-=e),a=t,s=-t,o=t,h=t/4,l=new r.Shape;l.moveTo(n,s+h),l.quadraticCurveTo(n,s,n+h,s),l.lineTo(o-h,s),l.quadraticCurveTo(o,s,o,s+h),l.lineTo(o,a-h),l.quadraticCurveTo(o,a,o-h,a),l.lineTo(n+h,a),l.quadraticCurveTo(n,a,n,a-h),l.lineTo(n,s+h),l.closePath(),i.holes.push(l),super(i)}}(h.SIZE-2*h._BORDER_WIDTH,h._EDGE_WIDTH),h._STICKER=new class extends r.ShapeGeometry{constructor(t,e){t/=2;let i=-(t-=e),n=t,a=-t,s=t,o=t/4,h=new r.Shape;h.moveTo(i,a+o),h.lineTo(i,n-o),h.quadraticCurveTo(i,n,i+o,n),h.lineTo(s-o,n),h.quadraticCurveTo(s,n,s,n-o),h.lineTo(s,a+o),h.quadraticCurveTo(s,a,s-o,a),h.lineTo(i+o,a),h.quadraticCurveTo(i,a,i,a+o),h.closePath(),super(h)}}(h.SIZE-2*h._BORDER_WIDTH,h._EDGE_WIDTH),h.COLORS={g:"#009D54",o:"#FF6C00",b:"#3D81F6",y:"#FDCC09",w:"#FFFFFF",r:"#DC422F",i:"#808080",p:"#202020",h:"#EA80FC",c:"#8B4513"},h._MATERIALS={p:new r.MeshPhongMaterial({color:h.COLORS.p,specular:"#040404"}),g:new r.MeshBasicMaterial({color:h.COLORS.g}),o:new r.MeshBasicMaterial({color:h.COLORS.o}),b:new r.MeshBasicMaterial({color:h.COLORS.b}),y:new r.MeshBasicMaterial({color:h.COLORS.y}),w:new r.MeshBasicMaterial({color:h.COLORS.w}),r:new r.MeshBasicMaterial({color:h.COLORS.r}),i:new r.MeshBasicMaterial({color:h.COLORS.i}),h:new r.MeshBasicMaterial({color:h.COLORS.h}),c:new r.MeshBasicMaterial({color:h.COLORS.c})};class l{constructor(t){this.queue=[],this._game=t}get length(){return this.queue.length}finish(){for(const t of this.queue)t.fast=!0;this._game.tweener.finish(),this.update()}twist(t,e=!1,i=1,n=null,a=!1){this.finish();let s=new c(t,e,i).parse();s.length>0&&(s[s.length-1].callback=n);for(let t of s)t.fast=a,this.queue.push(t);this.update()}update(){if(0===this.queue.length||this._game.lock)return!1;let t=this.queue.shift();return void 0!=t&&(this.start(t),!0)}start(t){if("-"==t.exp)return t.fast?void this.update():void this._game.tweener.tween(0,1,this._game.duration*t.times/2,t=>{},()=>{t.callback&&t.callback(),this.update()});if("#"==t.exp)return this._game.cube.reset(),this._game.dirty=!0,t.callback&&t.callback(),void this.update();if("*"==t.exp){this._game.cube.reset(),this._game.dirty=!0;let e=this._game.random(),i=new c(e).parse();i[i.length-1].callback=t.callback;for(let t of i)t.fast=!0,this.queue.unshift(t);return void this.update()}let e=-Math.PI/2;t.reverse&&(e=-e),t.times&&(e*=t.times);let i=p.GROUPS[t.exp];if(void 0!==i){if(i.hold(this._game),t.fast)return i.angle=e,i.adjust(this._game),t.callback&&t.callback(),void this.update();{let n=this._game.duration*Math.min(1,Math.abs(e)/Math.PI);this._game.tweener.tween(i.angle,i.angle+e,n,t=>{i.angle=t,this._game.dirty=!0},()=>{i.adjust(this._game),t.callback&&t.callback(),this.update()})}}else this.update()}}class d{constructor(){this.exp="",this.reverse=!1,this.times=1,this.fast=!1,this.callback=null}get format(){return this.fast?"":0==this.times?"":(this.exp.length>1?"(":"")+this.exp+(this.exp.length>1?")":"")+(this.reverse?"'":"")+(1==this.times?"":String(this.times))}}class c{constructor(t,e=!1,i=1){if(this._children=[],this._twist=new d,t=t.replace(/[^\*#\-xyzbsfdeulmr\(\)'0123456789]/gi,""),this._twist.exp=t,this._twist.reverse=e,this._twist.times=i,1==t.length)return/[XYZ]/.test(this._twist.exp)&&(this._twist.exp=this._twist.exp.toLowerCase()),void(/[mes]/.test(this._twist.exp)&&(this._twist.exp=this._twist.exp.toUpperCase()));let n=[],a="",s=0;for(let e=0;e<t.length;e++){let i=t.charAt(e);if(0==a.length){if(c._ACTIONS.indexOf(i)>=0){a=a.concat(i);continue}if("("===i){a=a.concat(i),s++;continue}return}0==s?c._SUFFIX.indexOf(i)>=0?a=a.concat(i):(n.push(a),a="",e--):("("===i?s++:")"===i&&s--,a=a.concat(i))}if(a.length>0&&n.push(a),0!=n.length)for(let t of n){var r=t.match(/^\((\S+)\)('?)(\d*)('?)$/i);if(null===r&&(r=t.match(/([\*#\-xyzbsfdeulmr])('?)(\d*)('?)/i)),null===r)return;let e=1==(r[2]+r[4]).length,i=0==r[3].length?1:parseInt(r[3]);this._children.push(new c(r[1],e,i))}}parse(t=!1){t=this._twist.reverse!==t;let e=[];if(0!==this._children.length)for(var i=0;i<this._twist.times;i++)for(var n=0;n<this._children.length;n++){var a=(t?this._children[this._children.length-n-1]:this._children[n]).parse(t);for(let t of a)e.push(t)}else if(""!=this._twist.exp){let i=new d;i.exp=this._twist.exp,i.reverse=t,i.times=this._twist.times,e.push(i)}return e}}c._ACTIONS="*#-xyzbsfdeulmrXYZBFSDEULMR",c._SUFFIX="'0123456789";class p extends r.Group{constructor(t,e,i){super(),this._cubelets=[],this.name=t,this.indices=e,this.axis=i,this.matrixAutoUpdate=!1,this.updateMatrix()}set angle(t){this.setRotationFromAxisAngle(this.axis,t),this._angle=t,this.updateMatrix()}get angle(){return this._angle}get exp(){let t=this._angle>0,e=Math.round(Math.abs(this._angle)/(Math.PI/2)),i=new d;return i.exp=this.name,i.times=e,i.reverse=t,i.format}hold(t){this._angle=0;for(let e of this.indices){let i=t.cube.cubelets[e];this._cubelets.push(i),t.cube.remove(i),this.add(i)}t.lock=!0}revert(t){let e=-this._angle;if(0===e){for(;;){let e=this._cubelets.pop();if(void 0===e)break;this.remove(e),t.cube.add(e),t.cube.cubelets[e.index]=e}this._angle=0,t.lock=!1,t.dirty=!0}else{var i=t.duration*Math.min(1,Math.abs(e)/Math.PI);i/=2,t.tweener.tween(this.angle,this.angle+e,i,e=>{this.angle=e,t.dirty=!0},()=>{this.revert(t)})}}adjust(t,e=this._angle){let i=(e=Math.round(e/(Math.PI/2))*(Math.PI/2))-this._angle;if(0===i){for(;;){let e=this._cubelets.pop();if(void 0===e)break;this.rotate(e),this.remove(e),t.cube.add(e),t.cube.cubelets[e.index]=e}t.lock=!1,t.dirty=!0,this._angle=0}else{var n=t.duration*Math.min(1,Math.abs(i)/Math.PI);t.tweener.tween(this.angle,this.angle+i,n,e=>{this.angle=e,t.dirty=!0},()=>{this.adjust(t,this.angle)})}}rotate(t){t.rotateOnWorldAxis(this.axis,this._angle),t.vector=t.vector.applyAxisAngle(this.axis,this._angle),t.updateMatrix()}}p.GROUPS={L:new p("L",[6,15,24,3,12,21,0,9,18],new r.Vector3(-1,0,0)),D:new p("D",[18,19,20,9,10,11,0,1,2],new r.Vector3(0,-1,0)),B:new p("B",[8,7,6,5,4,3,2,1,0],new r.Vector3(0,0,-1)),R:new p("R",[26,17,8,23,14,5,20,11,2],new r.Vector3(1,0,0)),U:new p("U",[6,7,8,15,16,17,24,25,26],new r.Vector3(0,1,0)),F:new p("F",[24,25,26,21,22,23,18,19,20],new r.Vector3(0,0,1)),l:new p("l",[0,3,6,9,12,15,18,21,24,1,4,7,10,13,16,19,22,25],new r.Vector3(-1,0,0)),d:new p("d",[0,1,2,9,10,11,18,19,20,3,4,5,12,13,14,21,22,23],new r.Vector3(0,-1,0)),b:new p("b",[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17],new r.Vector3(0,0,-1)),r:new p("r",[2,5,8,11,14,17,20,23,26,1,4,7,10,13,16,19,22,25],new r.Vector3(1,0,0)),u:new p("u",[6,7,8,15,16,17,24,25,26,3,4,5,12,13,14,21,22,23],new r.Vector3(0,1,0)),f:new p("f",[18,19,20,21,22,23,24,25,26,9,10,11,12,13,14,15,16,17],new r.Vector3(0,0,1)),M:new p("M",[1,4,7,10,13,16,19,22,25],new r.Vector3(-1,0,0)),E:new p("E",[3,4,5,12,13,14,21,22,23],new r.Vector3(0,-1,0)),S:new p("S",[9,10,11,12,13,14,15,16,17],new r.Vector3(0,0,1)),x:new p("x",[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26],new r.Vector3(1,0,0)),y:new p("y",[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26],new r.Vector3(0,1,0)),z:new p("z",[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26],new r.Vector3(0,0,1))};class u extends r.Group{constructor(){super(),this.cubelets=[],this._initial=[];for(var t=0;t<27;t++){let e=new h(t);this.cubelets.push(e),this._initial.push(e),this.add(e)}this.matrixAutoUpdate=!1,this.updateMatrix()}compare(t,e){return t.index-e.index}index(t){return this._initial[t].index}reset(){for(let t of this.cubelets)t.setRotationFromEuler(new r.Euler(0,0,0)),t.index=t.initial,t.updateMatrix();this.cubelets.sort(this.compare)}stick(t,e,i){this._initial[t].stick(e,i)}get state(){let t=[];for(let e of p.GROUPS.U.indices)t.push(this.cubelets[e].getColor(n.U));for(let e of p.GROUPS.R.indices)t.push(this.cubelets[e].getColor(n.R));for(let e of p.GROUPS.F.indices)t.push(this.cubelets[e].getColor(n.F));for(let e of p.GROUPS.D.indices)t.push(this.cubelets[e].getColor(n.D));for(let e of p.GROUPS.L.indices)t.push(this.cubelets[e].getColor(n.L));for(let e of p.GROUPS.B.indices)t.push(this.cubelets[e].getColor(n.B));return t.join("")}}class f{constructor(){this._tweens=[],this.loop()}loop(){requestAnimationFrame(this.loop.bind(this)),this.update()}tween(t,e,i,n,a){this._tweens.push(new _(t,e,i,n,a))}update(){if(0===this._tweens.length)return!1;for(var t=0;t<this._tweens.length;)if(this._tweens[t].update())t++;else{let e=this._tweens.splice(t,1);for(const t of e)t.finish()}return!0}finish(){let t=this._tweens.splice(0,this._tweens.length);for(const e of t)e.finish()}}class _{constructor(t,e,i,n,a){this._value=0,this._finished=!1,this._begin=t,this._end=e,this._duration=i,this._update=n,this._finish=a}finish(){this._finished||this._update(this._end),this._finish()}update(){this._value++;let t=this._value/this._duration;t=t>1?1:t;let e=1- --t*t;return this._update(this._begin+(this._end-this._begin)*e),1!=e||(this._finished=!0,!1)}}class g{}class m{constructor(t){this._dragging=!1,this._rotating=!1,this._angle=0,this.taps=[],this._onMouseDown=(t=>(this._down.x=t.offsetX,this._down.y=t.offsetY,this._handleDown(),t.returnValue=!1,!1)),this._onMouseMove=(t=>(this._move.x=t.offsetX,this._move.y=t.offsetY,this._handleMove(),t.returnValue=!1,!1)),this._onMouseUp=(t=>(this._handleUp(),t.returnValue=!1,!1)),this._onMouseOut=(t=>(this._handleUp(),t.returnValue=!1,!1)),this._onTouch=(t=>{let e=t.changedTouches[0];switch(t.type){case"touchstart":this._down.x=e.clientX,this._down.y=e.clientY,this._handleDown();break;case"touchmove":this._move.x=e.clientX,this._move.y=e.clientY,this._handleMove();break;case"touchend":this._handleUp();break;default:return}return t.returnValue=!1,!1}),this._game=t,this._ray=new r.Ray,this._down=new r.Vector2(0,0),this._move=new r.Vector2(0,0),this._matrix=new r.Matrix4,this._holder=new g,this._holder.vector=new r.Vector3,this._vector=new r.Vector3,this._planes=[new r.Plane(new r.Vector3(1,0,0),3*-h.SIZE/2),new r.Plane(new r.Vector3(0,1,0),3*-h.SIZE/2),new r.Plane(new r.Vector3(0,0,1),3*-h.SIZE/2)],this._game.canvas.addEventListener("mousedown",this._onMouseDown),this._game.canvas.addEventListener("mousemove",this._onMouseMove),this._game.canvas.addEventListener("mouseup",this._onMouseUp),this._game.canvas.addEventListener("mouseout",this._onMouseOut),this._game.canvas.addEventListener("touchstart",this._onTouch),this._game.canvas.addEventListener("touchmove",this._onTouch),this._game.canvas.addEventListener("touchend",this._onTouch),this.loop()}loop(){requestAnimationFrame(this.loop.bind(this)),this.update()}update(){if(!this._game.enable&&this._rotating&&this._group.angle!=this._angle){let t=(this._angle-this._group.angle)/2,e=Math.PI/this._game.duration*4;t>e&&(t=e),t<-e&&(t=-e),this._group.angle+=t,this._game.dirty=!0}}match(){let t,e=[];var i=this._holder.index;if(-1===this._holder.index)return 0===(t=p.GROUPS.x).axis.dot(this._holder.plane.normal)&&e.push(t),0===(t=p.GROUPS.y).axis.dot(this._holder.plane.normal)&&e.push(t),0===(t=p.GROUPS.z).axis.dot(this._holder.plane.normal)&&e.push(t),e;var n=i%3-1,a=Math.floor(i%9/3)-1,s=Math.floor(i/9)-1;switch(n){case-1:0===(t=p.GROUPS.L).axis.dot(this._holder.plane.normal)&&e.push(t);break;case 0:0===(t=p.GROUPS.M).axis.dot(this._holder.plane.normal)&&e.push(t);break;case 1:0===(t=p.GROUPS.R).axis.dot(this._holder.plane.normal)&&e.push(t)}switch(a){case-1:0===(t=p.GROUPS.D).axis.dot(this._holder.plane.normal)&&e.push(t);break;case 0:0===(t=p.GROUPS.E).axis.dot(this._holder.plane.normal)&&e.push(t);break;case 1:0===(t=p.GROUPS.U).axis.dot(this._holder.plane.normal)&&e.push(t)}switch(s){case-1:0===(t=p.GROUPS.B).axis.dot(this._holder.plane.normal)&&e.push(t);break;case 0:0===(t=p.GROUPS.S).axis.dot(this._holder.plane.normal)&&e.push(t);break;case 1:0===(t=p.GROUPS.F).axis.dot(this._holder.plane.normal)&&e.push(t)}return e}_intersect(t,e){var i=t.x/this._game.canvas.clientWidth*2-1,n=-t.y/this._game.canvas.clientHeight*2+1;this._ray.origin.setFromMatrixPosition(this._game.camera.matrixWorld),this._ray.direction.set(i,n,.5).unproject(this._game.camera).sub(this._ray.origin).normalize(),this._ray.applyMatrix4(this._matrix.identity().getInverse(this._game.scene.matrix));var a=new r.Vector3;return this._ray.intersectPlane(e,a),a}_handleDown(){if(this._game.enable&&this._game.twister.finish(),this._game.lock)return!0;this._dragging=!0,this._holder.index=-1,this._planes.some(t=>{var e=this._intersect(this._down,t);if(null!==e&&Math.abs(e.x)<=3*h.SIZE/2+.01&&Math.abs(e.y)<=3*h.SIZE/2+.01&&Math.abs(e.z)<=3*h.SIZE/2+.01){this._holder.plane=t;var i=Math.ceil(Math.round(e.x)/h.SIZE-.5),n=Math.ceil(Math.round(e.y)/h.SIZE-.5),a=Math.ceil(Math.round(e.z)/h.SIZE-.5);return this._holder.index=i<2&&i>-2&&n<2&&n>-2&&a<2&&a>-2?9*(a+1)+3*(n+1)+(i+1):-1,!0}return!1},this),this._game.dirty=!0}_handleMove(){if(this._dragging){var t=this._move.x-this._down.x,e=this._move.y-this._down.y,i=Math.sqrt(t*t+e*e);if(Math.min(this._game.canvas.clientWidth,this._game.canvas.clientHeight)/i>64)return!0;if(this._game.lock)return this._dragging=!1,this._rotating=!1,!0;if(this._dragging=!1,this._rotating=!0,-1===this._holder.index)if(t*t>e*e)this._group=p.GROUPS.y;else{let t=new r.Vector3(3*h.SIZE/2,0,3*h.SIZE/2);t.applyMatrix4(this._game.scene.matrix).project(this._game.camera);let e=this._game.canvas.clientWidth/2,i=Math.round(t.x*e+e);this._down.x<i?this._group=p.GROUPS.x:this._group=p.GROUPS.z}else{var n=this._intersect(this._down,this._holder.plane),a=this._intersect(this._move,this._holder.plane);this._vector.subVectors(a,n);var s=this._vector.x,o=this._vector.y,l=this._vector.z,d=Math.max(Math.abs(s),Math.abs(o),Math.abs(l));s=Math.abs(s)===d?s:0,o=Math.abs(o)===d?o:0,l=Math.abs(l)===d?l:0,this._vector.set(s,o,l),this._holder.vector.copy(this._vector.multiply(this._vector).normalize()),this.match().some(t=>0===t.axis.dot(this._vector)&&(this._group=t,!0),this),this._vector.crossVectors(this._holder.vector,this._holder.plane.normal),this._holder.vector.multiplyScalar(this._vector.x+this._vector.y+this._vector.z)}this._group.hold(this._game)}if(this._rotating){if(-1===this._holder.index){t=this._move.x-this._down.x,e=this._move.y-this._down.y;this._group===p.GROUPS.y?this._angle=t/h.SIZE*Math.PI/4:this._group===p.GROUPS.x?this._angle=e/h.SIZE*Math.PI/4:this._angle=-e/h.SIZE*Math.PI/4}else{n=this._intersect(this._down,this._holder.plane),a=this._intersect(this._move,this._holder.plane);this._vector.subVectors(a,n).multiply(this._holder.vector),this._angle=-(this._vector.x+this._vector.y+this._vector.z)*(this._group.axis.x+this._group.axis.y+this._group.axis.z)/h.SIZE*Math.PI/4}if(this._game.enable)return this._angle=this._angle/Math.abs(this._angle)*Math.PI/2,void this._handleUp()}}_handleUp(){if(this._dragging){let t=null;switch(this._holder.plane){case this._planes[0]:t=n.R;break;case this._planes[1]:t=n.U;break;case this._planes[2]:t=n.F}for(let e of this.taps)e(this._holder.index,t)}this._rotating&&this._group&&null!==this._group&&(this._game.enable?this._group.adjust(this._game,this._angle):this._group.revert(this._game)),this._holder.index=-1,this._dragging=!1,this._rotating=!1,this._game.dirty=!0}}class v{constructor(){this.lock=!1,this.enable=!0,this.dirty=!0,this.duration=60,this.width=0,this.height=0,this.scale=1,this.scene=new r.Scene,this.scene.rotation.x=Math.PI/6,this.scene.rotation.y=-Math.PI/5,this.camera=new r.PerspectiveCamera(50,1,1,32*h.SIZE),this.camera.position.x=0,this.camera.position.y=0,this.camera.position.z=3*h.SIZE*4,this.tweener=new f,this.twister=new l(this),this.cube=new u,this.scene.add(this.cube);for(let t in p.GROUPS)this.scene.add(p.GROUPS[t]);let t;(t=new r.DirectionalLight).position.x=h.SIZE,t.position.y=h.SIZE,t.position.z=h.SIZE/2,this.scene.add(t),this.renderer=new r.WebGLRenderer({antialias:!0,preserveDrawingBuffer:!0}),this.renderer.setClearColor(14737632),this.renderer.setPixelRatio(window.devicePixelRatio),this.canvas=this.renderer.domElement,this.controller=new m(this),this.loop()}resize(){this.camera.aspect=this.width/this.height;let t=this.height/Math.min(this.width,this.height)*h.SIZE/4,e=2*Math.atan(t/h.SIZE)*180/Math.PI;this.camera.fov=e*this.scale,this.camera.lookAt(this.scene.position),this.camera.updateProjectionMatrix(),this.renderer.setSize(this.width,this.height,!0),this.dirty=!0}render(){this.dirty&&(this.renderer.render(this.scene,this.camera),this.dirty=!1)}loop(){requestAnimationFrame(this.loop.bind(this)),this.render()}random(){let t="",e=[],i=-1,n=["U","D","R","L","F","B"],a=-1;for(let t=0;t<24;t++){let t=[];for(;a==i;)a=Math.floor(3*Math.random());let s=Math.floor(2*Math.random());t.push(n[2*a+s]);let r=Math.random();r<.2?t.push("2"):r<.6&&t.push("'"),e.push(t.join("")),i=a}return t=e.join(" ")}}class w{constructor(t){this._mode="",this._keyboard=!1,this._size=0,this._speed=0,this._storage=window.localStorage,this._game=t,this.mode=this._storage.getItem("option.mode")||"play",this.keyboard="true"==this._storage.getItem("option.keyboard"),this.speed=Number(this._storage.getItem("option.speed")||0),this.size=Number(this._storage.getItem("option.size")||0)}get mode(){return this._mode}set mode(t){this._mode=t,this._storage.setItem("option.mode",t),this._game.enable="play"==this.mode||"movie"==this.mode}get keyboard(){return this._keyboard}set keyboard(t){this._keyboard=t,this._storage.setItem("option.keyboard",String(t))}get size(){return this._size}set size(t){t<-4&&(t=-4),t>4&&(t=4),this._size=t,this._storage.setItem("option.size",String(t)),this._game.scale=Math.pow(2,-this.size/8),this._game.resize()}get speed(){return this._speed}set speed(t){t<-4&&(t=-4),t>4&&(t=4),this._speed=t,this._storage.setItem("option.speed",String(t)),this._game.duration=50-10*this.speed}}var b=function(t,e,i,n){var a,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(r=(s<3?a(r):s>3?a(e,i,r):a(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r},R=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let x=class extends a.default{constructor(){super(...arguments),this.layers=0,this.operations=[["L","D","B","F","U","R","L'","D'","B'","F'","U'","R'"],["M","E","S'","S","E'","M'","M'","E'","S","S'","E","M"],["l","d","b","f","u","r","l'","d'","b'","f'","u'","r'"],["x'","y'","z'","z","y","x","x","y","z","z'","y'","x'"]]}get exps(){return this.operations[this.layers]}twist(t){this.game.twister.twist(t),this.layers=0}};b([Object(s.Inject)("game"),R("design:type",v)],x.prototype,"game",void 0),b([Object(s.Inject)("option"),R("design:type",w)],x.prototype,"option",void 0),b([Object(s.Prop)({default:!1}),R("design:type",Boolean)],x.prototype,"show",void 0);var y=x=b([Object(s.Component)({template:i(13)})],x),U=function(t,e,i,n){var a,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(r=(s<3?a(r):s>3?a(e,i,r):a(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r},k=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let L=class extends a.default{constructor(){super(...arguments),this.scripts=i(14),this.progress=0,this.playing=!1,this.type=Number(window.localStorage.getItem("script.type")||0),this.index=Number(window.localStorage.getItem("script.index")||1),this.timeoutTask=0,this.intervalTask=0,this.exp="",this.actions=new c(this.exp).parse()}onShowChange(t=this.show,e=this.show){t?(this.onTypeChange(),this.onIndexChange(),this.onScriptChange(),this.onExpChange(this.exp),this.$nextTick(this.strip)):(this.playing=!1,e&&this.stick())}mounted(){this.onShowChange()}play(){if(this.progress==this.actions.length&&(this.playing=!1),this.playing){let t=this.actions[this.progress];this.progress++,this.game.twister.twist(t.exp,t.reverse,t.times,this.play,!1)}}forward(){if(this.progress==this.actions.length)return;this.playing=!1;let t=this.actions[this.progress];this.progress++,this.game.twister.twist(t.exp,t.reverse,t.times)}backward(){if(0==this.progress)return;this.playing=!1,this.progress--;let t=this.actions[this.progress];this.game.twister.twist(t.exp,!t.reverse,t.times)}stick(){for(let t=0;t<27;t++)for(let e=0;e<6;e++)this.game.cube.stick(t,e,"");this.game.dirty=!0}strip(){this.stick();let t=this.scripts[this.type].strips;for(let e of t)for(let t of e.indexes)for(let i of e.faces)this.game.cube.stick(t,i,h.COLORS.i);this.game.dirty=!0}onIndexChange(){let t=this.scripts[this.type].scripts.length;for(this.index;this.index<1;)this.index=this.index+t;for(;this.index>t;)this.index=this.index-t;window.localStorage.setItem("script.index",String(this.index))}onTypeChange(t=this.type,e=this.type){window.localStorage.setItem("script.type",String(this.type)),t!=e&&(this.index=1),this.strip()}get script(){let t=this.scripts[this.type].scripts[this.index-1],e={name:"",exp:""};return e.name=t.name,e.exp=t.exp,e}indexDown(t){return clearTimeout(this.timeoutTask),this.timeoutTask=setTimeout(()=>{this.timeoutTask=0,clearTimeout(this.intervalTask),this.intervalTask=setInterval(()=>{this.index=this.index+t},100)},500),!0}indexUp(t){return 0!=this.timeoutTask&&(clearTimeout(this.timeoutTask),this.index=this.index+t,this.timeoutTask=0),0!=this.intervalTask&&(clearInterval(this.intervalTask),this.intervalTask=0),!0}onExpChange(t){this.playing=!1;let e=window.localStorage,i=e.getItem(this.script.name);t==this.script.exp?e.removeItem(this.script.name):t!=i&&e.setItem(this.script.name,t),this.actions=new c(this.exp).parse(),this.$nextTick(this.init)}onScriptChange(){this.playing=!1;let t=window.localStorage;this.exp=t.getItem(this.script.name)||this.script.exp}toggle(){this.playing?this.playing=!1:(this.playing=!this.playing,this.play())}init(){this.progress=0,this.playing=!1,this.game.twister.twist("#"),this.game.twister.twist(this.exp,!0,1,null,!0)}};U([Object(s.Inject)("game"),k("design:type",v)],L.prototype,"game",void 0),U([Object(s.Inject)("option"),k("design:type",w)],L.prototype,"option",void 0),U([Object(s.Prop)({default:!1}),k("design:type",Boolean)],L.prototype,"show",void 0),U([Object(s.Watch)("show"),k("design:type",Function),k("design:paramtypes",[Boolean,Boolean]),k("design:returntype",void 0)],L.prototype,"onShowChange",null),U([Object(s.Watch)("index"),k("design:type",Function),k("design:paramtypes",[]),k("design:returntype",void 0)],L.prototype,"onIndexChange",null),U([Object(s.Watch)("type"),k("design:type",Function),k("design:paramtypes",[Number,Number]),k("design:returntype",void 0)],L.prototype,"onTypeChange",null),U([Object(s.Watch)("exp"),k("design:type",Function),k("design:paramtypes",[String]),k("design:returntype",void 0)],L.prototype,"onExpChange",null),U([Object(s.Watch)("script"),k("design:type",Function),k("design:paramtypes",[]),k("design:returntype",void 0)],L.prototype,"onScriptChange",null);var F=L=U([Object(s.Component)({template:i(15)})],L),B=function(t,e,i,n){var a,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(r=(s<3?a(r):s>3?a(e,i,r):a(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r},E=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let C=class extends a.default{onValueChange(t){this.$emit("input",t)}demo(){this.game.twister.twist("UU'")}};B([Object(s.Inject)("game"),E("design:type",v)],C.prototype,"game",void 0),B([Object(s.Inject)("option"),E("design:type",w)],C.prototype,"option",void 0),B([Object(s.Prop)({default:"100%"}),E("design:type",String)],C.prototype,"width",void 0),B([Object(s.Prop)({required:!0}),E("design:type",Boolean)],C.prototype,"value",void 0),B([Object(s.Watch)("value"),E("design:type",Function),E("design:paramtypes",[Boolean]),E("design:returntype",void 0)],C.prototype,"onValueChange",null);var A=C=B([Object(s.Component)({template:i(16)})],C),S=function(t,e,i,n){var a,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(r=(s<3?a(r):s>3?a(e,i,r):a(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r},O=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let D=class extends a.default{constructor(){super(...arguments),this.tune=!1,this.data=!1}onValueChange(t){this.$emit("input",t)}mode(t){this.option.mode=t,this.$emit("input",!1)}reset(){window.localStorage.clear(),window.location.reload()}};S([Object(s.Inject)("game"),O("design:type",v)],D.prototype,"game",void 0),S([Object(s.Inject)("option"),O("design:type",w)],D.prototype,"option",void 0),S([Object(s.Prop)({required:!0}),O("design:type",Boolean)],D.prototype,"value",void 0),S([Object(s.Watch)("value"),O("design:type",Function),O("design:paramtypes",[Boolean]),O("design:returntype",void 0)],D.prototype,"onValueChange",null);var z=D=S([Object(s.Component)({template:i(17),components:{"tune-menu":A}})],D);class I{constructor(t,e,i){this.idx=t,this.len=e,this.type=i}}function M(t,e){let i=8,n=null;for(;i<t.length;){let a=t.slice(i,i+4),s=t.slice(i+4,i+8),r=G(a),o=Z(s);if(o===e)return n=new I(i,r,o);i+=8+r+4}return n}function P(t,e){let i=8,n=null,a=[];for(;i<t.length;){let s=t.slice(i,i+4),r=t.slice(i+4,i+8),o=G(s),h=Z(r);h===e&&(n=new I(i,o,h),a.push(n)),i+=8+o+4}return a}function T(t,e){let i=new Uint8Array(t.length+e.length);return i.set(t),i.set(e,t.length),i}function j(t){let e=new Uint8Array(4);return e[0]=t.charCodeAt(0),e[1]=t.charCodeAt(1),e[2]=t.charCodeAt(2),e[3]=t.charCodeAt(3),e}function Z(t){return String.fromCharCode(t[0])+String.fromCharCode(t[1])+String.fromCharCode(t[2])+String.fromCharCode(t[3])}function N(t){let e=t,i=new Uint8Array([0,0,0,0]);for(let t=0;t<i.length;t++){let n=255&e;i[t]=n,e=(e-n)/256}return i.reverse()}function G(t){return(t[0]<<24)+(t[1]<<12)+(t[2]<<8)+t[3]}function V(t){let e=t,i=new Uint8Array([0,0]);for(let t=0;t<i.length;t++){let n=255&e;i[t]=n,e=(e-n)/256}return i.reverse()}let H="00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D".split(" ").map(function(t){return parseInt(t,16)});function q(t){let e=-1;for(let i=0;i<t.length;i++)e=e>>>8^H[255&(e^t[i])];return(-1^e)>>>0}var W=i(6),K=i.n(W);class ${static encode(t){var e,i,n,a,s,r,o,h="",l=0;for(t=$._utf8_encode(t);l<t.length;)a=(e=t.charCodeAt(l++))>>2,s=(3&e)<<4|(i=t.charCodeAt(l++))>>4,r=(15&i)<<2|(n=t.charCodeAt(l++))>>6,o=63&n,isNaN(i)?r=o=64:isNaN(n)&&(o=64),h=h+$._KEYS.charAt(a)+$._KEYS.charAt(s)+$._KEYS.charAt(r)+$._KEYS.charAt(o);return h}static decode(t){var e,i,n,a,s,r,o="",h=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");h<t.length;)e=$._KEYS.indexOf(t.charAt(h++))<<2|(a=$._KEYS.indexOf(t.charAt(h++)))>>4,i=(15&a)<<4|(s=$._KEYS.indexOf(t.charAt(h++)))>>2,n=(3&s)<<6|(r=$._KEYS.indexOf(t.charAt(h++))),o+=String.fromCharCode(e),64!=s&&(o+=String.fromCharCode(i)),64!=r&&(o+=String.fromCharCode(n));return o=$._utf8_decode(o)}static _utf8_encode(t){t=t.replace(/\r\n/g,"\n");for(var e="",i=0;i<t.length;i++){var n=t.charCodeAt(i);n<128?e+=String.fromCharCode(n):n>127&&n<2048?(e+=String.fromCharCode(n>>6|192),e+=String.fromCharCode(63&n|128)):(e+=String.fromCharCode(n>>12|224),e+=String.fromCharCode(n>>6&63|128),e+=String.fromCharCode(63&n|128))}return e}static _utf8_decode(t){var e="",i=0;let n=0,a=0,s=0;for(;i<t.length;)(n=t.charCodeAt(i))<128?(e+=String.fromCharCode(n),i++):n>191&&n<224?(a=t.charCodeAt(i+1),e+=String.fromCharCode((31&n)<<6|63&a),i+=2):(a=t.charCodeAt(i+1),s=t.charCodeAt(i+2),e+=String.fromCharCode((15&n)<<12|(63&a)<<6|63&s),i+=3);return e}}$._KEYS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var Y=function(t,e,i,n){var a,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(r=(s<3?a(r):s>3?a(e,i,r):a(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r},X=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let J=class extends a.default{constructor(){super(...arguments),this.scene=window.localStorage.getItem("movie.scene")||"",this.action=window.localStorage.getItem("movie.action")||"",this.operate=0,this.playing=!1,this.encoder=new class{constructor(t){this.repeat=0,this.delay_num=1,this.delay_den=60,this.dispose=0,this.blend=1,this._frames=-1,this._seq=-1,this.encoding=!1,this._canvas=t}start(){return this.encoding=!0,this.data=new Uint8Array(0),this._frames=-1,this._seq=-1,0}addFrame(){if(null===this._canvas||!this.encoding||null===this.data)throw new Error;this._frames+=1;let t,e=function(t){let e=atob(t),i=e.length,n=new Uint8Array(i);for(let t=0;t<i;++t)n[t]=e.charCodeAt(t);return n}(this._canvas.toDataURL("image/png").replace(/^data:image\/png;base64,/,""));if(0==this._frames){let t=new Uint8Array([137,80,78,71,13,10,26,10]);this.data=T(this.data,t);let i=M(e,"IHDR");if(null==i)throw new Error;let n=e.slice(i.idx,i.idx+12+i.len);this.data=T(this.data,n);let a=new Uint8Array(0);a=T(a=T(a=T(a=T(a=T(a,new Uint8Array([0,0,0,8])),j("acTL")),new Uint8Array([0,0,0,1])),N(this.repeat)),N(q(a.slice(4,16)))),this.data=T(this.data,a);let s=P(e,"IDAT");for(let t=0;t<s.length;t++){if(0==t){this._seq+=1;let t=new Uint8Array(0);t=T(t=T(t=T(t=T(t=T(t=T(t=T(t=T(t=T(t=T(t=T(t=T(t,N(26)),j("fcTL")),N(this._seq)),N(this._canvas.width)),N(this._canvas.height)),N(0)),N(0)),V(this.delay_num)),V(this.delay_den)),new Uint8Array([this.dispose])),new Uint8Array([this.blend])),N(q(t.slice(4,34)))),this.data=T(this.data,t)}i=s[t];let n=e.slice(i.idx,i.idx+12+i.len);this.data=T(this.data,n)}}if(this._frames>0){let i=P(e,"IDAT");for(let n=0;n<i.length;n++){if(0==n){this._seq+=1;let t=new Uint8Array(0);t=T(t=T(t=T(t=T(t=T(t=T(t=T(t=T(t=T(t=T(t=T(t=T(t,N(26)),j("fcTL")),N(this._seq)),N(this._canvas.width)),N(this._canvas.height)),N(0)),N(0)),V(this.delay_num)),V(this.delay_den)),new Uint8Array([this.dispose])),new Uint8Array([this.blend])),N(q(t.slice(4,34)))),this.data=T(this.data,t)}t=i[n];let a=e.slice(t.idx+8,t.idx+8+t.len),s=t.len+4;this._seq+=1;let r=new Uint8Array(0);r=T(r=T(r=T(r=T(r=T(r,N(s)),j("fdAT")),N(this._seq)),a),N(q(r.slice(4,8+s)))),this.data=T(this.data,r)}}return 0}finish(){if(!this.encoding)throw new Error;let t=new Uint8Array([0,0,0,0,73,69,78,68,174,66,96,130]);this.data=T(this.data,t);let e=M(this.data,"acTL");if(null==e)throw new Error;let i=N(this._frames+1);this.data[e.idx+8]=i[0],this.data[e.idx+8+1]=i[1],this.data[e.idx+8+2]=i[2],this.data[e.idx+8+3]=i[3];let n=N(q(this.data.slice(e.idx+4,e.idx+4+4+8)));return this.data[e.idx+4+4+8]=n[0],this.data[e.idx+4+4+8+1]=n[1],this.data[e.idx+4+4+8+2]=n[2],this.data[e.idx+4+4+8+3]=n[3],this.encoding=!1,this.data}}(this.game.canvas),this.recording=!1,this.link="",this.dialog=!1,this.colors=[h.COLORS.y,h.COLORS.w,h.COLORS.r,h.COLORS.o,h.COLORS.b,h.COLORS.g,h.COLORS.h,h.COLORS.c,h.COLORS.i,h.COLORS.p],this.color=0,this.stickers=(()=>{let t=window.localStorage.getItem("movie.stickers");if(t)try{return JSON.parse(t)}catch(t){}return{}})()}mounted(){let t=window.location.search.toString().substr(1);if(t.length>0)try{let e=$.decode(t);e=K.a.inflate(e,{to:"string"});let i=JSON.parse(e);i.movie&&(this.scene=i.scene||this.scene,this.action=i.action||this.action,this.stickers=i.stickers||this.stickers,this.option.mode="movie",history.pushState({},"Cuber",window.location.origin+window.location.pathname))}catch(t){}this.loop(),this.game.controller.taps.push(this.tap),this.onShowChange(this.show)}onShowChange(t=this.show,e=this.show){if(t)this.init();else if(this.playing=!1,e){for(let t=0;t<27;t++)for(let e=0;e<6;e++)this.game.cube.stick(t,e,"");this.game.dirty=!0}}onSceneChange(){window.localStorage.setItem("movie.scene",this.scene),this.init()}onActionChange(){window.localStorage.setItem("movie.action",this.action),this.init()}init(){for(let t=0;t<27;t++)for(let e=0;e<6;e++){let i=6*t+e,n=this.stickers[i]||-1;n<0?this.game.cube.stick(t,e,""):this.game.cube.stick(t,e,this.colors[n])}this.playing=!1,this.game.twister.twist("#"),this.game.twister.twist(this.scene,!1,1,null,!0)}reset(){this.scene="",this.action="",this.stickers={},this.init(),this.game.dirty=!0}play(){this.playing&&(this.init(),this.playing=!0,this.game.twister.twist("-"+this.action+"--",!1,1,this.play,!1))}toggle(){this.playing?this.init():(this.playing=!0,this.play())}snap(){let t=this.game.canvas.toDataURL("image/png").split(";base64,"),e=t[0].split(":")[1],i=window.atob(t[1]),n=i.length,a=new Uint8Array(n);for(let t=0;t<n;++t)a[t]=i.charCodeAt(t);let s=new Blob([a],{type:e}),r=document.createElement("a"),o=document.createEvent("MouseEvents");o.initEvent("click",!1,!1),r.download="cuber.png",r.href=URL.createObjectURL(s),r.dispatchEvent(o)}loop(){requestAnimationFrame(this.loop.bind(this)),this.record()}record(){this.recording&&this.encoder.addFrame()}save(){if(!this.recording)return;this.recording=!1;let t=this.option.speed;this.option.speed=t;let e=this.encoder.finish(),i=new Blob([new Uint8Array(e)],{type:"image/png"}),n=document.createElement("a"),a=document.createEvent("MouseEvents");a.initEvent("click",!1,!1),n.download="cuber.png",n.href=URL.createObjectURL(i),n.dispatchEvent(a)}film(){this.game.duration=60,this.init(),this.recording=!0,this.encoder.start(),this.encoder.addFrame(),this.game.twister.twist("-"+this.action+"-",!1,1,this.save,!1)}share(){let t={movie:!0};this.scene.length>0&&(t.scene=this.scene),this.action.length>0&&(t.action=this.action),t.stickers=this.stickers;let e=JSON.stringify(t),i=K.a.deflate(e,{to:"string"});i=$.encode(i),this.link=window.location.origin+window.location.pathname+"?"+i,this.dialog=!0}onStickersChange(){window.localStorage.setItem("movie.stickers",JSON.stringify(this.stickers))}tap(t,e){if(!this.show)return;if(t<0)return;let i=this.game.cube.cubelets[t],n=6*(t=i.initial)+(e=i.getColor(e));-1==this.color?(i.stick(e,""),delete this.stickers[n]):(i.stick(e,this.colors[this.color]),this.stickers[n]=this.color),window.localStorage.setItem("movie.stickers",JSON.stringify(this.stickers))}};Y([Object(s.Inject)("game"),X("design:type",v)],J.prototype,"game",void 0),Y([Object(s.Inject)("option"),X("design:type",w)],J.prototype,"option",void 0),Y([Object(s.Prop)({default:!1}),X("design:type",Boolean)],J.prototype,"show",void 0),Y([Object(s.Watch)("show"),X("design:type",Function),X("design:paramtypes",[Boolean,Boolean]),X("design:returntype",void 0)],J.prototype,"onShowChange",null),Y([Object(s.Watch)("scene"),X("design:type",Function),X("design:paramtypes",[]),X("design:returntype",void 0)],J.prototype,"onSceneChange",null),Y([Object(s.Watch)("action"),X("design:type",Function),X("design:paramtypes",[]),X("design:returntype",void 0)],J.prototype,"onActionChange",null),Y([Object(s.Watch)("stickers"),X("design:type",Function),X("design:paramtypes",[]),X("design:returntype",void 0)],J.prototype,"onStickersChange",null);var Q=J=Y([Object(s.Component)({template:i(26)})],J),tt=function(t,e,i,n){var a,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(r=(s<3?a(r):s>3?a(e,i,r):a(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r},et=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let it=class extends a.default{constructor(){super(...arguments),this.game=new v,this.option=new w(this.game),this.menu=!1,this.width="100%"}resize(){let t=this.$el;if(window.innerWidth>window.innerHeight/(4/3)){if("100%"==this.width)return this.width=window.innerHeight/(16/9)+"px",t.style.width=this.width,void this.$nextTick(this.resize)}else if("100%"!=this.width)return this.width="100%",t.style.width=this.width,void this.$nextTick(this.resize);if(this.$refs.cuber instanceof HTMLElement&&this.$refs.panel instanceof HTMLElement){let t=this.$refs.cuber,e=this.$refs.panel.clientHeight,i=window.innerHeight-e;this.game.width=t.clientWidth,this.game.height=i,this.game.resize()}}mounted(){if(this.$refs.cuber instanceof Element){this.$refs.cuber.appendChild(this.game.canvas),this.resize()}}onModeChange(t,e){this.$nextTick(this.resize)}onKeyboardChange(t,e){this.$nextTick(this.resize)}};tt([Object(s.Provide)("game"),et("design:type",v)],it.prototype,"game",void 0),tt([Object(s.Provide)("option"),et("design:type",w)],it.prototype,"option",void 0),tt([Object(s.Watch)("option.mode"),et("design:type",Function),et("design:paramtypes",[String,String]),et("design:returntype",void 0)],it.prototype,"onModeChange",null),tt([Object(s.Watch)("option.keyboard"),et("design:type",Function),et("design:paramtypes",[String,String]),et("design:returntype",void 0)],it.prototype,"onKeyboardChange",null);var nt=it=tt([Object(s.Component)({template:i(27),components:{"keyboard-panel":y,"script-panel":F,"movie-panel":Q,"app-menu":z}})],it),at=i(12),st=i.n(at),rt=(i(28),i(29),i(30),function(t,e,i,n){var a,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(r=(s<3?a(r):s>3?a(e,i,r):a(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r}),ot=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let ht=class extends a.default{};rt([Object(s.Prop)({default:!1}),ot("design:type",Boolean)],ht.prototype,"disabled",void 0),rt([Object(s.Prop)({default:!1}),ot("design:type",Boolean)],ht.prototype,"ripple",void 0),rt([Object(s.Prop)({default:!1}),ot("design:type",Boolean)],ht.prototype,"flat",void 0),rt([Object(s.Prop)({default:!1}),ot("design:type",Boolean)],ht.prototype,"block",void 0),rt([Object(s.Prop)({default:!1}),ot("design:type",Boolean)],ht.prototype,"icon",void 0),rt([Object(s.Prop)({default:!1}),ot("design:type",Boolean)],ht.prototype,"large",void 0),rt([Object(s.Prop)({default:!1}),ot("design:type",Boolean)],ht.prototype,"outline",void 0),rt([Object(s.Prop)({default:!1}),ot("design:type",String)],ht.prototype,"color",void 0),rt([Object(s.Prop)({default:!1}),ot("design:type",Boolean)],ht.prototype,"fixed",void 0),rt([Object(s.Prop)({default:!1}),ot("design:type",Boolean)],ht.prototype,"top",void 0),rt([Object(s.Prop)({default:!1}),ot("design:type",Boolean)],ht.prototype,"bottom",void 0),rt([Object(s.Prop)({default:!1}),ot("design:type",Boolean)],ht.prototype,"left",void 0),rt([Object(s.Prop)({default:!1}),ot("design:type",Boolean)],ht.prototype,"right",void 0);var lt=ht=rt([Object(s.Component)({template:i(31)})],ht);a.default.use(st.a),a.default.component("fast-button",lt),new a.default({el:"#app",render:t=>t(nt)})}]);